
(function(){

  var h = "",g = ".png",f = "wialon.item.MPoi",e = "/avl_poi_image/",d = "undefined",c = "string",b = "/",a = "resource/upload_poi_image";
  qx.Mixin.define(f, {
    members : {
      getPoiImageUrl : function(i, j){

        if(typeof j == d || !j)j = 32;
        return wialon.core.Session.getInstance().getBaseUrl() + e + this.getId() + b + i.id + b + j + b + i.i + g;
      },
      setPoiImage : function(k, l, m){

        if(typeof l == c)return wialon.core.Uploader.getInstance().uploadFiles([], a, {
          fileUrl : l,
          itemId : this.getId(),
          poiId : k.id
        }, m, true); else if(l === null || l === undefined)return wialon.core.Uploader.getInstance().uploadFiles([], a, {
          fileUrl : h,
          itemId : this.getId(),
          poiId : k.id
        }, m, true);;
        return wialon.core.Uploader.getInstance().uploadFiles([l], a, {
          itemId : this.getId(),
          poiId : k.id
        }, m, true);
      }
    }
  });
})();
(function(){

  var co = "unit/update_sensor",cn = "resource/update_poi",cm = "unitSensors",cl = "adminField",ck = "resource/update_drivers_group",cj = "wialon events error: ",ci = "render",ch = "u",cg = "avl_route",cf = "item/delete_item",bt = "singleton",bs = "resourcePois",br = "aflds",bq = "item/update_admin_field",bp = "serverUpdated",bo = "core/check_items_billing",bn = "http://search.mapsviewer.com/",bm = "resource/get_job_data",bl = "__i",bk = "//",cv = "resource/get_poi_data",cw = "routeRounds",ct = "report/get_report_data",cu = "report",cr = "unitFuelSettings",cs = "route/get_round_data",cp = "flds",cq = "userNotification",cx = "si",cy = "core/get_hw_types",bR = "core/search_item",bQ = "=",bT = "core/create_resource",bS = "core/create_user",bV = "customField",bU = "core/create_unit",bX = "; ",bW = "usnf",bP = "unitCommandDefinitions",bO = "userNotifications",a = "itemAdminFields",b = "routeSchedules",c = "core/login",d = "route/update_round",e = "geocode",f = "core/create_auth_hash",g = "core/update_data_flags",h = "serviceInterval",j = "core/create_retranslator",k = "resourceReports",cC = "core/reset_password_perform",cB = "core/create_route",cA = "unitReportSettings",cz = "sensor",cG = "qx.event.type.Data",cF = "search",cE = "resource/update_zone",cD = "/avl_evts",cI = "zone",cH = "round",J = "rr",K = "core/create_unit_group",H = "unf",I = "core/get_account_data",N = "fileUploaded",O = "__l",L = "resourceDrivers",M = "commandDefinition",F = "unitServiceIntervals",G = "report/update_report",s = "resource/update_job",r = "rs",u = "zl",t = "en",o = "unitEventRegistrar",n = 'undefined',q = "user/update_user_notification",p = "d",m = "trlrs",l = "user/send_sms",T = "core/get_hw_cmds",U = "__m",V = "route/update_schedule",W = "lang",P = "m",Q = "resource/update_trailers_group",R = "report/get_report_tables",S = "resourceAccounts",X = "trailer",Y = "notification",C = "unit/update_command_definition",B = "itemIcon",A = "schedule",z = "drvrs",y = "driver",x = "core/search_items",w = "core/duplicate",v = "trlrsgr",E = "trailersGroup",D = "itemCustomFields",ba = "resource/update_notification",bb = "wialon.core.Session",bc = "item/update_custom_field",bd = "unit/update_service_interval",be = "invalidSession",bf = "drvrsgr",bg = "resourceJobs",bh = "core/use_auth_hash",bi = "resourceTrailers",bj = "resourceTrailerGroups",bx = "core/logout",bw = "driversGroup",bv = "resourceNotifications",bu = "job",bB = "resource/update_trailer",bA = "core/reset_password_request",bz = "resource/get_notification_data",by = "ujb",bD = "unitMessagesFilter",bC = "cml",bK = "unitTripDetector",bL = "http://geocode.mapsviewer.com/",bI = "resource/get_zone_data",bJ = "resourceZones",bG = "rep",bH = "http://render.mapsviewer.com/",bE = "sens",bF = "itemDeleted",bM = "resource/update_driver",bN = "resourceDriverGroups",ca = "qx.event.type.Event",bY = "poi",cc = "__f",cb = "object",ce = "",cd = "undefined";
  qx.Class.define(bb, {
    extend : qx.core.Object,
    type : bt,
    construct : function(){

      qx.core.Object.call(this);
      this.__a = {
      };
      this.__b = {
      };
      this._libraries = {
      };
    },
    members : {
      __c : 0,
      __d : ce,
      __e : 0,
      __f : null,
      __g : 0,
      __h : null,
      __i : null,
      __j : null,
      __a : null,
      __b : null,
      _libraries : null,
      __k : ce,
      __l : null,
      __m : null,
      __n : ce,
      __o : false,
      __p : ce,
      __q : ce,
      __r : ce,
      __s : [],
      initSession : function(cJ, cK, cL, cM){

        if(this.__c)return false;
        wialon.item.Item.registerProperties();
        wialon.item.User.registerProperties();
        wialon.item.Unit.registerProperties();
        wialon.item.Resource.registerProperties();
        wialon.item.UnitGroup.registerProperties();
        wialon.item.Retranslator.registerProperties();
        wialon.item.Route.registerProperties();
        this.__n = cJ;
        if(typeof cK != cd)this.__p = cK;
        if(typeof cL != cd && !isNaN(parseInt(cL))){

          var cN = parseInt(cL);
          if(cN & 0x800)this.__o = true;
        };
        if(typeof cM != cd)this.__r = cM;
        this.__l = new wialon.render.Renderer;
        this.__m = new wialon.core.MessagesLoader;
        this.__c = 1;
        return true;
      },
      isInitialized : function(){

        return this.__c;
      },
      getAuthUser : function(){

        return this.__k;
      },
      login : function(cO, cP, cQ, cR){

        cR = wialon.util.Helper.wrapCallback(cR);
        if(this.__f || !this.__c){

          cR(2);
          return;
        };
        return wialon.core.Remote.getInstance().remoteCall(c, {
          user : cO,
          password : cP,
          operateAs : cQ,
          loginHash : this.__q,
          appName : this.__p,
          checkService : this.__r
        }, qx.lang.Function.bind(this.__z, this, cR));
      },
      loginAuthHash : function(cS, cT){

        cT = wialon.util.Helper.wrapCallback(cT);
        if(this.__f || !this.__c){

          cT(2);
          return;
        };
        return wialon.core.Remote.getInstance().remoteCall(bh, {
          authHash : cS
        }, qx.lang.Function.bind(this.__z, this, cT));
      },
      duplicate : function(cU, cV, cW, cX){

        cX = wialon.util.Helper.wrapCallback(cX);
        if(this.__f || !this.__c){

          cX(2);
          return;
        };
        this.__d = cU;
        return wialon.core.Remote.getInstance().remoteCall(w, {
          operateAs : cV,
          continueCurrentSession : cW
        }, qx.lang.Function.bind(this.__z, this, cX));
      },
      logout : function(cY){

        cY = wialon.util.Helper.wrapCallback(cY);
        if(!this.__f){

          cY(2);
          return;
        };
        return wialon.core.Remote.getInstance().remoteCall(bx, null, qx.lang.Function.bind(function(da, db){

          if(da){

            cY(da);
            return;
          };
          this.__v();
          cY(0);
        }, this));
      },
      createAuthHash : function(dc){

        dc = wialon.util.Helper.wrapCallback(dc);
        if(!this.__f){

          dc(2);
          return;
        };
        return wialon.core.Remote.getInstance().remoteCall(f, {
        }, dc);
      },
      updateDataFlags : function(dd, de){

        de = wialon.util.Helper.wrapCallback(de);
        if(!this.__f || typeof dd != cb){

          de(2);
          return;
        };
        return wialon.core.Remote.getInstance().remoteCall(g, {
          spec : dd
        }, qx.lang.Function.bind(this.__A, this, de));
      },
      searchItems : function(df, dg, dh, di, dj, dk){

        dk = wialon.util.Helper.wrapCallback(dk);
        if(!this.__f || typeof df != cb){

          dk(2, null);
          return;
        };
        return wialon.core.Remote.getInstance().remoteCall(x, {
          spec : df,
          force : dg ? 1 : 0,
          flags : dh,
          from : di,
          to : dj
        }, qx.lang.Function.bind(this.__B, this, dk));
      },
      searchItem : function(dl, dm, dn){

        dn = wialon.util.Helper.wrapCallback(dn);
        if(!this.__f){

          dn(2, null);
          return;
        };
        return wialon.core.Remote.getInstance().remoteCall(bR, {
          id : dl,
          flags : dm
        }, qx.lang.Function.bind(this.__C, this, dn));
      },
      loadLibrary : function(dp){

        if(typeof this._libraries[dp] != cd)return true;
        if(dp == bO)wialon.item.PluginsManager.bindPropItem(wialon.item.User, bW, cq, q); else if(dp == D)wialon.item.PluginsManager.bindPropItem(wialon.item.Item, cp, bV, bc); else if(dp == a)wialon.item.PluginsManager.bindPropItem(wialon.item.Item, br, cl, bq); else if(dp == B){

          qx.Class.include(wialon.item.Unit, wialon.item.MIcon);
          qx.Class.include(wialon.item.UnitGroup, wialon.item.MIcon);
        } else if(dp == bP)wialon.item.PluginsManager.bindPropItem(wialon.item.Unit, bC, M, C); else if(dp == cm){

          wialon.item.PluginsManager.bindPropItem(wialon.item.Unit, bE, cz, co);
          qx.Class.include(wialon.item.Unit, wialon.item.MUnitSensor);
        } else if(dp == F)wialon.item.PluginsManager.bindPropItem(wialon.item.Unit, cx, h, bd); else if(dp == bK)qx.Class.include(wialon.item.Unit, wialon.item.MUnitTripDetector); else if(dp == bD)qx.Class.include(wialon.item.Unit, wialon.item.MUnitMessagesFilter); else if(dp == o)qx.Class.include(wialon.item.Unit, wialon.item.MUnitEventRegistrar); else if(dp == cA)qx.Class.include(wialon.item.Unit, wialon.item.MUnitReportSettings); else if(dp == cr)qx.Class.include(wialon.item.Unit, wialon.item.MUnitFuelSettings); else if(dp == bv)wialon.item.PluginsManager.bindPropItem(wialon.item.Resource, H, Y, ba, bz); else if(dp == bg)wialon.item.PluginsManager.bindPropItem(wialon.item.Resource, by, bu, s, bm); else if(dp == bJ){

          qx.Class.include(wialon.item.Resource, wialon.item.MZone);
          wialon.item.PluginsManager.bindPropItem(wialon.item.Resource, u, cI, cE, bI);
        } else if(dp == bs){

          qx.Class.include(wialon.item.Resource, wialon.item.MPoi);
          wialon.item.PluginsManager.bindPropItem(wialon.item.Resource, bY, bY, cn, cv);
        } else if(dp == L){

          qx.Class.include(wialon.item.Resource, wialon.item.MDriver);
          wialon.item.MDriver.registerDriverProperties();
          wialon.item.PluginsManager.bindPropItem(wialon.item.Resource, z, y, bM);
        } else if(dp == bN){

          qx.Class.include(wialon.item.Resource, wialon.item.MDriver);
          wialon.item.MDriver.registerDriverProperties();
          wialon.item.PluginsManager.bindPropItem(wialon.item.Resource, bf, bw, ck);
        } else if(dp == bi){

          qx.Class.include(wialon.item.Resource, wialon.item.MDriver);
          wialon.item.MDriver.registerDriverProperties();
          wialon.item.PluginsManager.bindPropItem(wialon.item.Resource, m, X, bB);
        } else if(dp == bj){

          qx.Class.include(wialon.item.Resource, wialon.item.MDriver);
          wialon.item.MDriver.registerDriverProperties();
          wialon.item.PluginsManager.bindPropItem(wialon.item.Resource, v, E, Q);
        } else if(dp == S)qx.Class.include(wialon.item.Resource, wialon.item.MAccount); else if(dp == k){

          qx.Class.include(wialon.item.Resource, wialon.item.MReport);
          wialon.item.PluginsManager.bindPropItem(wialon.item.Resource, bG, cu, G, ct);
        } else if(dp == cw)wialon.item.PluginsManager.bindPropItem(wialon.item.Route, J, cH, d, cs); else if(dp == b)wialon.item.PluginsManager.bindPropItem(wialon.item.Route, r, A, V); else return false;;;;;;;;;;;;;;;;;;;;;;;;
        this._libraries[dp] = 1;
        return true;
      },
      getHwTypes : function(dq){

        dq = wialon.util.Helper.wrapCallback(dq);
        if(!this.__f){

          dq(2);
          return;
        };
        return wialon.core.Remote.getInstance().remoteCall(cy, {
        }, dq);
      },
      getHwCommands : function(dr, ds, dt){

        dt = wialon.util.Helper.wrapCallback(dt);
        if(!this.__f){

          dt(2);
          return;
        };
        return wialon.core.Remote.getInstance().remoteCall(T, {
          deviceTypeId : dr,
          unitId : ds
        }, dt);
      },
      createUnit : function(du, name, dv, dw, dx){

        dx = wialon.util.Helper.wrapCallback(dx);
        if(!this.__f){

          dx(2);
          return;
        };
        return wialon.core.Remote.getInstance().remoteCall(bU, {
          creatorId : du.getId(),
          name : name,
          hwTypeId : dv,
          dataFlags : dw
        }, qx.lang.Function.bind(this.__C, this, dx));
      },
      createUser : function(dy, name, dz, dA, dB){

        dB = wialon.util.Helper.wrapCallback(dB);
        if(!this.__f){

          dB(2);
          return;
        };
        return wialon.core.Remote.getInstance().remoteCall(bS, {
          creatorId : dy.getId(),
          name : name,
          password : dz,
          dataFlags : dA
        }, qx.lang.Function.bind(this.__C, this, dB));
      },
      createUnitGroup : function(dC, name, dD, dE){

        dE = wialon.util.Helper.wrapCallback(dE);
        if(!this.__f){

          dE(2);
          return;
        };
        return wialon.core.Remote.getInstance().remoteCall(K, {
          creatorId : dC.getId(),
          name : name,
          dataFlags : dD
        }, qx.lang.Function.bind(this.__C, this, dE));
      },
      createRetranslator : function(dF, name, dG, dH, dI){

        dI = wialon.util.Helper.wrapCallback(dI);
        if(!this.__f){

          dI(2);
          return;
        };
        return wialon.core.Remote.getInstance().remoteCall(j, {
          creatorId : dF.getId(),
          name : name,
          config : dG,
          dataFlags : dH
        }, qx.lang.Function.bind(this.__C, this, dI));
      },
      createRoute : function(dJ, name, dK, dL){

        dL = wialon.util.Helper.wrapCallback(dL);
        if(!this.__f){

          dL(2);
          return;
        };
        var self = this;
        wialon.core.Session.getInstance().checkItemsBilling([dJ.getAccountId()], cg, 1, function(dM, dN){

          if(!dM && dN.length){

            return wialon.core.Remote.getInstance().remoteCall(cB, {
              creatorId : dJ.getId(),
              name : name,
              dataFlags : dK
            }, qx.lang.Function.bind(self.__C, self, dL));
          } else {

            dL(7);
          };
        });
      },
      createResource : function(dO, name, dP, dQ){

        dQ = wialon.util.Helper.wrapCallback(dQ);
        if(!this.__f){

          dQ(2);
          return;
        };
        return wialon.core.Remote.getInstance().remoteCall(bT, {
          creatorId : dO.getId(),
          name : name,
          dataFlags : dP
        }, qx.lang.Function.bind(this.__C, this, dQ));
      },
      deleteItem : function(dR, dS){

        dS = wialon.util.Helper.wrapCallback(dS);
        return wialon.core.Remote.getInstance().remoteCall(cf, {
          itemId : dR.getId()
        }, qx.lang.Function.bind(this.__D, this, dS, dR.getId()));
      },
      updateItem : function(dT, dU){

        if(!dT || !dU)return;
        for(var dW in dU){

          var dV = this.__a[dW];
          if(typeof dV != cd)dV(dT, dU[dW]);
        };
      },
      resetPasswordRequest : function(dX, dY, ea, eb, ec){

        ec = wialon.util.Helper.wrapCallback(ec);
        if(!this.__c){

          ec(2);
          return;
        };
        var ee = document.cookie.split(bX);
        var ed = t;
        for(var i = 0;i < ee.length;i++){

          var ef = ee[i].split(bQ);
          if(ef.length == 2 && ef[0] == W){

            ed = ef[1];
            break;
          };
        };
        return wialon.core.Remote.getInstance().remoteCall(bA, {
          user : dX,
          email : dY,
          emailFrom : ea,
          url : eb,
          lang : ed
        }, ec);
      },
      resetPasswordPerform : function(eg, eh, ei){

        ei = wialon.util.Helper.wrapCallback(ei);
        if(!this.__c){

          ei(2);
          return;
        };
        return wialon.core.Remote.getInstance().remoteCall(cC, {
          user : eg,
          code : eh
        }, ei);
      },
      sendSms : function(ej, ek, el){

        return wialon.core.Remote.getInstance().remoteCall(l, {
          phoneNumber : ej,
          smsText : ek
        }, wialon.util.Helper.wrapCallback(el));
      },
      getAccountData : function(em, en){

        return wialon.core.Remote.getInstance().remoteCall(I, {
          type : em ? 2 : 1
        }, wialon.util.Helper.wrapCallback(en));
      },
      checkItemsBilling : function(eo, ep, eq, er){

        return wialon.core.Remote.getInstance().remoteCall(bo, {
          items : eo,
          serviceName : ep,
          accessFlags : eq
        }, wialon.util.Helper.wrapCallback(er));
      },
      getReportTables : function(es){

        return wialon.core.Remote.getInstance().remoteCall(R, {
        }, wialon.util.Helper.wrapCallback(es));
      },
      setLoginHash : function(et){

        this.__q = et;
      },
      getCurrUser : function(){

        return this.__f;
      },
      getServerTime : function(){

        return this.__g;
      },
      getItem : function(eu){

        if(!this.__i)return null;
        var ev = this.__i[parseInt(eu)];
        if(typeof ev != n)return ev;
        return null;
      },
      getItems : function(ew){

        if(!this.__i || !this.__j)return null;
        if(typeof ew == cd || ew == ce){

          var ey = new Array;
          for(var ez in this.__i)ey.push(this.__i[ez]);
          return ey;
        } else {

          var ex = this.__j[ew];
          if(typeof ex != cd)return ex;
        };
        return (new Array);
      },
      registerConstructor : function(eA, eB){

        if(typeof this.__b[eA] != cd)return;
        this.__b[eA] = eB;
      },
      registerProperty : function(eC, eD){

        if(typeof this.__a[eC] != cd)return;
        this.__a[eC] = eD;
      },
      getBaseUrl : function(){

        return this.__n;
      },
      getBaseGisUrl : function(eE){

        if(!this.__o && this.__n != ce){

          var eF = this.__n.split(bk);
          if(eF.length >= 2){

            if(eE == ci)return bH + eF[1]; else if(eE == cF)return bn + eF[1]; else if(eE == e)return bL + eF[1];;;
          };
        };
        return this.__n;
      },
      getId : function(){

        return this.__d;
      },
      getRenderer : function(){

        return this.__l;
      },
      getMessagesLoader : function(){

        return this.__m;
      },
      __t : function(){

        if(!this.__d || !this.__e)return;
        wialon.core.Remote.getInstance().ajaxRequest(cD, {
          sid : this.__d
        }, qx.lang.Function.bind(this.__u, this), 60);
      },
      __u : function(eG, eH){

        if(eG != 0){

          if(eG == 1){

            this.fireEvent(be);
            this.__v();
          } else if(this.__e)qx.lang.Function.delay(this.__t, this.__e * 1000, this);;
          return;
        };
        try{

          this.__g = eH.tm;
          for(var i = 0;i < eH.events.length;i++){

            var eI = eH.events[i];
            if(eI.i > 0){

              var eJ = this.getItem(eI.i);
              if(eJ && typeof eJ != cd){

                if(eI.t == ch)this.updateItem(eJ, eI.d); else if(eI.t == P)eJ.handleMessage(eI.d); else if(eI.t == p)this._onItemDeleted(eJ);;;
              } else this.__s.push(eI);
            } else if(eI.i == -1){

              this.fireDataEvent(N, eI.d, null);
            };
          };
        } catch(eK) {

          this.error(cj + eK.message);
        };
        if(this.__e)qx.lang.Function.delay(this.__t, this.__e * 1000, this);
        this.fireEvent(bp);
      },
      parseSessionData : function(eL){

        if(!eL || this.__f)return false;
        this.__d = eL.eid;
        this.__e = 2;
        this.__g = eL.tm;
        this.__k = eL.au;
        this.__h = {
        };
        for(var eM in eL.classes)this.__h[eL.classes[eM]] = eM;
        this.__i = {
        };
        this.__j = {
        };
        this.__f = this.__w(eL.user, wialon.item.User.defaultDataFlags());
        this.__x(this.__f);
        if(this.__e)qx.lang.Function.delay(this.__t, this.__e * 1000, this);
        return true;
      },
      __v : function(){

        this.__c = 0;
        this.__d = ce;
        this.__f = null;
        this.__g;
        this.__i = null;
        this.__j = null;
        this.__e = 0;
        this.__l = null;
        this.__m = null;
        this.__n = ce;
        this.__o = false;
        this.__a = {
        };
        this.__b = {
        };
        this.__k = ce;
        this._libraries = {
        };
        this._disposeMap(bl);
        this._disposeObjects(cc);
        this.__h = null;
      },
      __w : function(eN, eO){

        if(!eN || !eO)return null;
        eN.tp = this.__h[eN.cls];
        if(typeof eN.tp == cd)return null;
        var eP;
        var eQ = this.__b[eN.tp];
        if(typeof eQ == cd)return null;
        eP = new eQ(eN, eO);
        this.updateItem(eP, eN);
        if(eP && this.__s && this.__s.length){

          for(var i = 0;i < this.__s.length;i++){

            if(typeof this.__s[i] == cb && eP.getId() == this.__s[i].i){

              this.updateItem(eP, this.__s[i].d);
              delete this.__s[i];
              break;
            };
          };
        };
        return eP;
      },
      __x : function(eR){

        if(!eR || !this.__i)return;
        this.__i[eR.getId()] = eR;
        var eS = this.__j[eR.getType()];
        if(typeof eS == cd){

          this.__j[eR.getType()] = new Array;
          eS = this.__j[eR.getType()];
        };
        eS.push(eR);
      },
      __y : function(eT){

        if(!eT)return;
        if(typeof this.__i[eT.getId()] != cd)delete this.__i[eT.getId()];
        var eU = this.__j[eT.getType()];
        if(typeof eU != cd)qx.lang.Array.remove(eU, eT);
        eT.dispose();
      },
      _onItemDeleted : function(eV){

        if(!eV)return;
        eV.fireEvent(bF);
        this.__y(eV);
      },
      __z : function(eW, eX, eY){

        if(eX || !eY){

          eW(eX);
          return;
        };
        if(this.parseSessionData(eY))eW(0); else eW(6);
      },
      __A : function(fa, fb, fc){

        if(fb || !fc){

          fa(fb);
          return;
        };
        for(var i = 0;i < fc.length;i++){

          var fe = fc[i].f;
          var fd = fc[i].i;
          var ff = fc[i].d;
          var fg = this.__i[fd];
          if(typeof fg == "undefined" && fe != 0 && ff){

            var fg = this.__w(ff, fe);
            if(fg)this.__x(fg);
          } else {

            if(fe == 0)this.__y(fg); else {

              if(typeof fg == "undefined")return;
              if(ff)this.updateItem(fg, ff);
              fg.setDataFlags(fe);
            };
          };
          ff = null;
        };
        fa(0);
      },
      __B : function(fh, fi, fj){

        if(fi || !fj){

          fh(fi, null);
          return;
        };
        var fl = {
          searchSpec : fj.searchSpec,
          dataFlags : fj.dataFlags,
          totalItemsCount : fj.totalItemsCount,
          indexFrom : fj.indexFrom,
          indexTo : fj.indexTo,
          items : []
        };
        for(var i = 0;i < fj.items.length;i++){

          var fk = this.__w(fj.items[i], fj.dataFlags);
          if(fk)fl.items.push(fk);
        };
        fh(0, fl);
        return fl;
      },
      __C : function(fm, fn, fo){

        if(fn || !fo){

          fm(fn, null);
          return;
        };
        var fp = this.__w(fo.item, fo.flags);
        fm((fp === null ? 6 : 0), fp);
        return fp;
      },
      __D : function(fq, fr, fs, ft){

        if(!fs){

          var fu = this.getItem(fr);
          if(fu){

            fu.fireEvent("itemDeleted");
            this.__y(fu);
          };
        };
        fq(fs);
      }
    },
    destruct : function(){

      this.__v();
      this._disposeObjects(cc, O, U);
    },
    events : {
      "serverUpdated" : ca,
      "invalidSession" : ca,
      "fileUploaded" : cG
    }
  });
})();
(function(){

  var j = "prp",i = "item/add_log_record",h = "mu",g = "string",f = "delete_item",e = "Object",d = "prpu",c = "bact",b = "custom_msg",a = "qx.event.type.Event",E = "nm",D = "item/update_custom_property",C = "changeUserAccess",B = "update_name",A = "String",z = "changeDataFlags",y = "changeMeasureUnits",x = "number",w = "item/update_name",v = "messageRegistered",q = "changeCustomProperty",r = "uacl",o = "wialon.item.Item",p = "item/update_measure_units",m = "changeName",n = "crt",k = "update_access",l = "undefined",s = "qx.event.type.Data",t = "Integer",u = "";
  qx.Class.define(o, {
    extend : qx.core.Object,
    construct : function(F, G){

      qx.core.Object.call(this);
      this.setDataFlags(G);
      this._id = F.id;
      this._type = F.tp;
    },
    properties : {
      dataFlags : {
        init : null,
        check : t,
        event : z
      },
      name : {
        init : null,
        check : A,
        event : m
      },
      measureUnits : {
        init : 0,
        check : t,
        event : y
      },
      userAccess : {
        init : null,
        check : t,
        event : C
      },
      customProps : {
        init : null,
        check : e
      },
      creatorId : {
        init : null,
        check : t
      },
      accountId : {
        init : null,
        check : t
      }
    },
    members : {
      _id : 0,
      _type : u,
      getId : function(){

        return this._id;
      },
      getType : function(){

        return this._type;
      },
      getCustomProperty : function(H, I){

        var K = this.getCustomProps();
        if(K){

          var J = K[H];
          if(typeof J != l)return J;
        };
        if(typeof I != l)return I;
        return u;
      },
      setCustomProperty : function(L, M){

        var O = this.getCustomProps();
        if(O){

          var N = O[L];
          if(typeof N == l)N = u;
          if(M != u)O[L] = M; else if(N != u)delete O[L];;
          if(M != N)this.fireDataEvent(q, {
            n : L,
            v : M
          }, {
            n : L,
            v : N
          });
        };
      },
      handleMessage : function(P){

        this.fireDataEvent(v, P, null);
      },
      updateCustomProperty : function(Q, R, S){

        return wialon.core.Remote.getInstance().remoteCall(D, {
          itemId : this.getId(),
          name : Q,
          value : (typeof R == g || typeof R == x) ? R : u
        }, qx.lang.Function.bind(this.__E, this, wialon.util.Helper.wrapCallback(S)));
      },
      updateMeasureUnits : function(T, U, V){

        return wialon.core.Remote.getInstance().remoteCall(p, {
          itemId : this.getId(),
          type : T,
          flags : U
        }, qx.lang.Function.bind(this._onUpdateProperties, this, wialon.util.Helper.wrapCallback(V)));
      },
      updateName : function(name, W){

        return wialon.core.Remote.getInstance().remoteCall(w, {
          itemId : this.getId(),
          name : name
        }, qx.lang.Function.bind(this._onUpdateProperties, this, wialon.util.Helper.wrapCallback(W)));
      },
      addLogRecord : function(X, Y, ba, bb){

        return wialon.core.Remote.getInstance().remoteCall(i, {
          itemId : this.getId(),
          action : X,
          newValue : Y || u,
          oldValue : ba || u
        }, wialon.util.Helper.wrapCallback(bb));
      },
      __E : function(bc, bd, be){

        if(bd == 0 && be)this.setCustomProperty(be.n, be.v);
        bc(bd);
      },
      _onUpdateProperties : function(bf, bg, bh){

        if(bg == 0 && bh)wialon.core.Session.getInstance().updateItem(this, bh);
        bf(bg);
      }
    },
    statics : {
      dataFlag : {
        base : 0x00000001,
        customProps : 0x00000002,
        billingProps : 0x00000004,
        customFields : 0x00000008,
        image : 0x00000010,
        messages : 0x00000020,
        guid : 0x00000040,
        adminFields : 0x00000080
      },
      accessFlag : {
        view : 0x1,
        viewProperties : 0x2,
        setAcl : 0x4,
        deleteItem : 0x8,
        editName : 0x10,
        viewCFields : 0x20,
        editCFields : 0x40,
        editOther : 0x80,
        editImage : 0x100,
        execReports : 0x200,
        editSubItems : 0x400,
        manageLog : 0x800,
        viewAFields : 0x1000,
        editAFields : 0x2000
      },
      messageFlag : {
        typeMask : 0xFF00,
        typeUnitData : 0x0000,
        typeUnitSMS : 0x0100,
        typeUnitCmd : 0x0200,
        typeUnitEvent : 0x0600,
        typeUserLog : 0x0400,
        typeNotification : 0x0300,
        typeBalance : 0x0500,
        typeAgroCultivation : 0x0700,
        typeDriverSMS : 0x0900,
        typeLogRecord : 0x1000,
        typeOther : 0xFF00
      },
      measureUnitsType : {
        si : 0x00,
        us : 0x01
      },
      logMessageAction : {
        itemCustomMessage : b,
        itemUpdatedName : B,
        itemUpdatedUserAccess : k,
        itemDeleted : f
      },
      registerProperties : function(){

        var bi = wialon.core.Session.getInstance();
        bi.registerProperty(E, this.remoteUpdateName);
        bi.registerProperty(h, this.remoteUpdateMeasureUnits);
        bi.registerProperty(r, this.remoteUpdateUserAccess);
        bi.registerProperty(j, this.remoteUpdateCustomProps);
        bi.registerProperty(d, this.remoteUpdateCustomProp);
        bi.registerProperty(n, this.remoteUpdateCreatorId);
        bi.registerProperty(c, this.remoteUpdateAccountId);
      },
      remoteUpdateName : function(bj, bk){

        bj.setName(bk);
      },
      remoteUpdateMeasureUnits : function(bl, bm){

        bl.setMeasureUnits(bm);
      },
      remoteUpdateUserAccess : function(bn, bo){

        bn.setUserAccess(bo);
      },
      remoteUpdateCustomProps : function(bp, bq){

        bp.setCustomProps(bq);
      },
      remoteUpdateCustomProp : function(br, bs){

        for(var bt in bs){

          br.setCustomProperty(bt, bs[bt]);
        };
      },
      remoteUpdateCreatorId : function(bu, bv){

        bu.setCreatorId(bv);
      },
      remoteUpdateAccountId : function(bw, bx){

        bw.setAccountId(bx);
      }
    },
    events : {
      "changeName" : s,
      "changeDataFlags" : s,
      "changeUserAccess" : s,
      "changeCustomProperty" : s,
      "itemDeleted" : a,
      "messageRegistered" : s
    }
  });
})();
(function(){

  var k = "singleton",j = "wialon.core.Remote",h = "error",g = "/gis_post?1",f = "abort",e = "&sid=",d = "//",c = ":",b = "core/batch",a = "/gis_geocode",x = "/wialon/post.html",w = "/gis_search",v = "success",u = "statusError",t = "/gis_post?2",s = "/wialon/ajax.html?svc=",r = "timeout",q = "object",p = "sdk",o = "undefined",m = "geocode",n = "search",l = "";
  qx.Class.define(j, {
    extend : qx.core.Object,
    type : k,
    construct : function(){

      qx.core.Object.call(this);
      this._req = {
      };
      this._req[p] = new wialon.core.PostMessage(this.createFullUrl(wialon.core.Session.getInstance().getBaseUrl()) + x, 0);
      this._req[n] = new wialon.core.PostMessage(this.createFullUrl(wialon.core.Session.getInstance().getBaseGisUrl(n)) + g, 1);
      this._req[m] = new wialon.core.PostMessage(this.createFullUrl(wialon.core.Session.getInstance().getBaseGisUrl(m)) + t, 2);
    },
    members : {
      __F : null,
      __G : [],
      __H : "",
      remoteCall : function(y, z, A, B){

        A = wialon.util.Helper.wrapCallback(A);
        if(typeof B == o)B = 30;
        var C = s + y + e + wialon.core.Session.getInstance().getId();
        if(this.__F)this.__F.push({
          svc : y,
          params : z ? z : {
          },
          callback : A,
          timeout : B
        }); else {

          var D = {
            params : {
            }
          };
          if(z)D = {
            params : z
          };
          return this.ajaxRequest(C, D, A, B, y);
        };
      },
      replaceSender : function(E, F){

        this._req[E] = F;
      },
      startBatch : function(G){

        if(this.__F)return 0;
        if(G)this.__H = G;
        this.__F = new Array;
        return 1;
      },
      finishBatch : function(H, I, J){

        H = wialon.util.Helper.wrapCallback(H);
        if(!this.__F){

          H(2, 2);
          return;
        };
        this.__G.push(H);
        if(this.__H && I != this.__H){

          this.__G.push(H);
          return;
        };
        H = wialon.util.Helper.wrapCallback(this.__G);
        if(!this.__F.length){

          this.__H = l;
          this.__G = [];
          this.__F = null;
          H(0, 0);
          return;
        };
        if(!J)J = 0;
        var M = 0;
        var L = [];
        var K = [];
        for(var i = 0;i < this.__F.length;i++){

          var N = this.__F[i];
          L.push({
            svc : N.svc,
            params : N.params
          });
          K.push(N.callback);
          if(N.timeout > M)M = N.timeout;
        };
        this.__F = null;
        this.__H = l;
        this.__G = [];
        this.remoteCall(b, {
          params : L,
          flags : J
        }, qx.lang.Function.bind(this.__M, this, H, K), M);
      },
      ajaxRequest : function(O, P, Q, R, S){

        var T = p;
        if(O.match(a))T = m; else if(O.match(w))T = n;;
        if(this._req[T].supportAsync())this._req[T].send(O, P, qx.lang.Function.bind(this.__J, this, Q), qx.lang.Function.bind(this.__K, this, Q), R, {
        }); else {

          P.svc = S;
          return this.__J(Q, wialon.util.Json.parse(this._req[T].send(wialon.util.Json.stringify(P))));
        };
      },
      jsonRequest : function(U, V, W, X, Y){

        var bb = new qx.io.request.Jsonp(U);
        var ba = null;
        bb.setCache(false);
        if(Y)bb.setCallbackName(Y);
        bb.setTimeout(X * 1000);
        if(V){

          if(typeof V == q)bb.setRequestData(V); else bb.setRequestData({
            params : V
          });
        };
        if(W){

          bb.addListener(v, qx.lang.Function.bind(this.__L, this, W, bb));
          ba = qx.lang.Function.bind(this.__K, this, W, bb);
          bb.addListener(h, ba);
          bb.addListener(f, ba);
          bb.addListener(r, ba);
          bb.addListener(u, ba);
        };
        bb.send();
        bb = null;
        ba = null;
      },
      setBaseUrl : function(bc){

        this.__n = bc;
      },
      createFullUrl : function(bd){

        if(typeof document == o)return bd;
        return bd ? bd : document.location.protocol + d + document.location.hostname + (document.location.port.length ? c + document.location.port : l);
      },
      __J : function(be, bf){

        return this.__N(bf, be);
      },
      __K : function(bg, bh){

        bg(5, null);
      },
      __L : function(bi, bj){

        this.__N(bj.getResponse(), bi);
      },
      __M : function(bk, bl, bm, bn){

        if(bm == 0 && (!bn || !bl || bl.length != bn.length))bm = 3;
        if(bm){

          for(var i = 0;i < bl.length;i++)bl[i] ? bl[i](bm) : null;
          bk(bm, bm);
          return;
        };
        var bq = 0;
        var bp = 0;
        var bo = [];
        for(var i = 0;i < bn.length;i++){

          bo.push(this.__N(bn[i], bl[i]));
          if(bn[i])bq = bn[i];
          if(typeof bn[i].error != "undefined")bp++;
        };
        bk(0, bq, bp);
        return bo;
      },
      __N : function(br, bs){

        if(br && typeof br.error != "undefined" && br.error != 0)return bs(br.error, null); else if(br)return bs(0, br); else return bs(3, null);;
      }
    },
    statics : {
      BatchFlag : {
        breakFailure : 0x01
      }
    }
  });
})();
(function(){

  var j = "",h = "onmessage",g = "none",f = "src",e = "onload",d = "message",c = "wialon.core.PostMessage",b = "load",a = "iframe";
  qx.Class.define(c, {
    extend : qx.core.Object,
    construct : function(k, l){

      qx.core.Object.call(this);
      this._url = k;
      this._id = this._url;
      this._io = null;
      this._callbacks = {
      };
    },
    members : {
      send : function(m, o, p, q, r){

        if(!this._io){

          this._io = document.createElement(a);
          this._io.style.display = g;
          if(window.attachEvent)this._io.attachEvent(e, qx.lang.Function.bind(this.__P, this)); else this._io.addEventListener(b, qx.lang.Function.bind(this.__P, this), false);
          this._io.setAttribute(f, this._url);
          document.body.appendChild(this._io);
          if(window.addEventListener)window.addEventListener(d, qx.lang.Function.bind(this.__O, this), false); else window.attachEvent(h, qx.lang.Function.bind(this.__O, this));
        };
        var t = {
          id : ++this._counter,
          url : m,
          params : this.__R(o),
          source : this._id
        };
        var s = this._io.contentWindow;
        if(s){

          var u = wialon.util.Json.stringify(t);
          this._callbacks[this._counter] = [p, q, u, 0, r];
          if(r)this._callbacks[this._counter].push(setTimeout(qx.lang.Function.bind(this.__Q, this, this._counter), r * 1000));
          if(this._frameReady)s.postMessage(u, this._url); else this._requests.push(u);
        } else q();
      },
      supportAsync : function(){

        return true;
      },
      _url : j,
      _io : null,
      _id : 0,
      _callbacks : {
      },
      _requests : [],
      _frameReady : false,
      _timeout : 0,
      _counter : 0,
      __O : function(event){

        var w = wialon.util.Json.parse(event.data);
        if(w.source != this._id)return;
        if(!w.id){

          this._frameReady = true;
          this.__P();
          return;
        };
        var v = this._callbacks[w.id];
        if(v){

          if(w && w.text && w.text.error && w.text.error == 1003 && v[3] < 3){

            v[3]++;
            if(v[4] && v[5]){

              clearTimeout(v[5]);
              v[5] = setTimeout(qx.lang.Function.bind(this.__Q, this, this._counter), v[4] * 1000);
            };
            if(this._io.contentWindow){

              setTimeout(qx.lang.Function.bind(function(x){

                this._io.contentWindow.postMessage(x, this._url);
              }, this, v[2]), Math.random() * 1000);
              return;
            };
          };
          if(v[w.error])v[w.error](w.text);
          if(v[4] && v[5])clearTimeout(v[5]);
          delete this._callbacks[w.id];
        };
      },
      __P : function(){

        if(!this._frameReady){

          this._io.contentWindow.postMessage("{id: 0, source:'" + this._id + "'}", this._url);
          return;
        };
        for(var i = 0;i < this._requests.length;i++)this._io.contentWindow.postMessage(this._requests[i], this._url);
        this._requests = [];
      },
      __Q : function(y){

        var z = this._callbacks[y];
        if(z){

          if(z[1])z[1]();
          delete this._callbacks[y];
        };
      },
      __R : function(A){

        var B = [];
        var C = false;
        if(typeof A == "object"){

          for(var n in A){

            if(typeof A[n] == "object")B.push(n + "=" + encodeURIComponent(wialon.util.Json.stringify(A[n]))); else B.push(n + "=" + encodeURIComponent(A[n]));
            if(n == "sid")C = true;
          };
          return B.join("&") + (!C ? "&sid=" + wialon.core.Session.getInstance().getId() : "");
        };
        return !C ? "&sid=" + wialon.core.Session.getInstance().getId() : "";
      }
    }
  });
})();
(function(){

  var o = "wialon.util.Json",n = "number",m = "array",k = ')',j = '(',h = "static",g = '"',d = "";
  qx.Class.define(o, {
    type : h,
    statics : {
      stringify : function(p){

        var f = null;
        if(isNaN(p))f = this.__S[typeof p]; else if(p instanceof Array)f = this.__S[m]; else f = this.__S[n];;
        if(f)return f.apply(this, [p]);
        return d;
      },
      parse : function(q, r){

        if(r === undefined)r = false;
        if(r && !/^("(\\.|[^"\\\n\r])*?"|[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t])+?$/.test(q))return undefined;
        if(!q || q == d)return {
        };
        var s = null;
        try{

          s = eval(j + q + k);
        } catch(e) {

          try{

            s = eval(g + q + g);
          } catch(e) {

            return null;
          };
        };
        return s;
      },
      compareObjects : function(t, u){

        if((t == null && u != null) || (u == null && t != null))return false;
        return this.stringify(t) == this.stringify(u);
      },
      __S : {
        'array' : function(x){

          var a = ['['],b,f,i,l = x.length,v;
          for(i = 0;i < l;i += 1){

            v = x[i];
            f = this.__S[typeof v];
            if(f){

              v = f.apply(this, [v]);
              if(typeof v == 'string'){

                if(b){

                  a[a.length] = ',';
                };
                a[a.length] = v;
                b = true;
              };
            };
          };
          a[a.length] = ']';
          return a.join('');
        },
        'boolean' : function(x){

          return String(x);
        },
        'null' : function(x){

          return "null";
        },
        'number' : function(x){

          return isFinite(x) ? String(x) : 'null';
        },
        'object' : function(x){

          if(x){

            if(x instanceof Array){

              return this.__S.array.apply(this, [x]);
            };
            var a = ['{'],b,f,i,v;
            for(i in x){

              v = x[i];
              f = this.__S[typeof v];
              if(f){

                v = f.apply(this, [v]);
                if(typeof v == 'string'){

                  if(b){

                    a[a.length] = ',';
                  };
                  a.push(this.__S.string.apply(this, [i]), ':', v);
                  b = true;
                };
              };
            };
            a[a.length] = '}';
            return a.join('');
          };
          return 'null';
        },
        'string' : function(x){

          if(/["\\\x00-\x1f]/.test(x)){

            x = x.replace(/([\x00-\x1f\\"])/g, function(a, b){

              var w = {
                '\b' : '\\b',
                '\t' : '\\t',
                '\n' : '\\n',
                '\f' : '\\f',
                '\r' : '\\r',
                '"' : '\\"',
                '\\' : '\\\\'
              };
              var c = w[b];
              if(c){

                return c;
              };
              c = b.charCodeAt();
              return '\\u00' + Math.floor(c / 16).toString(16) + (c % 16).toString(16);
            });
          };
          return '"' + x + '"';
        }
      }
    }
  });
})();
(function(){

  var p = "\\+",o = "\\)",n = "static",m = '^',l = "resource/get_zones_by_point",j = "\\^",h = "\\[",g = "wialon.util.Helper",f = "\\]",e = "\\.",D = '$',C = "\\(",B = "\\{",A = "\\\\",z = "\\}",y = "?",w = ".*",v = "\\$",u = ".",t = "undefined",q = "function",s = "*";
  qx.Class.define(g, {
    type : n,
    statics : {
      filterItems : function(E, F){

        if(!E)return null;
        var H = new Array;
        for(var i = 0;i < E.length;i++){

          var G = E[i];
          if(!G || wialon.util.Number.and(G.getUserAccess(), F) != F)continue;
          H.push(G);
        };
        return H;
      },
      searchObject : function(I, J, K){

        if(!I || !J || !K)return null;
        for(var L in I){

          if(typeof I[L][J] == t || I[L][J] != K)continue;
          return I[L];
        };
        return null;
      },
      sortItems : function(M, N){

        if(!M)return null;
        if(typeof N != q)N = function(a){

          return a.getName();
        };
        var O = function(a, b){

          var R = function(S){

            return S.match(/\d+|\D+/g);
          };
          var P = R(N(a).toLowerCase());
          var Q = R(N(b).toLowerCase());
          if(!P || !Q || !P.length || !Q.length){

            if(!P || !P.length)return -1;
            if(!Q || !Q.length)return 1;
            return 0;
          };
          for(var x = 0;P[x] && Q[x];x++){

            if(P[x] !== Q[x]){

              var c = Number(P[x]),d = Number(Q[x]);
              if(c == P[x] && d == Q[x])return c - d; else return (P[x] > Q[x]) ? 1 : -1;
            };
          };
          return P.length - Q.length;
        };
        return M.sort(O);
      },
      getZonesInPoint : function(T, U){

        return wialon.core.Remote.getInstance().remoteCall(l, {
          spec : T
        }, wialon.util.Helper.wrapCallback(U));
      },
      wildcardCompare : function(V, W, X){

        if(V == null || W == null)return null;
        if(X && W.indexOf(s) == -1 && W.indexOf(y) == -1)W = s + W + s;
        var Y = W.toLowerCase();
        Y = Y.replace(/\\/g, A);
        Y = Y.replace(/\./g, e);
        Y = Y.replace(/\?/g, u);
        Y = Y.replace(/\*/g, w);
        Y = Y.replace(/\^/g, j);
        Y = Y.replace(/\$/g, v);
        Y = Y.replace(/\+/g, p);
        Y = Y.replace(/\(/g, C);
        Y = Y.replace(/\)/g, o);
        Y = Y.replace(/\[/g, h);
        Y = Y.replace(/\]/g, f);
        Y = Y.replace(/\{/g, B);
        Y = Y.replace(/\}/g, z);
        var ba = V.toLowerCase().match(new RegExp(m + Y + D));
        return ba != null ? true : false;
      },
      wrapCallback : function(bc){

        return typeof bc == q ? bc : qx.lang.Function.bind(this.__T, this, bc);
      },
      countProps : function(bd){

        var be = 0;
        for(var k in bd){

          if(bd.hasOwnProperty(k)){

            be++;
          };
        };
        return be;
      },
      objectsEqual : function(bf, bg){

        if(typeof (bf) !== typeof (bg)){

          return false;
        };
        if(typeof (bf) === q){

          return bf.toString() === bg.toString();
        };
        if(bf instanceof Object && bg instanceof Object){

          if(this.countProps(bf) !== this.countProps(bg)){

            return false;
          };
          var r = true;
          for(var k in bf){

            r = this.objectsEqual(bf[k], bg[k]);
            if(!r){

              return false;
            };
          };
          return true;
        } else {

          return bf === bg;
        };
      },
      __T : function(){

        if(!arguments.length)return arguments;
        var bi = Array.prototype.slice.call(arguments, 1);
        var bh = arguments[0];
        if(!bh)return bi;
        if(!(bh instanceof Array))bh = [bh];
        for(var i = 0;i < bh.length;i++)bh[i].apply(this, bi);
        return bi;
      }
    }
  });
})();
(function(){

  var b = "wialon.util.Number",a = "static";
  qx.Class.define(b, {
    type : a,
    statics : {
      or : function(c){

        var e = this.__U();
        for(var i = 0;i < arguments.length;i++){

          var d = this.__U(arguments[i]);
          e[0] = (e[0] | d[0]) >>> 0;
          e[1] = (e[1] | d[1]) >>> 0;
        };
        return e[0] * 0x100000000 + e[1];
      },
      xor : function(f){

        var h = this.__U();
        for(var i = 0;i < arguments.length;i++){

          var g = this.__U(arguments[i]);
          h[0] = (h[0] ^ g[0]) >>> 0;
          h[1] = (h[1] ^ g[1]) >>> 0;
        };
        return h[0] * 0x100000000 + h[1];
      },
      and : function(j){

        var l = [0xFFFFFFFF, 0xFFFFFFFF];
        for(var i = 0;i < arguments.length;i++){

          var k = this.__U(arguments[i]);
          l[0] = (l[0] & k[0]) >>> 0;
          l[1] = (l[1] & k[1]) >>> 0;
        };
        return l[0] * 0x100000000 + l[1];
      },
      not : function(m){

        var n = this.__U(m);
        n[0] = ((~n[0]) & 0x1FFFFF) >>> 0;
        n[1] = (~n[1]) >>> 0;
        return n[0] * 0x100000000 + n[1];
      },
      exclude : function(o){

        if(!arguments.length)return 0;
        var q = this.__U(arguments[0]);
        for(var i = 1;i < arguments.length;i++){

          var p = this.__U(this.not(arguments[i]));
          q[0] = (q[0] & p[0]) >>> 0;
          q[1] = (q[1] & p[1]) >>> 0;
        };
        return q[0] * 0x100000000 + q[1];
      },
      umax : function(){

        return 0x1FFFFFFFFFFFFF;
      },
      __U : function(r){

        var t = [0, 0];
        if(typeof r == "number"){

          if(r == -1)return [0x1FFFFF, 0xFFFFFFFF];
          r = r.toString(16);
        };
        if(typeof r == "string" && r.length && r.length <= 16){

          var s = [0, 0];
          for(var i = r.length;i > 0;i--)t[r.length - i < 8 ? 1 : 0] |= parseInt(r[i - 1], 16) << (((r.length - i) * 4) % 32);
        };
        t[0] = t[0] >>> 0;
        t[1] = t[1] >>> 0;
        return t;
      }
    }
  });
})();
(function(){

  var t = "wialon.item.User",s = "changeHostsMask",r = "create_user",q = "user/update_item_access",p = "fl",o = "user/update_password",n = "delete_user_notify",m = "user/get_items_access",l = "create_user_notify",k = "update_user_pass",d = "user",j = "hm",g = "update_hosts_mask",c = "update_user_flags",b = "user/update_user_flags",f = "user/update_hosts_mask",e = "Integer",h = "String",a = "changeUserFlags",i = "qx.event.type.Data";
  qx.Class.define(t, {
    extend : wialon.item.Item,
    properties : {
      userFlags : {
        init : null,
        check : e,
        event : a
      },
      hostsMask : {
        init : null,
        check : h,
        event : s
      }
    },
    members : {
      getItemsAccess : function(u, v, w){

        return wialon.core.Remote.getInstance().remoteCall(m, {
          userId : this.getId(),
          directAccess : u,
          itemSuperclass : v
        }, wialon.util.Helper.wrapCallback(w));
      },
      updateItemAccess : function(x, y, z){

        return wialon.core.Remote.getInstance().remoteCall(q, {
          userId : this.getId(),
          itemId : x.getId(),
          accessMask : y
        }, wialon.util.Helper.wrapCallback(z));
      },
      updateUserFlags : function(A, B, C){

        return wialon.core.Remote.getInstance().remoteCall(b, {
          userId : this.getId(),
          flags : A,
          flagsMask : B
        }, qx.lang.Function.bind(this._onUpdateProperties, this, wialon.util.Helper.wrapCallback(C)));
      },
      updateHostsMask : function(D, E){

        return wialon.core.Remote.getInstance().remoteCall(f, {
          userId : this.getId(),
          hostsMask : D
        }, qx.lang.Function.bind(this._onUpdateProperties, this, wialon.util.Helper.wrapCallback(E)));
      },
      updatePassword : function(F, G, H){

        return wialon.core.Remote.getInstance().remoteCall(o, {
          userId : this.getId(),
          oldPassword : F,
          newPassword : G
        }, wialon.util.Helper.wrapCallback(H));
      }
    },
    statics : {
      dataFlag : {
        flags : 0x00000100,
        notifications : 0x00000200,
        connSettings : 0x00000400
      },
      accessFlag : {
        setItemsAccess : 0x100000,
        operateAs : 0x200000,
        editUserFlags : 0x400000
      },
      defaultDataFlags : function(){

        return wialon.item.Item.dataFlag.base | wialon.item.Item.dataFlag.customProps | wialon.item.Item.dataFlag.billingProps | wialon.item.User.dataFlag.flags;
      },
      userFlag : {
        isDisabled : 0x00000001,
        cantChangePassword : 0x00000002,
        canCreateItems : 0x00000004,
        isReadonly : 0x00000010,
        canSendSMS : 0x00000020
      },
      logMessageAction : {
        userCreated : r,
        userUpdatedHostsMask : g,
        userUpdatedPassword : k,
        userUpdatedFlags : c,
        userCreatedNotification : l,
        userDeletedNotification : n
      },
      registerProperties : function(){

        var I = wialon.core.Session.getInstance();
        I.registerConstructor(d, wialon.item.User);
        I.registerProperty(p, this.remoteUpdateUserFlags);
        I.registerProperty(j, this.remoteUpdateHostsMask);
      },
      remoteUpdateUserFlags : function(J, K){

        J.setUserFlags(K);
      },
      remoteUpdateHostsMask : function(L, M){

        L.setHostsMask(M);
      }
    },
    events : {
      "changeUserFlags" : i,
      "changeHostsMask" : i
    }
  });
})();
(function(){

  var bv = "download_file",bu = "cneh",bt = "update_unit_phone",bs = "changeAccessPassword",br = "update_unit_uid",bq = "check_config",bp = "changeDeviceTypeId",bo = "changeMessageParams",bn = "changeDriverCode",bm = "pos",bb = "unit/update_traffic_counter",ba = "update_unit_trip_cfg",Y = "update_alias",X = "unit/update_mileage_counter",W = "update_msgs_filter_cfg",V = "update_unit_milcounter",U = "delete_unit_msg",T = "unit/update_calc_flags",S = "bind_unit_trailer",R = "delete_alias",bC = "unit/update_eh_counter",bD = "&time=",bA = "changeLastMessage",bB = "unbind_unit_driver",by = "hw",bz = "update_unit_calcflags",bw = "ud",bx = "get",bE = "&msgIndex=",bF = "psw",bf = "update_unit_phone2",be = "cfl",bh = "avl_unit",bg = "ph",bj = "import_unit_msgs",bi = "uid",bl = "unit/exec_cmd",bk = "update_unit_bytecounter",bd = "create_alias",bc = "lmsg",a = "changePhoneNumber2",b = "changeMileageCounter",c = "&svc=unit/update_hw_params&params=",d = "unit/update_access_password",e = "function",f = "delete_service_interval",g = "changeTrafficCounter",h = "wialon.item.Unit",i = "changePhoneNumber",j = "update_unit_report_cfg",bJ = "/avl_msg_photo.jpeg?sid=",bI = "update_unit_pass",bH = "cmds",bG = "ph2",bN = "changeUniqueId",bM = "cnm",bL = "unbind_unit_trailer",bK = "unit/update_device_type",bP = "unit/update_phone",bO = "bind_unit_driver",B = "update_unit_hw",C = "prms",z = "changeEngineHoursCounter",A = "unit/update_phone2",F = "cnkb",G = "update_unit_ehcounter",D = "update_sensor",E = "changePosition",x = "update_unit_fuel_cfg",y = "Array",r = "",q = "update_service_interval",t = "changeCalcFlags",s = "changeCommands",n = "create_sensor",m = "drv",p = "update_unit_hw_config",o = "delete_sensor",l = "/adfurl",k = "create_service_interval",L = "/wialon/ajax.html?sid=",M = "import_unit_cfg",N = "&unitIndex=",O = "delete_unit_msgs",H = "create_unit",I = "undefined",J = "set",K = "Object",P = "object",Q = "unit/update_hw_params",w = "Integer",v = "String",u = "qx.event.type.Data";
  qx.Class.define(h, {
    extend : wialon.item.Item,
    properties : {
      uniqueId : {
        init : null,
        check : v,
        event : bN
      },
      deviceTypeId : {
        init : null,
        check : w,
        event : bp
      },
      phoneNumber : {
        init : null,
        check : v,
        event : i
      },
      phoneNumber2 : {
        init : null,
        check : v,
        event : a
      },
      accessPassword : {
        init : null,
        check : v,
        event : bs
      },
      commands : {
        init : null,
        check : y,
        event : s
      },
      position : {
        init : null,
        check : K,
        event : E,
        nullable : true
      },
      lastMessage : {
        init : null,
        check : K,
        event : bA,
        nullable : true
      },
      driverCode : {
        init : null,
        check : v,
        event : bn
      },
      calcFlags : {
        init : null,
        check : w,
        event : t
      },
      mileageCounter : {
        init : null,
        check : w,
        event : b
      },
      engineHoursCounter : {
        init : null,
        check : w,
        event : z
      },
      trafficCounter : {
        init : null,
        check : w,
        event : g
      },
      messageParams : {
        init : null,
        check : K,
        event : bo,
        nullable : true
      }
    },
    members : {
      remoteCommand : function(bQ, bR, bS, bT, bU, bV){

        if(bU && typeof bU == e){

          bV = bU;
          bU = 0;
        };
        return wialon.core.Remote.getInstance().remoteCall(bl, {
          itemId : this.getId(),
          commandName : bQ,
          linkType : bR,
          param : bS,
          timeout : bT,
          flags : bU
        }, wialon.util.Helper.wrapCallback(bV));
      },
      updateDeviceSettings : function(bW, bX, bY){

        return wialon.core.Remote.getInstance().remoteCall(bK, {
          itemId : this.getId(),
          deviceTypeId : bW,
          uniqueId : bX
        }, qx.lang.Function.bind(this._onUpdateProperties, this, wialon.util.Helper.wrapCallback(bY)));
      },
      updatePhoneNumber : function(ca, cb){

        return wialon.core.Remote.getInstance().remoteCall(bP, {
          itemId : this.getId(),
          phoneNumber : ca
        }, qx.lang.Function.bind(this._onUpdateProperties, this, wialon.util.Helper.wrapCallback(cb)));
      },
      updatePhoneNumber2 : function(cc, cd){

        return wialon.core.Remote.getInstance().remoteCall(A, {
          itemId : this.getId(),
          phoneNumber : cc
        }, qx.lang.Function.bind(this._onUpdateProperties, this, wialon.util.Helper.wrapCallback(cd)));
      },
      updateAccessPassword : function(ce, cf){

        return wialon.core.Remote.getInstance().remoteCall(d, {
          itemId : this.getId(),
          accessPassword : ce
        }, qx.lang.Function.bind(this._onUpdateProperties, this, wialon.util.Helper.wrapCallback(cf)));
      },
      updateMileageCounter : function(cg, ch){

        return wialon.core.Remote.getInstance().remoteCall(X, {
          itemId : this.getId(),
          newValue : cg
        }, qx.lang.Function.bind(this._onUpdateProperties, this, wialon.util.Helper.wrapCallback(ch)));
      },
      updateEngineHoursCounter : function(ci, cj){

        return wialon.core.Remote.getInstance().remoteCall(bC, {
          itemId : this.getId(),
          newValue : ci
        }, qx.lang.Function.bind(this._onUpdateProperties, this, wialon.util.Helper.wrapCallback(cj)));
      },
      updateTrafficCounter : function(ck, cl, cm){

        return wialon.core.Remote.getInstance().remoteCall(bb, {
          itemId : this.getId(),
          newValue : ck,
          regReset : cl || 0
        }, qx.lang.Function.bind(this._onUpdateProperties, this, wialon.util.Helper.wrapCallback(cm)));
      },
      updateCalcFlags : function(cn, co){

        return wialon.core.Remote.getInstance().remoteCall(T, {
          itemId : this.getId(),
          newValue : cn
        }, qx.lang.Function.bind(this._onUpdateProperties, this, wialon.util.Helper.wrapCallback(co)));
      },
      handleMessage : function(cp){

        if(cp && cp.tp == bw){

          var cq = this.getLastMessage();
          if(!cq || cq.t < cp.t){

            if(!cq)this.setLastMessage(cp); else {

              var ct = qx.lang.Object.clone(cp);
              if(cp.p)ct.p = qx.lang.Object.clone(cp.p);
              qx.lang.Object.carefullyMergeWith(ct, cq);
              if(cq.p)qx.lang.Object.carefullyMergeWith(ct.p, cq.p);
              if(!ct.pos)ct.pos = cq.pos;
              this.setLastMessage(ct);
            };
          };
          if(cp.pos){

            var cs = this.getPosition();
            if(!cs || cs.t < cp.t){

              var cr = qx.lang.Object.clone(cp.pos);
              cr.t = cp.t;
              this.setPosition(cr);
            };
          };
        };
        wialon.item.Item.prototype.handleMessage.call(this, cp);
      },
      getMessageImageUrl : function(cu, cv, cw){

        if(!cw)cw = r;
        return wialon.core.Session.getInstance().getBaseUrl() + l + cw + bJ + wialon.core.Session.getInstance().getId() + bD + cu + N + this.getId() + bE + cv;
      },
      downloadHwParamFile : function(cx, cy, cz){

        return wialon.core.Session.getInstance().getBaseUrl() + L + wialon.core.Session.getInstance().getId() + c + qx.lang.Json.stringify({
          itemId : this.getId(),
          hwId : cx,
          fileId : cy,
          action : bv
        });
      },
      updateHwParams : function(cA, cB, cC, cD){

        if(cC && cC.length && (typeof cB.full_data != I && !cB.full_data))wialon.core.Uploader.getInstance().uploadFiles(cC, Q, {
          itemId : this.getId(),
          hwId : cA,
          params_data : cB,
          action : J
        }, wialon.util.Helper.wrapCallback(cD), true, 30000); else return wialon.core.Remote.getInstance().remoteCall(Q, {
          itemId : this.getId(),
          hwId : cA,
          params_data : cB,
          action : J
        }, wialon.util.Helper.wrapCallback(cD));
      }
    },
    statics : {
      dataFlag : {
        restricted : 0x00000100,
        commands : 0x00000200,
        lastMessage : 0x00000400,
        driverCode : 0x00000800,
        sensors : 0x00001000,
        counters : 0x00002000,
        routeControl : 0x00004000,
        maintenance : 0x00008000,
        log : 0x00010000,
        reportSettings : 0x00020000,
        other : 0x00040000,
        commandAliases : 0x00080000,
        messageParams : 0x00100000
      },
      accessFlag : {
        editDevice : 0x100000,
        editSensors : 0x200000,
        editCounters : 0x400000,
        deleteMessages : 0x800000,
        executeCommands : 0x1000000,
        registerEvents : 0x2000000,
        viewRoutes : 0x4000000,
        editRoutes : 0x8000000,
        viewServiceIntervals : 0x10000000,
        editServiceIntervals : 0x20000000,
        importMessages : 0x40000000,
        exportMessages : 0x80000000,
        viewCmdAliases : 0x400000000,
        editCmdAliases : 0x800000000,
        viewEvents : 0x1000000000,
        editEvents : 0x2000000000,
        editReportSettings : 0x4000000000,
        monitorState : 0x8000000000
      },
      calcFlag : {
        mileageMask : 0xF,
        mileageGps : 0x0,
        mileageAbsOdometer : 0x1,
        mileageRelOdometer : 0x2,
        mileageGpsIgn : 0x3,
        engineHoursMask : 0xF0,
        engineHoursIgn : 0x10,
        engineHoursAbs : 0x20,
        engineHoursRel : 0x40,
        mileageAuto : 0x100,
        engineHoursAuto : 0x200,
        trafficAuto : 0x400
      },
      dataMessageFlag : {
        position : 0x1,
        inputs : 0x2,
        outputs : 0x4,
        alarm : 0x10,
        driverCode : 0x20
      },
      eventMessageFlag : {
        typeMask : 0x0F,
        typeSimple : 0x0,
        typeViolation : 0x1,
        typeMaintenance : 0x2,
        typeRouteControl : 0x4,
        typeDrivingInfo : 0x8,
        maintenanceMask : 0x0,
        maintenanceService : 0x10,
        maintenanceFilling : 0x20
      },
      execCmdFlag : {
        primaryPhone : 0x01,
        secondaryPhone : 0x02
      },
      logMessageAction : {
        unitCreated : H,
        unitUpdatedPassword : bI,
        unitUpdatedPhone : bt,
        unitUpdatedPhone2 : bf,
        unitUpdatedCalcFlags : bz,
        unitChangeMilageCounter : V,
        unitChangeByteCounter : bk,
        unitChangeEngineHoursCounter : G,
        unitUpdatedUniqueId : br,
        unitUpdatedHwType : B,
        unitUpdatedHwConfig : p,
        unitUpdatedFuelConsumptionSettings : x,
        unitUpdatedTripDetectorSettings : ba,
        unitCreatedSensor : n,
        unitUpdatedSensor : D,
        unitDeletedSensor : o,
        unitCreatedCommandAlias : bd,
        unitUpdatedCommandAlias : Y,
        unitDeletedCommandAlias : R,
        unitCreatedServiceInterval : k,
        unitUpdatedServiceInterval : q,
        unitDeletedServiceInterval : f,
        unitSettingsImported : M,
        unitMessagesImported : bj,
        unitMessageDeleted : U,
        unitMessagesDeleted : O,
        unitDriverBinded : bO,
        unitDriverUnbinded : bB,
        unitTrailerBinded : S,
        unitTrailerUnbinded : bL,
        unitReportSettingsUpdated : j,
        unitMessagesFilterSettingsUpdated : W
      },
      registerProperties : function(){

        var cE = wialon.core.Session.getInstance();
        cE.registerConstructor(bh, wialon.item.Unit);
        cE.registerProperty(bi, this.remoteUpdateUniqueId);
        cE.registerProperty(by, this.remoteUpdateDeviceTypeId);
        cE.registerProperty(bg, this.remoteUpdatePhoneNumber);
        cE.registerProperty(bG, this.remoteUpdatePhoneNumber2);
        cE.registerProperty(bF, this.remoteUpdateAccessPassword);
        cE.registerProperty(bH, this.remoteUpdateCommands);
        cE.registerProperty(bm, this.remoteUpdatePosition);
        cE.registerProperty(bc, this.remoteUpdateLastMessage);
        cE.registerProperty(m, this.remoteUpdateDriverCode);
        cE.registerProperty(be, this.remoteUpdateCalcFlags);
        cE.registerProperty(bM, this.remoteUpdateMileageCounter);
        cE.registerProperty(bu, this.remoteUpdateEngineHoursCounter);
        cE.registerProperty(F, this.remoteUpdateTrafficCounter);
        cE.registerProperty(C, this.remoteUpdateMessageParams);
        wialon.item.MIcon.registerIconProperties();
      },
      remoteUpdateUniqueId : function(cF, cG){

        cF.setUniqueId(cG);
      },
      remoteUpdateDeviceTypeId : function(cH, cI){

        cH.setDeviceTypeId(cI);
      },
      remoteUpdatePhoneNumber : function(cJ, cK){

        cJ.setPhoneNumber(cK);
      },
      remoteUpdatePhoneNumber2 : function(cL, cM){

        cL.setPhoneNumber2(cM);
      },
      remoteUpdateAccessPassword : function(cN, cO){

        cN.setAccessPassword(cO);
      },
      remoteUpdateCommands : function(cP, cQ){

        cP.setCommands(cQ);
      },
      remoteUpdatePosition : function(cR, cS){

        cR.setPosition(cS);
      },
      remoteUpdateLastMessage : function(cT, cU){

        cT.setLastMessage(cU);
      },
      remoteUpdateDriverCode : function(cV, cW){

        cV.setDriverCode(cW);
      },
      remoteUpdateCalcFlags : function(cX, cY){

        cX.setCalcFlags(cY);
      },
      remoteUpdateMileageCounter : function(da, db){

        da.setMileageCounter(db);
      },
      remoteUpdateEngineHoursCounter : function(dc, dd){

        dc.setEngineHoursCounter(dd);
      },
      remoteUpdateTrafficCounter : function(de, df){

        de.setTrafficCounter(df);
      },
      remoteUpdateMessageParams : function(dg, dh){

        if(typeof dh != P)return;
        var di = dg.getMessageParams();
        if(!di)di = {
        }; else di = qx.lang.Object.clone(di);
        for(var dj in dh){

          if(typeof dh[dj] == P)di[dj] = dh[dj]; else if(typeof di[dj] == P)di[dj].at = dh[dj];;
        };
        dg.setMessageParams(di);
      },
      checkHwConfig : function(dk, dl){

        return wialon.core.Remote.getInstance().remoteCall(Q, {
          hwId : dk,
          action : bq
        }, wialon.util.Helper.wrapCallback(dl));
      },
      getHwParams : function(dm, dn, dp, dq){

        return wialon.core.Remote.getInstance().remoteCall(Q, {
          itemId : dm,
          hwId : dn,
          fullData : dp ? 1 : 0,
          action : bx
        }, wialon.util.Helper.wrapCallback(dq));
      }
    },
    events : {
      "changeUniqueId" : u,
      "changeDeviceTypeId" : u,
      "changePhoneNumber" : u,
      "changePhoneNumber2" : u,
      "changeAccessPassword" : u,
      "changeCommands" : u,
      "changePosition" : u,
      "changeLastMessage" : u,
      "changeDriverCode" : u,
      "changeCalcFlags" : u,
      "changeMileageCounter" : u,
      "changeEngineHoursCounter" : u,
      "changeTrafficCounter" : u,
      "changeMessageParams" : u
    }
  });
})();
(function(){

  var l = "function",k = "wialon.core.Uploader",j = "<",h = "singleton",g = "action",e = ">",d = "fileUploaded",c = "onload",b = "multipart/form-data",a = "load",G = "enctype",F = "target",E = "",D = "&sid=",C = "method",B = "form",A = "POST",z = "params",y = "jUploadFrame",x = "iframe",s = "/wialon/ajax.html?svc=",t = "jUploadForm",q = "object",r = "eventHash",o = "hidden",p = "name",m = "input",n = "none",u = "undefined",v = "id",w = "hash";
  qx.Class.define(k, {
    extend : qx.core.Object,
    type : h,
    members : {
      __V : null,
      __W : {
      },
      __X : 1024 * 1024 * 16,
      uploadFiles : function(H, I, J, K, L, M){

        if(!(H instanceof Array))return false;
        K = wialon.util.Helper.wrapCallback(K);
        var X = (new Date()).getTime();
        var W = t + X;
        var S = y + X;
        var Q = wialon.core.Session.getInstance().getBaseUrl() + s + I + D + wialon.core.Session.getInstance().getId();
        var P = document.createElement(B);
        if(!J)J = {
        };
        J[r] = W;
        var U = document.createElement(m);
        U.name = z;
        U.type = o;
        U.value = (wialon.util.Json.stringify(J).replace(/&lt;/g, j).replace(/&gt;/g, e));
        P.appendChild(U);
        var U = document.createElement(m);
        U.name = r;
        U.type = o;
        U.value = W;
        P.appendChild(U);
        var T = document.createElement(x);
        P.setAttribute(g, Q);
        P.setAttribute(C, A);
        P.setAttribute(p, W);
        P.setAttribute(v, W);
        P.setAttribute(G, b);
        P.style.display = n;
        var V = 0;
        for(var i = 0;i < H.length;i++){

          var O = H[i];
          var N = document.getElementById(O.id);
          var ba = 0;
          if(N && typeof N.files == q && N.files.length){

            var f = N.files[0];
            ba = typeof f.fileSize != u ? f.fileSize : (typeof f.size != u ? f.size : 0);
          };
          O.parentNode.insertBefore(O.cloneNode(true), O);
          O.setAttribute(v, E);
          P.appendChild(O);
          V += ba;
        };
        document.body.appendChild(P);
        T.setAttribute(v, S);
        T.setAttribute(p, S);
        T.style.display = n;
        document.body.appendChild(T);
        var R = qx.lang.Function.bind(this.__Y, this, {
          callback : K,
          io : T,
          form : P,
          phase : 0
        });
        if(V > this.__X){

          R();
          return;
        };
        if(!L){

          if(window.attachEvent)T.attachEvent(c, R); else T.addEventListener(a, R, false);
        } else {

          if(!this.__V)this.__V = wialon.core.Session.getInstance().addListener(d, this.__ba, this);
          this.__W[W] = R;
        };
        P.setAttribute(F, S);
        P.submit();
        if(M && L){

          var Y = qx.lang.Function.bind(function(){

            if(typeof this.__W[W] == l)this.__W[W]();
          }, this);
          setTimeout(Y, M * 1000);
        };
        return true;
      },
      __Y : function(bb, event){

        bb.io.parentNode.removeChild(bb.io);
        bb.form.parentNode.removeChild(bb.form);
        bb.io = null;
        bb.form = null;
        bb.callback(event ? 0 : 6, (event && typeof event.preventDefault == "function") ? null : event);
      },
      __ba : function(event){

        var bd = event.getData();
        if(!bd || typeof bd[w] == u)return;
        var bc = this.__W[bd[w]];
        if(!bc)return;
        bc(bd);
        delete this.__W[bd[w]];
      }
    }
  });
})();
(function(){

  var m = "undefined",l = "wialon.item.MIcon",k = "number",j = ".png",i = "unit/update_image",h = "changeIcon",g = "/avl_item_image/",f = "Integer",e = "string",d = "ugi",a = "qx.event.type.Data",c = "unit/upload_image",b = "/";
  qx.Mixin.define(l, {
    properties : {
      iconCookie : {
        init : null,
        check : f,
        event : h
      }
    },
    members : {
      getIconUrl : function(n){

        if(typeof n == m || !n)n = 32;
        return wialon.core.Session.getInstance().getBaseUrl() + g + this.getId() + b + n + b + this.getIconCookie() + j;
      },
      updateIcon : function(o, p){

        if(typeof o == e)return wialon.core.Uploader.getInstance().uploadFiles([], c, {
          fileUrl : o,
          itemId : this.getId()
        }, p, true); else if(typeof o == k)return wialon.core.Remote.getInstance().remoteCall(i, {
          itemId : this.getId(),
          oldItemId : o
        }, p);;
        return wialon.core.Uploader.getInstance().uploadFiles([o], c, {
          itemId : this.getId()
        }, p, true);
      }
    },
    statics : {
      registerIconProperties : function(){

        var q = wialon.core.Session.getInstance();
        q.registerProperty(d, this.remoteUpdateIconCookie);
      },
      remoteUpdateIconCookie : function(r, s){

        r.setIconCookie(s);
      }
    },
    events : {
      "changeIcon" : a
    }
  });
})();
(function(){

  var j = "create_resource",i = "import_zones",h = "delete_notify",g = "create_driver",f = "update_driver",e = "switch_job",d = "update_driver_units",c = "avl_resource",b = "update_zone",a = "create_drivers_group",C = "delete_drivers_group",B = "update_report",A = "delete_driver",z = "create_zone",y = "delete_zone",x = "update_poi",w = "delete_job",v = "update_notify",u = "wialon.item.Resource",t = "create_notify",q = "update_drivers_group",r = "delete_report",o = "delete_poi",p = "switch_notify",m = "create_report",n = "update_job",k = "import_pois",l = "create_job",s = "create_poi";
  qx.Class.define(u, {
    extend : wialon.item.Item,
    statics : {
      dataFlag : {
        drivers : 0x00000100,
        jobs : 0x00000200,
        notifications : 0x00000400,
        poi : 0x00000800,
        zones : 0x00001000,
        reports : 0x00002000,
        agro : 0x01000000,
        driverUnits : 0x00004000,
        driverGroups : 0x00008000,
        trailers : 0x00010000,
        trailerGroups : 0x00020000,
        trailerUnits : 0x00040000
      },
      accessFlag : {
        viewNotifications : 0x100000,
        editNotifications : 0x200000,
        viewPoi : 0x400000,
        editPoi : 0x800000,
        viewZones : 0x1000000,
        editZones : 0x2000000,
        viewJobs : 0x4000000,
        editJobs : 0x8000000,
        viewReports : 0x10000000,
        editReports : 0x20000000,
        viewDrivers : 0x40000000,
        editDrivers : 0x80000000,
        manageAccount : 0x100000000,
        agroEditCultivations : 0x10000000000,
        agroView : 0x20000000000,
        agroEdit : 0x40000000000,
        viewDriverGroups : 0x200000000,
        editDriverGroups : 0x400000000,
        viewDriverUnits : 0x800000000,
        editDriverUnits : 0x1000000000,
        viewTrailers : 0x100000000000,
        editTrailers : 0x200000000000,
        viewTrailerGroups : 0x400000000000,
        editTrailerGroups : 0x800000000000,
        viewTrailerUnits : 0x1000000000000,
        editTrailerUnits : 0x2000000000000
      },
      logMessageAction : {
        resourceCreated : j,
        resourceCreatedZone : z,
        resourceUpdatedZone : b,
        resourceDeletedZone : y,
        resourceCreatedPoi : s,
        resourceUpdatedPoi : x,
        resourceDeletedPoi : o,
        resourceCreatedJob : l,
        resourceSwitchedJob : e,
        resourceUpdatedJob : n,
        resourceDeletedJob : w,
        resourceCreatedNotification : t,
        resourceSwitchedNotification : p,
        resourceUpdatedNotification : v,
        resourceDeletedNotification : h,
        resourceCreatedDriver : g,
        resourceUpdatedDriver : f,
        resourceDeletedDriver : A,
        resourceCreatedDriversGroup : a,
        resourceUpdatedDriversGroup : q,
        resourceDeletedDriversGroup : C,
        resourceUpdatedDriverUnits : d,
        resourceCreatedReport : m,
        resourceUpdatedReport : B,
        resourceDeletedReport : r,
        resourceImportedPois : k,
        resourceImportedZones : i
      },
      registerProperties : function(){

        var D = wialon.core.Session.getInstance();
        D.registerConstructor(c, wialon.item.Resource);
      }
    }
  });
})();
(function(){

  var j = "create_group",i = "Array",h = "u",g = "wialon.item.UnitGroup",f = "avl_unit",e = "units_group",d = "qx.event.type.Data",c = "changeUnits",b = "unit_group/update_units",a = "avl_unit_group";
  qx.Class.define(g, {
    extend : wialon.item.Item,
    properties : {
      units : {
        init : null,
        check : i,
        event : c
      }
    },
    members : {
      updateUnits : function(k, l){

        return wialon.core.Remote.getInstance().remoteCall(b, {
          itemId : this.getId(),
          units : k
        }, qx.lang.Function.bind(this._onUpdateProperties, this, wialon.util.Helper.wrapCallback(l)));
      }
    },
    statics : {
      registerProperties : function(){

        var m = wialon.core.Session.getInstance();
        m.registerConstructor(a, wialon.item.UnitGroup);
        m.registerProperty(h, this.remoteUpdateUnits);
        wialon.item.MIcon.registerIconProperties();
      },
      logMessageAction : {
        unitGroupCreated : j,
        unitGroupUnitsUpdated : e
      },
      remoteUpdateUnits : function(n, o){

        var p = n.getUnits();
        if(p && wialon.util.Json.compareObjects(o, p))return;
        n.setUnits(o);
      },
      checkUnit : function(q, r){

        if(!q || q.getType() != a || !r || r.getType() != f)return false;
        var s = q.getUnits();
        var t = r.getId();
        return (s.indexOf(t) != -1 ? true : false);
      }
    },
    events : {
      "changeUnits" : d
    }
  });
})();
(function(){

  var u = "changeConfig",t = "update_retranslator",s = "retranslator/update_units",r = "units_retranslator",q = "Boolean",p = "changeOperating",o = "create_retranslator",n = "changeStopTime",m = "changeUnits",l = "avl_retranslator",e = "retranslator/update_config",k = "rtru",h = "switch_retranslator",c = "rtro",b = "rtrst",g = "rtrc",f = "Integer",i = "wialon.item.Retranslator",a = "retranslator/update_operating",j = "Object",d = "qx.event.type.Data";
  qx.Class.define(i, {
    extend : wialon.item.Item,
    properties : {
      operating : {
        init : null,
        check : q,
        event : p
      },
      stopTime : {
        init : null,
        check : f,
        event : n
      },
      config : {
        init : null,
        check : j,
        event : u
      },
      units : {
        init : null,
        check : j,
        event : m
      }
    },
    members : {
      updateOperating : function(v, w){

        return wialon.core.Remote.getInstance().remoteCall(a, {
          itemId : this.getId(),
          operate : v
        }, qx.lang.Function.bind(this._onUpdateProperties, this, wialon.util.Helper.wrapCallback(w)));
      },
      updateOperatingWithTimeout : function(x, y, z, A){

        var B;
        if(z)B = y; else B = wialon.core.Session.getInstance().getServerTime() + y;
        return wialon.core.Remote.getInstance().remoteCall(a, {
          itemId : this.getId(),
          operate : x,
          stopTime : B
        }, qx.lang.Function.bind(this._onUpdateProperties, this, wialon.util.Helper.wrapCallback(A)));
      },
      updateConfig : function(C, D){

        return wialon.core.Remote.getInstance().remoteCall(e, {
          itemId : this.getId(),
          config : C
        }, qx.lang.Function.bind(this._onUpdateProperties, this, wialon.util.Helper.wrapCallback(D)));
      },
      updateUnits : function(E, F){

        return wialon.core.Remote.getInstance().remoteCall(s, {
          itemId : this.getId(),
          units : E
        }, qx.lang.Function.bind(this._onUpdateProperties, this, wialon.util.Helper.wrapCallback(F)));
      }
    },
    statics : {
      dataFlag : {
        state : 0x00000100,
        units : 0x00000200
      },
      accessFlag : {
        editSettings : 0x100000,
        editUnits : 0x200000
      },
      logMessageAction : {
        retranslatorCreated : o,
        retranslatorUpdated : t,
        retranslatorUnitsUpdated : r,
        retranslatorSwitched : h
      },
      registerProperties : function(){

        var G = wialon.core.Session.getInstance();
        G.registerConstructor(l, wialon.item.Retranslator);
        G.registerProperty(c, this.remoteUpdateOperating);
        G.registerProperty(b, this.remoteUpdateStopTime);
        G.registerProperty(g, this.remoteUpdateConfig);
        G.registerProperty(k, this.remoteUpdateUnits);
      },
      remoteUpdateOperating : function(H, I){

        H.setOperating(I ? true : false);
      },
      remoteUpdateStopTime : function(J, K){

        J.setStopTime(K);
      },
      remoteUpdateConfig : function(L, M){

        L.setConfig(M ? M : {
        });
      },
      remoteUpdateUnits : function(N, O){

        var P = N.getUnits();
        if(P && wialon.util.Json.compareObjects(O, P))return;
        N.setUnits(O);
      }
    },
    events : {
      "changeOperating" : d,
      "changeStopTime" : d,
      "changeConfig" : d,
      "changeUnits" : d
    }
  });
})();
(function(){

  var j = "create_schedule",i = "update_route_points",h = "rpts",g = "route/get_schedule_time",f = "update_round",e = "Object",d = "update_route_cfg",c = "delete_round",b = "Array",a = "route/load_rounds",w = "update_schedule",v = "wialon.item.Route",u = "delete_schedule",t = "create_route",s = "route/get_all_rounds",r = "changeConfig",q = "changeCheckPoints",p = "route/update_checkpoints",o = "rcfg",n = "create_round",l = "route/update_config",m = "avl_route",k = "qx.event.type.Data";
  qx.Class.define(v, {
    extend : wialon.item.Item,
    properties : {
      config : {
        init : null,
        check : e,
        nullable : true,
        event : r
      },
      checkPoints : {
        init : null,
        check : b,
        event : q
      }
    },
    members : {
      updateConfig : function(x, y){

        return wialon.core.Remote.getInstance().remoteCall(l, {
          itemId : this.getId(),
          config : x
        }, qx.lang.Function.bind(this._onUpdateProperties, this, wialon.util.Helper.wrapCallback(y)));
      },
      getNextRoundTime : function(z, A, B, C){

        return wialon.core.Remote.getInstance().remoteCall(g, {
          itemId : this.getId(),
          scheduleId : z,
          timeFrom : A,
          timeTo : B
        }, wialon.util.Helper.wrapCallback(C));
      },
      loadRoundsHistory : function(D, E, F, G){

        return wialon.core.Remote.getInstance().remoteCall(a, {
          itemId : this.getId(),
          timeFrom : D,
          timeTo : E,
          fullJson : F
        }, wialon.util.Helper.wrapCallback(G));
      },
      updateCheckPoints : function(H, I){

        return wialon.core.Remote.getInstance().remoteCall(p, {
          itemId : this.getId(),
          checkPoints : H
        }, qx.lang.Function.bind(this._onUpdateProperties, this, wialon.util.Helper.wrapCallback(I)));
      },
      getRouteRounds : function(J, K, L, M){

        return wialon.core.Remote.getInstance().remoteCall(s, {
          itemId : this.getId(),
          timeFrom : J,
          timeTo : K,
          fullJson : L
        }, wialon.util.Helper.wrapCallback(M));
      }
    },
    statics : {
      dataFlag : {
        config : 0x00000100,
        checkPoints : 0x00000200,
        schedules : 0x00000400,
        rounds : 0x00000800
      },
      accessFlag : {
        editSettings : 0x100000
      },
      states : {
        stateInactive : 0x010000,
        stateFinshed : 0x020000,
        stateCheckingArrive : 0x040000,
        stateCheckingDeparture : 0x080000,
        stateTimeLate : 0x200000,
        stateTimeEarly : 0x400000,
        stateDisabled : 0x800000,
        stateAborted : 0x0100000,
        eventControlStarted : 0x1,
        eventControlFinished : 0x2,
        eventControlAborted : 0x4,
        eventPointArrived : 0x8,
        eventPointSkipped : 0x10,
        eventPointDepartured : 0x20,
        eventControlLate : 0x40,
        eventControlEarly : 0x80,
        eventControlInTime : 0x100
      },
      routePointFlag : {
        simple : 0x1,
        geozone : 0x2,
        unit : 0x4
      },
      scheduleFlag : {
        relative : 0x1,
        relativeDaily : 0x2,
        absolute : 0x4
      },
      roundFlag : {
        autoDelete : 0x2,
        allowSkipPoints : 0x10,
        generateEvents : 0x20,
        arbituaryPoints : 0x40
      },
      logMessageAction : {
        routeCreated : t,
        routeUpdatedPoints : i,
        routeUpdatedConfiguration : d,
        routeCreatedRound : n,
        routeUpdatedRound : f,
        routeDeletedRound : c,
        routeCreatedSchedule : j,
        routeUpdatedSchedule : w,
        routeDeletedSchedule : u
      },
      registerProperties : function(){

        var N = wialon.core.Session.getInstance();
        N.registerConstructor(m, wialon.item.Route);
        N.registerProperty(h, this.remoteUpdateCheckPoints);
        N.registerProperty(o, this.remoteUpdateConfig);
      },
      remoteUpdateCheckPoints : function(O, P){

        O.setCheckPoints(P);
      },
      remoteUpdateConfig : function(Q, R){

        Q.setConfig(R);
      }
    },
    events : {
      "changeCheckPoints" : k,
      "changeConfig" : k
    }
  });
})();
(function(){

  var k = "render/create_poi_layer",j = "function",h = ".png",g = "__bh",f = "wialon.render.Renderer",e = "render/remove_all_layers",d = "Integer",c = "Object",b = "qx.event.type.Event",a = "render/create_messages_layer",B = "/",A = "render/remove_layer",w = "",v = "/avl_hittest_pos",u = "render/set_locale",t = "/adfurl",s = "__bb",r = "render/enable_layer",q = "changeVersion",p = "render/create_zones_layer",n = "/avl_render/",o = "report",l = "_",m = "undefined";
  qx.Class.define(f, {
    extend : qx.core.Object,
    construct : function(){

      qx.core.Object.call(this);
      this.__bb = new Array;
    },
    properties : {
      version : {
        init : 0,
        check : d,
        event : q
      },
      reportResult : {
        init : null,
        check : c,
        nullable : true,
        apply : g
      }
    },
    members : {
      __bb : null,
      getLayers : function(){

        return this.__bb;
      },
      getReportLayer : function(){

        for(var i = 0;i < this.__bb.length;i++)if(this.__bb[i].getName().substr(0, 6) == o)return this.__bb[i];;
        return null;
      },
      getTileUrl : function(x, y, z){

        return wialon.core.Session.getInstance().getBaseUrl() + t + this.getVersion() + n + x + l + y + l + (17 - z) + B + wialon.core.Session.getInstance().getId() + h;
      },
      setLocale : function(C, D, E, F){

        if(E && typeof E == j){

          F = E;
          E = 0;
        };
        return wialon.core.Remote.getInstance().remoteCall(u, {
          tzOffset : C,
          language : D,
          flags : E
        }, wialon.util.Helper.wrapCallback(F));
      },
      createMessagesLayer : function(G, H){

        return wialon.core.Remote.getInstance().remoteCall(a, G, qx.lang.Function.bind(this.__bc, this, wialon.util.Helper.wrapCallback(H)));
      },
      createPoiLayer : function(I, J, K, L){

        for(var i = this.__bb.length - 1;i >= 0;i--){

          if(this.__bb[i].getName() == I){

            this.__bb[i].dispose();
            qx.lang.Array.remove(this.__bb, this.__bb[i]);
          };
        };
        return wialon.core.Remote.getInstance().remoteCall(k, {
          layerName : I,
          pois : J,
          flags : K
        }, qx.lang.Function.bind(this.__bd, this, wialon.util.Helper.wrapCallback(L)));
      },
      createZonesLayer : function(M, N, O, P){

        for(var i = this.__bb.length - 1;i >= 0;i--){

          if(this.__bb[i].getName() == M){

            this.__bb[i].dispose();
            qx.lang.Array.remove(this.__bb, this.__bb[i]);
          };
        };
        return wialon.core.Remote.getInstance().remoteCall(p, {
          layerName : M,
          zones : N,
          flags : O
        }, qx.lang.Function.bind(this.__bd, this, wialon.util.Helper.wrapCallback(P)));
      },
      removeLayer : function(Q, R){

        return wialon.core.Remote.getInstance().remoteCall(A, {
          layerName : Q.getName()
        }, qx.lang.Function.bind(this.__be, this, wialon.util.Helper.wrapCallback(R), Q));
      },
      enableLayer : function(S, T, U){

        return wialon.core.Remote.getInstance().remoteCall(r, {
          layerName : S.getName(),
          enable : T ? 1 : 0
        }, qx.lang.Function.bind(this.__bg, this, wialon.util.Helper.wrapCallback(U), S));
      },
      removeAllLayers : function(V){

        return wialon.core.Remote.getInstance().remoteCall(e, {
        }, qx.lang.Function.bind(this.__bf, this, wialon.util.Helper.wrapCallback(V)));
      },
      hitTest : function(W, X, Y, ba, bb, bc){

        wialon.core.Remote.getInstance().ajaxRequest(wialon.core.Session.getInstance().getBaseUrl() + v, {
          sid : wialon.core.Session.getInstance().getId(),
          lat : W,
          lon : X,
          scale : Y,
          radius : ba,
          layerName : w + bb
        }, wialon.util.Helper.wrapCallback(bc), 60);
      },
      __bc : function(bd, be, bf){

        var bg = null;
        if(be == 0 && bf){

          if(typeof bf.name != m){

            bg = new wialon.render.MessagesLayer(bf);
            this.__bb.push(bg);
          };
          this.setVersion(this.getVersion() + 1);
        };
        bd(be, bg);
      },
      __bd : function(bh, bi, bj){

        var bk = null;
        if(bi == 0 && bj){

          if(typeof bj.name != m){

            bk = new wialon.render.Layer(bj);
            this.__bb.push(bk);
          };
          this.setVersion(this.getVersion() + 1);
        };
        bh(bi, bk);
      },
      __be : function(bl, bm, bn, bo){

        if(bn){

          bl(bn);
          return;
        };
        qx.lang.Array.remove(this.__bb, bm);
        bm.dispose();
        this.setVersion(this.getVersion() + 1);
        bl(bn);
      },
      __bf : function(bp, bq, br){

        if(bq){

          bp(bq);
          return;
        };
        if(this.__bb.length){

          for(var i = 0;i < this.__bb.length;i++)this.__bb[i].dispose();
          qx.lang.Array.removeAll(this.__bb);
          this.setVersion(this.getVersion() + 1);
        };
        bp(bq);
      },
      __bg : function(bs, bt, bu, bv){

        if(bu){

          bs(bu);
          return;
        };
        var bw = bv.enabled ? true : false;
        if(bw != bt.getEnabled()){

          bt.setEnabled(bw);
          this.setVersion(this.getVersion() + 1);
        };
        bs(bu);
      },
      __bh : function(bx){

        var by = false;
        for(var i = 0;i < this.__bb.length;i++)if(this.__bb[i].getName().substr(0, 6) == o){

          this.__bb.splice(i, 1);
          by = true;
          break;
        };
        if(bx){

          var bA = bx.getLayerData();
          if(bA){

            var bz = bA.units ? new wialon.render.MessagesLayer(bA) : new wialon.render.Layer(bA);
            this.__bb.push(bz);
            bx.setLayer(bz);
            by = true;
          };
        };
        if(by)this.setVersion(this.getVersion() + 1);
      }
    },
    statics : {
      PoiFlag : {
        renderLabels : 0x01,
        enableGroups : 0x02
      },
      ZonesFlag : {
        renderLabels : 0x01
      },
      MarkerFlag : {
        grouping : 0x0001,
        numbering : 0x0002,
        events : 0x0004,
        fillings : 0x0008,
        images : 0x0010,
        parkings : 0x0020,
        speedings : 0x0040,
        stops : 0x0080,
        thefts : 0x0100
      },
      OptionalFlag : {
        usMetrics : 0x01
      }
    },
    destruct : function(){

      this._disposeArray(s);
    },
    events : {
      "changeVersion" : b
    }
  });
})();
(function(){

  var b = "wialon.render.Layer",a = "Boolean";
  qx.Class.define(b, {
    extend : qx.core.Object,
    construct : function(c){

      qx.core.Object.call(this, c);
      this._data = c;
    },
    properties : {
      enabled : {
        init : true,
        check : a
      }
    },
    members : {
      _data : null,
      getName : function(){

        return this._data.name;
      },
      getBounds : function(){

        return this._data.bounds;
      }
    }
  });
})();
(function(){

  var k = "&msgIndex=",j = "/adfurl",i = "/avl_hittest_time",h = "",g = "&layerName=",f = "&unitIndex=",e = "/avl_msg_photo.jpeg?sid=",d = "wialon.render.MessagesLayer",c = "render/delete_message",b = "render/get_messages",a = "number";
  qx.Class.define(d, {
    extend : wialon.render.Layer,
    members : {
      getUnitsCount : function(){

        return this._data.units ? this._data.units.length : 0;
      },
      getUnitId : function(l){

        if(typeof l != a)return this._data.units[0].id;
        return this._data.units[l >= 0 ? l : 0].id;
      },
      getMaxSpeed : function(m){

        if(typeof m != a)return this._data.units[0].max_speed;
        return this._data.units[m >= 0 ? m : 0].max_speed;
      },
      getMileage : function(n){

        if(typeof n != a)return this._data.units[0].mileage;
        return this._data.units[n >= 0 ? n : 0].mileage;
      },
      getMessagesCount : function(o){

        if(typeof o != a)return this._data.units[0].msgs.count;
        return this._data.units[o >= 0 ? o : 0].msgs.count;
      },
      getFirstPoint : function(p){

        if(typeof p != a)return this._data.units[0].msgs.first;
        return this._data.units[p >= 0 ? p : 0].msgs.first;
      },
      getLastPoint : function(q){

        if(typeof q != a)return this._data.units[0].msgs.last;
        return this._data.units[q >= 0 ? q : 0].msgs.last;
      },
      getMessageImageUrl : function(r, s, t){

        if(!t)t = h;
        return wialon.core.Session.getInstance().getBaseUrl() + j + t + e + wialon.core.Session.getInstance().getId() + g + this.getName() + f + r + k + s;
      },
      getMessages : function(u, v, w, x){

        return wialon.core.Remote.getInstance().remoteCall(b, {
          layerName : this.getName(),
          indexFrom : v,
          indexTo : w,
          unitId : this.getUnitId(u)
        }, wialon.util.Helper.wrapCallback(x));
      },
      deleteMessage : function(y, z, A){

        return wialon.core.Remote.getInstance().remoteCall(c, {
          layerName : this.getName(),
          msgIndex : z,
          unitId : this.getUnitId(y)
        }, wialon.util.Helper.wrapCallback(A));
      },
      hitTest : function(B, C, D, E){

        wialon.core.Remote.getInstance().ajaxRequest(wialon.core.Session.getInstance().getBaseUrl() + i, {
          sid : wialon.core.Session.getInstance().getId(),
          unitId : this.getUnitId(B),
          layerName : this.getName(),
          time : C,
          revert : D ? true : false
        }, wialon.util.Helper.wrapCallback(E), 60);
      }
    },
    statics : {
    }
  });
})();
(function(){

  var g = "messages/delete_message",f = "wialon.core.MessagesLoader",e = "messages/load_last",d = "messages/unload",c = "messages/get_messages",b = "messages/get_messages_bin",a = "messages/load_interval";
  qx.Class.define(f, {
    extend : qx.core.Object,
    members : {
      loadInterval : function(h, i, j, k, l, m, n){

        return wialon.core.Remote.getInstance().remoteCall(a, {
          itemId : h,
          timeFrom : i,
          timeTo : j,
          flags : k,
          flagsMask : l,
          loadCount : m
        }, wialon.util.Helper.wrapCallback(n));
      },
      loadLast : function(o, p, q, r, s, t, u){

        return wialon.core.Remote.getInstance().remoteCall(e, {
          itemId : o,
          lastTime : p,
          lastCount : q,
          flags : r,
          flagsMask : s,
          loadCount : t
        }, wialon.util.Helper.wrapCallback(u));
      },
      unload : function(v){

        return wialon.core.Remote.getInstance().remoteCall(d, {
        }, wialon.util.Helper.wrapCallback(v));
      },
      getMessages : function(w, x, y){

        return wialon.core.Remote.getInstance().remoteCall(c, {
          indexFrom : w,
          indexTo : x
        }, wialon.util.Helper.wrapCallback(y));
      },
      deleteMessage : function(z, A){

        return wialon.core.Remote.getInstance().remoteCall(g, {
          msgIndex : z
        }, wialon.util.Helper.wrapCallback(A));
      },
      getMessagesBin : function(B, C, D, E, F, G, H){

        return wialon.core.Remote.getInstance().remoteCall(b, {
          itemId : B,
          timeFrom : C,
          timeTo : D,
          flags : E,
          flagsMask : F,
          loadCount : G
        }, wialon.util.Helper.wrapCallback(H));
      }
    }
  });
})();
(function(){

  var v = "Data",u = "wialon.item.PluginsManager",t = "wialon.item.M",s = "mixinDef = wialon.item.M",r = "function",q = "static",p = "set",o = "u",n = "object",m = "Object",e = "string",l = "qx.event.type.Data",h = "create",c = "delete",b = "remoteUpdate",g = "remoteCreate",f = "s",j = "get",a = "undefined",k = "update",d = "modify";
  qx.Class.define(u, {
    type : q,
    statics : {
      bindPropItem : function(w, x, y, z, A){

        var D = y.substr(0, 1).toUpperCase() + y.substr(1);
        var B = D + f;
        var F = null;
        eval(s + B);
        if(qx.Class.hasMixin(w, F))return;
        var C = {
          members : {
          },
          properties : {
          },
          statics : {
          },
          events : {
          }
        };
        C.events[k + D] = l;
        C.properties[y + f] = {
          init : null,
          check : m
        };
        C.members[j + D] = function(H){

          var J = this[j + B]();
          if(!J)return null;
          var I = J[H];
          if(typeof I == a)return null;
          return I;
        };
        C.members[d + B] = function(K, L, M){

          var N = this[j + B]();
          var O = false;
          if(K && typeof K == n){

            O = K.skipFlag;
            K = wialon.util.Helper.wrapCallback(K.callback);
          } else {

            K = wialon.util.Helper.wrapCallback(K);
          };
          var P = null;
          if(L == 0 && N && M instanceof Array && M.length == 2){

            var Q = M[0];
            P = M[1];
            var R = N[Q];
            if(typeof R == a)R = null;
            if(P != null)N[Q] = P; else if(R && !O)delete N[Q];;
            if(!O && wialon.util.Json.stringify(P) != wialon.util.Json.stringify(R))this.fireDataEvent(k + D, P, R);
          };
          K(L, P);
        };
        if(z && z.length){

          C.members[h + D] = function(S, T){

            T = wialon.util.Helper.wrapCallback(T);
            if(S){

              S = qx.lang.Object.clone(S);
              S.itemId = this.getId();
              S.id = 0;
              S.callMode = h;
            };
            return wialon.core.Remote.getInstance().remoteCall(z, S, qx.lang.Function.bind(this[d + B], this, T));
          };
          C.members[k + D] = function(U, V, W){

            V = wialon.util.Helper.wrapCallback(V);
            if(U){

              U = qx.lang.Object.clone(U);
              U.itemId = this.getId();
              U.callMode = typeof W == e ? W : k;
            };
            return wialon.core.Remote.getInstance().remoteCall(z, U, qx.lang.Function.bind(this[d + B], this, V));
          };
          C.members[c + D] = function(X, Y, ba){

            if(typeof ba == a)ba = false;
            Y = wialon.util.Helper.wrapCallback(Y);
            return wialon.core.Remote.getInstance().remoteCall(z, {
              itemId : this.getId(),
              id : X,
              callMode : c
            }, qx.lang.Function.bind(this[d + B], this, {
              callback : Y,
              skipFlag : ba
            }));
          };
        };
        if(A && A.length){

          C.members[j + B + v] = function(bb, bc, bd){

            if(bc && typeof bc == r){

              bd = bc;
              bc = 0;
            };
            bd = wialon.util.Helper.wrapCallback(bd);
            var be = {
              itemId : this.getId(),
              col : []
            };
            for(var i = 0;i < bb.length;i++){

              if(typeof bb[i].id == a)be.col.push(bb[i]); else be.col.push(bb[i].id);
            };
            be.flags = bc;
            return wialon.core.Remote.getInstance().remoteCall(A, be, bd);
          };
        };
        C.statics[g + D] = function(bf, bg){

          bf[p + B](bg);
        };
        C.statics[b + D] = function(bh, bi){

          bh[d + B](null, 0, bi);
        };
        var E = wialon.core.Session.getInstance();
        E.registerProperty(x, qx.lang.Function.bind(C.statics[g + D], C));
        E.registerProperty(x + o, qx.lang.Function.bind(C.statics[b + D], C));
        var G = qx.Mixin.define(t + B, C);
        qx.Class.include(w, G);
      }
    }
  });
})();
(function(){

  var k = "const0",j = "sats",h = "lon",g = '_',f = "speed",e = ']',d = "altitude",c = ":",b = "time",a = "lat",H = '.',G = ':',F = "n",E = "wialon.item.MUnitSensor",D = ' ',C = "out",B = "unit/calc_last_message",A = "course",z = "unit/calc_sensors",y = "in",r = '^',s = '*',p = "const",q = '#',n = '/',o = '[',l = '+',m = "string",t = "",u = '-',w = ')',v = "undefined",x = '(';
  qx.Mixin.define(E, {
    members : {
      calculateSensorValue : function(I, J, K){

        if(!I)return wialon.item.MUnitSensor.invalidValue;
        if(typeof J == v || !J)J = null;
        if(typeof K == v || !K)K = null;
        return this.__bj(I, J, K, null);
      },
      remoteCalculateLastMessage : function(L, M){

        if(!L || !(L instanceof Array))L = [];
        return wialon.core.Remote.getInstance().remoteCall(B, {
          sensors : L,
          unitId : this.getId()
        }, wialon.util.Helper.wrapCallback(M));
      },
      remoteCalculateMsgs : function(N, O, P, Q, R){

        return wialon.core.Remote.getInstance().remoteCall(z, {
          source : N,
          unitId : this.getId(),
          indexFrom : O,
          indexTo : P,
          sensorId : Q
        }, wialon.util.Helper.wrapCallback(R));
      },
      getValue : function(S, T){

        if(!S)return wialon.item.MUnitSensor.invalidValue;
        return this.__bk(S.p, T);
      },
      __bi : {
      },
      __bj : function(U, V, W, X){

        if(!U)return wialon.item.MUnitSensor.invalidValue;
        var Y = false;
        var bd = U.id;
        if(X){

          if(X[bd])return wialon.item.MUnitSensor.invalidValue;
        } else {

          X = new Object;
          Y = true;
        };
        X[bd] = 1;
        var bc = this.__bm(U, V, W, X);
        if(typeof (bc) == m)return bc;
        if(bc != wialon.item.MUnitSensor.invalidValue)bc = this.__bl(U, bc);
        if(U.vs && U.vt){

          var ba = this.getSensor(U.vs);
          if(!ba){

            delete X[bd];
            return wialon.item.MUnitSensor.invalidValue;
          };
          var bb = this.__bj(ba, V, W, X);
          if(bc != wialon.item.MUnitSensor.invalidValue && bb != wialon.item.MUnitSensor.invalidValue){

            if(U.vt == wialon.item.MUnitSensor.validation.logicalAnd){

              if(bc && bb)bc = 1; else bc = 0;
            } else if(U.vt == wialon.item.MUnitSensor.validation.noneZero){

              if(!bb){

                delete X[bd];
                bc = wialon.item.MUnitSensor.invalidValue;
              };
            } else if(U.vt == wialon.item.MUnitSensor.validation.mathAnd){

              bc = Math.ceil(bb) & Math.ceil(bc);
            } else if(U.vt == wialon.item.MUnitSensor.validation.logicalOr){

              if(bc || bb)bc = 1;
            } else if(U.vt == wialon.item.MUnitSensor.validation.mathOr){

              bc = Math.ceil(bb) | Math.ceil(bc);
            } else if(U.vt == wialon.item.MUnitSensor.validation.summarize)bc += bb; else if(U.vt == wialon.item.MUnitSensor.validation.subtructValidator)bc -= bb; else if(U.vt == wialon.item.MUnitSensor.validation.subtructValue)bc = bb - bc; else if(U.vt == wialon.item.MUnitSensor.validation.multiply)bc *= bb; else if(U.vt == wialon.item.MUnitSensor.validation.divideValidator){

              if(bb)bc /= bb; else bc = wialon.item.MUnitSensor.invalidValue;
            } else if(U.vt == wialon.item.MUnitSensor.validation.divideValue){

              if(bc)bc = bb / bc; else bc = wialon.item.MUnitSensor.invalidValue;
            };;;;;;;;;;
          } else if(U.vt == wialon.item.MUnitSensor.validation.replaceOnError){

            if(bc == wialon.item.MUnitSensor.invalidValue)bc = bb;
          } else bc = wialon.item.MUnitSensor.invalidValue;;
        };
        delete X[bd];
        return bc;
      },
      __bk : function(be, bf){

        if(!bf)return wialon.item.MUnitSensor.invalidValue;
        var bi = wialon.item.MUnitSensor.invalidValue;
        var bj = bf.p;
        var bg = be.split(c);
        if(bj && typeof bj[bg[0]] != v)bi = bj[bg[0]]; else if(be == f){

          if(!bf.pos)return wialon.item.MUnitSensor.invalidValue;
          bi = bf.pos.s;
        } else if(be == j){

          if(!bf.pos)return wialon.item.MUnitSensor.invalidValue;
          bi = bf.pos.sc;
        } else if(be == d){

          if(!bf.pos)return wialon.item.MUnitSensor.invalidValue;
          bi = bf.pos.z;
        } else if(be == A){

          if(!bf.pos)return wialon.item.MUnitSensor.invalidValue;
          bi = bf.pos.c;
        } else if(be == a){

          if(!bf.pos)return wialon.item.MUnitSensor.invalidValue;
          bi = bf.pos.y;
        } else if(be == h){

          if(!bf.pos)return wialon.item.MUnitSensor.invalidValue;
          bi = bf.pos.x;
        } else if(be.substr(0, 2) == y){

          if(!(bf.f & 0x2))return wialon.item.MUnitSensor.invalidValue;
          var bh = parseInt(be.substr(2));
          if(bh < 1 || bh > 32 || isNaN(bh))return this.__bl(bf.i);
          var bk = 1 << (bh - 1);
          bi = (bf.i & bk) ? 1 : 0;
        } else if(be.substr(0, 3) == C){

          if(!(bf.f & 0x4))return wialon.item.MUnitSensor.invalidValue;
          var bh = parseInt(be.substr(3));
          if(bh < 1 || bh > 32 || isNaN(bh))return this.__bl(bf.o);
          var bk = 1 << (bh - 1);
          bi = (bf.o & bk) ? 1 : 0;
        } else if(be.substr(0, 5) == p){

          bi = parseFloat(be.substr(5));
        } else if(be.substr(0, 4) == b){

          bi = bf.t;
        };;;;;;;;;;
        if(bg.length > 1 && bi != wialon.item.MUnitSensor.invalidValue){

          var bl = parseInt(bi);
          bi = (bl & (1 << (bg[1] - 1))) ? 1 : 0;
        };
        return bi;
      },
      __bl : function(bm, bn){

        if(!bm || isNaN(bn))return wialon.item.MUnitSensor.invalidValue;
        var bo = bn;
        for(var i = 0;i < bm.tbl.length;i++){

          if(i != 0 && bm.tbl[i].x > bn)return bo;
          bo = parseFloat(bm.tbl[i].a) * parseFloat(bn) + parseFloat(bm.tbl[i].b);
        };
        return bo;
      },
      __bm : function(bp, bq, br, bs){

        if(!bp || typeof bp.p != m || !bp.p.length)return wialon.item.MUnitSensor.invalidValue;
        var bu = this.__bi[bp.p];
        if(typeof bu == v){

          bu = this.__bn(bp.p);
          if(!bu.length)return wialon.item.MUnitSensor.invalidValue;
          this.__bi[bp.p] = bu;
        };
        var bw = [];
        var bt = 0;
        for(var i = 0;i < bu.length;i++){

          var bv = bu[i];
          var bx = bw.length;
          if(bv[0] == s && bx > 1){

            bw[bx - 2] = bw[bx - 2] * bw[bx - 1];
            bw.pop();
          } else if(bv[0] == n && bx > 1){

            if(bw[bx - 1] == 0)return wialon.item.MUnitSensor.invalidValue;
            bw[bx - 2] = bw[bx - 2] / bw[bx - 1];
            bw.pop();
          } else if(bv[0] == l && bx > 1){

            bw[bx - 2] = bw[bx - 2] + bw[bx - 1];
            bw.pop();
          } else if(bv[0] == u){

            if(bx > 1){

              bw[bx - 2] = bw[bx - 2] - bw[bx - 1];
              bw.pop();
            } else if(bx == 1)bw[bx - 1] = -bw[bx - 1];;
          } else if(bv[0] == r && bx > 1){

            bw[bx - 2] = Math.pow(bw[bx - 2], bw[bx - 1]);
            bw.pop();
          } else {

            if(bv[0] == o){

              var bp = wialon.util.Helper.searchObject(this.getSensors(), F, bv.slice(1));
              if(!bp)return wialon.item.MUnitSensor.invalidValue;
              bt = this.__bj(bp, bq, br, bs);
              if(bt == wialon.item.MUnitSensor.invalidValue)return wialon.item.MUnitSensor.invalidValue;
              bw.push(bt);
            } else {

              bt = wialon.item.MUnitSensor.invalidValue;
              if(bv[0] == q)bt = this.__bk(bv.slice(1), br); else bt = this.__bk(bv, bq);
              if(typeof (bt) == m)return bt;
              if(bt == wialon.item.MUnitSensor.invalidValue)return wialon.item.MUnitSensor.invalidValue;
              bw.push(bt);
            };
          };;;;
        };
        return bw.length == 1 ? bw[0] : wialon.item.MUnitSensor.invalidValue;
      },
      __bn : function(by){

        var bJ = by.length;
        var bI = t;
        var bC = [];
        var bD = [];
        var bB = 0;
        var bF = false;
        var bK = false;
        for(var i = 0;i < bJ;i++){

          if(by[i] == D){

            if(!bB)continue;
          } else if(by[i] == o)bF = true; else if(by[i] == e)bF = false;;;
          var bH = by[i].charCodeAt(0);
          var bG = (bH > 47 && bH < 58) || (bH > 64 && bH < 91) || (bH > 96 && bH < 123);
          if(bF || bG || by[i] == g || by[i] == q || by[i] == H || by[i] == G || (by[i] == u && bI == p)){

            bI += by[i];
            bB++;
            if(i < bJ - 1)continue;
          };
          if(bB > 1 && this.__bo(bI) == -1){

            bK = false;
            bD.push(bI);
          };
          bI = by[i];
          var bA = this.__bo(bI);
          if(bA != -1){

            if(by[i] == u && bK)bD.push(k);
            if(by[i] == x)bK = true; else bK = false;
            if(bC.length){

              if(by[i] == x)bC.push(bI); else if(by[i] == w){

                while(bC.length){

                  var bE = bC[bC.length - 1];
                  bC.pop();
                  if(bE[0] != x)bD.push(bE); else break;
                };
              } else {

                while(bC.length){

                  var bE = bC[bC.length - 1];
                  var bz = this.__bo(bE);
                  if(bz >= bA){

                    if(bE[0] != x && bE[0] != w)bD.push(bC[bC.length - 1]);
                    bC.pop();
                  } else break;
                };
                bC.push(bI);
              };
            } else bC.push(bI);
          };
          bI = t;
          bB = 0;
        };
        while(bC.length){

          var bE = bC[bC.length - 1];
          if(bE[0] != w && bE[0] != x)bD.push(bE);
          bC.pop();
        };
        if(!bD.length)bD.push(by);
        return bD;
      },
      __bo : function(bL){

        if(bL == t)return -1;
        switch(bL[0]){case r:
        return 4;case s:case n:
        return 3;case u:case l:
        return 2;case w:
        return 1;case x:
        return 0;};
        return -1;
      }
    },
    statics : {
      invalidValue : -348201.3876,
      validation : {
        logicalAnd : 0x01,
        logicalOr : 0x02,
        mathAnd : 0x03,
        mathOr : 0x04,
        summarize : 0x05,
        subtructValidator : 0x06,
        subtructValue : 0x07,
        multiply : 0x08,
        divideValidator : 0x09,
        divideValue : 0x0A,
        noneZero : 0x0B,
        replaceOnError : 0x0C
      }
    }
  });
})();
(function(){

  var d = "wialon.item.MUnitTripDetector",c = "unit/get_trip_detector",b = "unit/get_trips",a = "unit/update_trip_detector";
  qx.Mixin.define(d, {
    members : {
      getTripDetector : function(e){

        return wialon.core.Remote.getInstance().remoteCall(c, {
          itemId : this.getId()
        }, wialon.util.Helper.wrapCallback(e));
      },
      getTrips : function(f, g, h, i){

        return wialon.core.Remote.getInstance().remoteCall(b, {
          itemId : this.getId(),
          timeFrom : f,
          timeTo : g,
          msgsSource : h
        }, wialon.util.Helper.wrapCallback(i));
      },
      updateTripDetector : function(j, k, l, m, n, o, p, q, r){

        return wialon.core.Remote.getInstance().remoteCall(a, {
          itemId : this.getId(),
          type : j,
          gpsCorrection : k,
          minSat : l,
          minMovingSpeed : m,
          minStayTime : n,
          maxMessagesDistance : o,
          minTripTime : p,
          minTripDistance : q
        }, wialon.util.Helper.wrapCallback(r));
      }
    },
    statics : {
      tripDetectionType : {
        gpsSpeed : 1,
        gpsPosition : 2,
        ignitionSensor : 3,
        mileageSensorAbsolute : 4,
        mileageSensorRelative : 5
      }
    }
  });
})();
(function(){

  var c = "wialon.item.MUnitMessagesFilter",b = "unit/get_messages_filter",a = "unit/update_messages_filter";
  qx.Mixin.define(c, {
    members : {
      getMessagesFilter : function(d){

        return wialon.core.Remote.getInstance().remoteCall(b, {
          itemId : this.getId()
        }, wialon.util.Helper.wrapCallback(d));
      },
      updateMessagesFilter : function(e, f, g, h, i, j){

        return wialon.core.Remote.getInstance().remoteCall(a, {
          itemId : this.getId(),
          enabled : e,
          skipInvalid : f,
          minSats : g,
          maxHdop : h,
          maxSpeed : i
        }, wialon.util.Helper.wrapCallback(j));
      }
    }
  });
})();
(function(){

  var f = "unit/registry_maintenance_event",e = "wialon.item.MUnitEventRegistrar",d = "unit/registry_status_event",c = "unit/registry_insurance_event",b = "unit/registry_custom_event",a = "unit/registry_fuel_filling_event";
  qx.Mixin.define(e, {
    members : {
      registryStatusEvent : function(g, h, i, j){

        return wialon.core.Remote.getInstance().remoteCall(d, {
          date : g,
          description : h,
          params : i,
          itemId : this.getId()
        }, wialon.util.Helper.wrapCallback(j));
      },
      registryInsuranceEvent : function(k, l, m, n){

        return wialon.core.Remote.getInstance().remoteCall(c, {
          type : l,
          case_num : m,
          description : k,
          itemId : this.getId()
        }, wialon.util.Helper.wrapCallback(n));
      },
      registryCustomEvent : function(o, p, x, y, q, r){

        return wialon.core.Remote.getInstance().remoteCall(b, {
          date : o,
          x : x,
          y : y,
          description : p,
          violation : q,
          itemId : this.getId()
        }, wialon.util.Helper.wrapCallback(r));
      },
      registryFuelFillingEvent : function(s, t, x, y, location, u, v, w, z){

        return wialon.core.Remote.getInstance().remoteCall(a, {
          date : s,
          volume : u,
          cost : v,
          location : location,
          deviation : w,
          x : x,
          y : y,
          description : t,
          itemId : this.getId()
        }, wialon.util.Helper.wrapCallback(z));
      },
      registryMaintenanceEvent : function(A, B, x, y, location, C, D, E, F, G, H, I){

        return wialon.core.Remote.getInstance().remoteCall(f, {
          date : A,
          info : C,
          duration : D,
          cost : E,
          location : location,
          x : x,
          y : y,
          description : B,
          mileage : F,
          eh : G,
          done_svcs : H,
          itemId : this.getId()
        }, wialon.util.Helper.wrapCallback(I));
      }
    }
  });
})();
(function(){

  var c = "wialon.item.MUnitReportSettings",b = "unit/get_report_settings",a = "unit/update_report_settings";
  qx.Mixin.define(c, {
    members : {
      getReportSettings : function(d){

        return wialon.core.Remote.getInstance().remoteCall(b, {
          itemId : this.getId()
        }, wialon.util.Helper.wrapCallback(d));
      },
      updateReportSettings : function(e, f){

        return wialon.core.Remote.getInstance().remoteCall(a, {
          itemId : this.getId(),
          params : e
        }, wialon.util.Helper.wrapCallback(f));
      }
    }
  });
})();
(function(){

  var g = "unit/update_fuel_rates_params",f = "unit/update_fuel_math_params",e = "unit/update_fuel_impulse_params",d = "wialon.item.MUnitFuelSettings",c = "unit/update_fuel_level_params",b = "unit/get_fuel_settings",a = "unit/update_fuel_calc_types";
  qx.Mixin.define(d, {
    members : {
      getFuelSettings : function(h){

        return wialon.core.Remote.getInstance().remoteCall(b, {
          itemId : this.getId()
        }, wialon.util.Helper.wrapCallback(h));
      },
      updateFuelCalcTypes : function(i, j){

        return wialon.core.Remote.getInstance().remoteCall(a, {
          itemId : this.getId(),
          calcTypes : i
        }, wialon.util.Helper.wrapCallback(j));
      },
      updateFuelLevelParams : function(k, l, m, n, o, p, q){

        return wialon.core.Remote.getInstance().remoteCall(c, {
          itemId : this.getId(),
          flags : k,
          ignoreStayTimeout : l,
          minFillingVolume : m,
          minTheftTimeout : n,
          minTheftVolume : o,
          filterQuality : p
        }, wialon.util.Helper.wrapCallback(q));
      },
      updateFuelConsMath : function(r, s, t, u, v){

        return wialon.core.Remote.getInstance().remoteCall(f, {
          itemId : this.getId(),
          idling : r,
          urban : s,
          suburban : t,
          loadCoef : u
        }, wialon.util.Helper.wrapCallback(v));
      },
      updateFuelConsRates : function(w, x, y, z, A, B, C, D, E){

        return wialon.core.Remote.getInstance().remoteCall(g, {
          itemId : this.getId(),
          idlingSummer : w,
          idlingWinter : x,
          consSummer : y,
          consWinter : z,
          winterMonthFrom : A,
          winterDayFrom : B,
          winterMonthTo : C,
          winterDayTo : D
        }, wialon.util.Helper.wrapCallback(E));
      },
      updateFuelConsImpulse : function(F, G, H){

        return wialon.core.Remote.getInstance().remoteCall(e, {
          itemId : this.getId(),
          maxImpulses : F,
          skipZero : G
        }, wialon.util.Helper.wrapCallback(H));
      }
    },
    statics : {
      fuelCalcType : {
        math : 0x01,
        levelSensors : 0x02,
        levelSensorsMath : 0x04,
        absConsSensors : 0x08,
        impConsSensors : 0x10,
        instConsSensors : 0x20,
        rates : 0x40
      },
      fuelLevelFlag : {
        mergeSensors : 0x01,
        smoothData : 0x02,
        splitConsSensors : 0x04,
        requireStay : 0x08,
        calcByTime : 0x10,
        calcFillingsByRaw : 0x40,
        calcTheftsByRaw : 0x80,
        detectTheftsInMotion : 0x100,
        calcFillingsByTime : 0x200,
        calcTheftsByTime : 0x400,
        calcConsumptionByTime : 0x800
      }
    }
  });
})();
(function(){

  var a = "wialon.item.MZone";
  qx.Mixin.define(a, {
    members : {
    },
    statics : {
      flags : {
        area : 0x00000001,
        perimeter : 0x00000002,
        boundary : 0x00000004,
        points : 0x00000008,
        base : 0x000000010
      }
    }
  });
})();
(function(){

  var j = "resource/cleanup_driver_interval",i = "changeDriverUnits",h = "wialon.item.MDriver",g = "/1/",f = "/2/",e = "changeTrailerUnits",d = "resource/get_driver_bindings",c = "resource/update_trailer_units",b = "resource/bind_unit_driver",a = "resource/cleanup_trailer_interval",y = "resource/get_trailer_bindings",x = "resource/bind_unit_trailer",w = "resource/update_driver_units",v = ".png",u = "Array",t = "resource/upload_trailer_image",s = "qx.event.type.Data",r = "resource/upload_driver_image",q = "trlrun",p = "/avl_driver_image/",n = "undefined",o = "drvrun",l = "object",m = "/",k = "number";
  qx.Mixin.define(h, {
    construct : function(){

      var z = wialon.core.Session.getInstance();
      z.registerProperty(o, qx.lang.Function.bind(function(A, B){

        A.setDriverUnits(B);
      }, this));
      z.registerProperty(q, qx.lang.Function.bind(function(C, D){

        C.setTrailerUnits(D);
      }, this));
    },
    properties : {
      driverUnits : {
        init : null,
        check : u,
        event : i
      },
      trailerUnits : {
        init : null,
        check : u,
        event : e
      }
    },
    members : {
      updateDriverUnits : function(E, F){

        return wialon.core.Remote.getInstance().remoteCall(w, {
          itemId : this.getId(),
          units : E
        }, qx.lang.Function.bind(this._onUpdateProperties, this, wialon.util.Helper.wrapCallback(F)));
      },
      updateTrailerUnits : function(G, H){

        return wialon.core.Remote.getInstance().remoteCall(c, {
          itemId : this.getId(),
          units : G
        }, qx.lang.Function.bind(this._onUpdateProperties, this, wialon.util.Helper.wrapCallback(H)));
      },
      getDriverImageUrl : function(I, J){

        if(typeof J == n || !J)J = 32;
        return wialon.core.Session.getInstance().getBaseUrl() + p + this.getId() + m + I.id + m + J + g + I.ck + v;
      },
      getTrailerImageUrl : function(K, L){

        if(typeof L == n || !L)L = 32;
        return wialon.core.Session.getInstance().getBaseUrl() + p + this.getId() + m + K.id + m + L + f + K.ck + v;
      },
      setDriverImage : function(M, N, O){

        if(typeof N == l && typeof N.resId == k && typeof N.drvId == k)return wialon.core.Remote.getInstance().remoteCall(r, {
          itemId : this.getId(),
          driverId : M.id,
          oldItemId : N.resId,
          oldDrvId : N.drvId
        }, O);
        return wialon.core.Uploader.getInstance().uploadFiles([N], r, {
          itemId : this.getId(),
          driverId : M.id
        }, O);
      },
      setTrailerImage : function(P, Q, R){

        if(typeof Q == l && typeof Q.resId == k && typeof Q.trId == k)return wialon.core.Remote.getInstance().remoteCall(t, {
          itemId : this.getId(),
          trailerId : P.id,
          oldItemId : Q.resId,
          oldTrId : Q.trId
        }, R);
        return wialon.core.Uploader.getInstance().uploadFiles([Q], t, {
          itemId : this.getId(),
          trailerId : P.id
        }, R);
      },
      bindDriverToUnit : function(S, T, U, V, W){

        var X = 0;
        var Y = 0;
        if(S)X = S.id;
        if(T)Y = T.getId();
        return wialon.core.Remote.getInstance().remoteCall(b, {
          resourceId : this.getId(),
          driverId : X,
          time : U,
          unitId : Y,
          mode : V
        }, wialon.util.Helper.wrapCallback(W));
      },
      bindTrailerToUnit : function(ba, bb, bc, bd, be){

        var bf = 0;
        var bg = 0;
        if(ba)bf = ba.id;
        if(bb)bg = bb.getId();
        return wialon.core.Remote.getInstance().remoteCall(x, {
          resourceId : this.getId(),
          trailerId : bf,
          time : bc,
          unitId : bg,
          mode : bd
        }, wialon.util.Helper.wrapCallback(be));
      },
      cleanupDriverInterval : function(bh, bi, bj, bk){

        var bl = 0;
        if(bh)bl = bh.id;
        return wialon.core.Remote.getInstance().remoteCall(j, {
          resourceId : this.getId(),
          driverId : bl,
          timeFrom : bi,
          timeTo : bj
        }, wialon.util.Helper.wrapCallback(bk));
      },
      cleanupTrailerInterval : function(bm, bn, bo, bp){

        var bq = 0;
        if(bm)bq = bm.id;
        return wialon.core.Remote.getInstance().remoteCall(a, {
          resourceId : this.getId(),
          trailerId : bq,
          timeFrom : bn,
          timeTo : bo
        }, wialon.util.Helper.wrapCallback(bp));
      },
      getDriverBindings : function(br, bs, bt, bu, bv){

        var bw = 0;
        var bx = 0;
        if(bs)bw = bs.id;
        if(br)bx = br.getId();
        return wialon.core.Remote.getInstance().remoteCall(d, {
          resourceId : this.getId(),
          unitId : bx,
          driverId : bw,
          timeFrom : bt,
          timeTo : bu
        }, wialon.util.Helper.wrapCallback(bv));
      },
      getTrailerBindings : function(by, bz, bA, bB, bC){

        var bD = 0;
        var bE = 0;
        if(bz)bD = bz.id;
        if(by)bE = by.getId();
        return wialon.core.Remote.getInstance().remoteCall(y, {
          resourceId : this.getId(),
          unitId : bE,
          trailerId : bD,
          timeFrom : bA,
          timeTo : bB
        }, wialon.util.Helper.wrapCallback(bC));
      }
    },
    statics : {
      registerDriverProperties : function(){

        var bF = wialon.core.Session.getInstance();
        bF.registerProperty(o, this.remoteUpdateDriverUnits);
        bF.registerProperty(q, this.remoteUpdateTrailerUnits);
      },
      remoteUpdateDriverUnits : function(bG, bH){

        bG.setDriverUnits(bH);
      },
      remoteUpdateTrailerUnits : function(bI, bJ){

        bI.setTrailerUnits(bJ);
      },
      flags : {
        driver : 0x01,
        trailer : 0x02,
        assignmentRestriction : 0x04
      }
    },
    events : {
      "changeDriverUnits" : s,
      "changeTrailerUnits" : s
    }
  });
})();
(function(){

  var j = "create_account",i = "account/enable_account",h = "account/update_sub_plans",g = "account/get_account_history",f = "update_account_min_days",e = "account/update_dealer_rights",d = "account/create_account",c = "account/update_min_days",b = "switch_account",a = "update_account_history_period",y = "account/update_flags",x = "account/do_payment",w = "wialon.item.MAccount",v = "update_account_flags",u = "create_account_service",t = "account/delete_account",s = "update_dealer_rights",r = "update_account_service",q = "account/update_plan",p = "update_account_plan",n = "account/update_history_period",o = "delete_account_service",l = "account/get_account_data",m = "update_account_subplans",k = "account/update_billing_service";
  qx.Mixin.define(w, {
    members : {
      getAccountData : function(z){

        return wialon.core.Remote.getInstance().remoteCall(l, {
          itemId : this.getId()
        }, wialon.util.Helper.wrapCallback(z));
      },
      getAccountHistory : function(A, B, C){

        return wialon.core.Remote.getInstance().remoteCall(g, {
          itemId : this.getId(),
          days : A,
          tz : B
        }, wialon.util.Helper.wrapCallback(C));
      },
      updateDealerRights : function(D, E){

        return wialon.core.Remote.getInstance().remoteCall(e, {
          itemId : this.getId(),
          enable : D
        }, wialon.util.Helper.wrapCallback(E));
      },
      updatePlan : function(F, G){

        return wialon.core.Remote.getInstance().remoteCall(q, {
          itemId : this.getId(),
          plan : F
        }, wialon.util.Helper.wrapCallback(G));
      },
      updateFlags : function(H, I){

        return wialon.core.Remote.getInstance().remoteCall(y, {
          itemId : this.getId(),
          flags : H
        }, wialon.util.Helper.wrapCallback(I));
      },
      updateMinDays : function(J, K){

        return wialon.core.Remote.getInstance().remoteCall(c, {
          itemId : this.getId(),
          minDays : J
        }, wialon.util.Helper.wrapCallback(K));
      },
      updateHistoryPeriod : function(L, M){

        return wialon.core.Remote.getInstance().remoteCall(n, {
          itemId : this.getId(),
          historyPeriod : L
        }, wialon.util.Helper.wrapCallback(M));
      },
      updateBillingService : function(name, N, O, P, Q){

        return wialon.core.Remote.getInstance().remoteCall(k, {
          itemId : this.getId(),
          name : name,
          type : N,
          intervalType : O,
          costTable : P
        }, wialon.util.Helper.wrapCallback(Q));
      },
      enableAccount : function(R, S){

        return wialon.core.Remote.getInstance().remoteCall(i, {
          itemId : this.getId(),
          enable : R
        }, wialon.util.Helper.wrapCallback(S));
      },
      updateSubPlans : function(T, U){

        return wialon.core.Remote.getInstance().remoteCall(h, {
          itemId : this.getId(),
          plans : T
        }, wialon.util.Helper.wrapCallback(U));
      },
      doPayment : function(V, W, X, Y){

        return wialon.core.Remote.getInstance().remoteCall(x, {
          itemId : this.getId(),
          balanceUpdate : V,
          daysUpdate : W,
          description : X
        }, wialon.util.Helper.wrapCallback(Y));
      },
      createAccount : function(ba, bb){

        return wialon.core.Remote.getInstance().remoteCall(d, {
          itemId : this.getId(),
          plan : ba
        }, wialon.util.Helper.wrapCallback(bb));
      },
      deleteAccount : function(bc){

        return wialon.core.Remote.getInstance().remoteCall(t, {
          itemId : this.getId()
        }, wialon.util.Helper.wrapCallback(bc));
      }
    },
    statics : {
      billingPlanFlag : {
        blockAccount : 0x1,
        denyServices : 0x2,
        allowUnknownServices : 0x4,
        restrictDeviceListedOnly : 0x8,
        restrictDeviceNotListedOnly : 0x10,
        subtractDays : 0x20,
        overridePlanFlags : 0x40
      },
      billingIntervalType : {
        none : 0,
        hourly : 1,
        daily : 2,
        weekly : 3,
        monthly : 4
      },
      billingServiceType : {
        onDemand : 1,
        periodic : 2
      },
      logMessageAction : {
        accountCreated : j,
        accountSwitched : b,
        accountUpdateDealerRights : s,
        accountUpdateFlags : v,
        accountUpdateMinDays : f,
        accountUpdatedHistoryPeriod : a,
        accountUpdatePlan : p,
        accountUpdateSubplans : m,
        accountCreatedService : u,
        accountUpdatedService : r,
        accountDeletedService : o
      }
    }
  });
})();
(function(){

  var c = "report/cleanup_result",b = "report/exec_report",a = "wialon.item.MReport";
  qx.Mixin.define(a, {
    members : {
      execReport : function(d, e, f, g, h){

        var i = null;
        if(!d.id)i = d;
        return wialon.core.Remote.getInstance().remoteCall(b, {
          reportResourceId : this.getId(),
          reportTemplateId : d.id,
          reportTemplate : i,
          reportObjectId : e,
          reportObjectSecId : f,
          interval : g
        }, qx.lang.Function.bind(this.__bp, this, wialon.util.Helper.wrapCallback(h)), 180);
      },
      cleanupResult : function(j){

        return wialon.core.Remote.getInstance().remoteCall(c, {
        }, qx.lang.Function.bind(this.__bq, this, wialon.util.Helper.wrapCallback(j)));
      },
      __bp : function(k, l, m){

        var n = null;
        if(l == 0 && m){

          n = new wialon.report.ReportResult(m);
          var o = wialon.core.Session.getInstance().getRenderer();
          if(o)o.setReportResult(n);
        };
        k(l, n);
      },
      __bq : function(p, q, r){

        var s = wialon.core.Session.getInstance().getRenderer();
        if(s)s.setReportResult(null);
        p(q);
      }
    },
    statics : {
      intervalFlag : {
        absolute : 0x00,
        useCurrentTime : 0x01,
        prevHour : 0x40,
        prevDay : 0x02,
        prevWeek : 0x04,
        prevMonth : 0x08,
        prevYear : 0x10,
        currTimeAndPrev : 0x20
      },
      tableFlag : {
      },
      columnFlag : {
      }
    }
  });
})();
(function(){

  var k = "report/get_result_subrows",j = "&svc=report/export_result&params=",i = "&svc=report/get_result_photo&params=",h = "report/select_result_rows",g = "wialon.report.ReportResult",f = "&svc=report/get_result_map&params=",e = "report/get_result_rows",d = "report/hittest_chart",c = "&svc=report/get_result_chart&params=",b = "Object",a = "/wialon/ajax.html?sid=";
  qx.Class.define(g, {
    extend : qx.core.Object,
    construct : function(l){

      qx.core.Object.call(this, l);
      this._data = l;
    },
    properties : {
      layer : {
        init : null,
        check : b,
        nullable : true
      }
    },
    members : {
      _data : null,
      getTables : function(){

        return this._data.reportResult.tables;
      },
      isRendered : function(){

        return this._data.reportResult.msgsRendered;
      },
      isEmpty : function(){

        var m = 0,n = 0,o = 0;
        if(this._data.reportResult.tables)m = this._data.reportResult.tables.length;
        if(this._data.reportResult.stats)n = this._data.reportResult.stats.length;
        if(this._data.reportResult.attachments)o = this._data.reportResult.attachments.length;
        if(!m && !n && !o)return true;
        return false;
      },
      getTableRows : function(p, q, r, s){

        return wialon.core.Remote.getInstance().remoteCall(e, {
          tableIndex : p,
          indexFrom : q,
          indexTo : r
        }, wialon.util.Helper.wrapCallback(s));
      },
      getRowDetail : function(t, u, v){

        return wialon.core.Remote.getInstance().remoteCall(k, {
          tableIndex : t,
          rowIndex : u
        }, wialon.util.Helper.wrapCallback(v));
      },
      selectRows : function(w, x, y){

        return wialon.core.Remote.getInstance().remoteCall(h, {
          tableIndex : w,
          config : x
        }, wialon.util.Helper.wrapCallback(y));
      },
      getMessages : function(z, A, B){

        B = wialon.util.Helper.wrapCallback(B);
        var C = this.getLayer();
        if(C && C instanceof wialon.render.MessagesLayer)C.getMessages(0, z, A, B); else B(3);
      },
      getStatistics : function(){

        return this._data.reportResult.stats;
      },
      getAttachments : function(){

        return this._data.reportResult.attachments;
      },
      getChartUrl : function(D, E, F, G, H, I, J, K){

        var L = {
          reportResourceId : this._data.reportResourceId,
          attachmentIndex : D,
          action : E,
          width : F,
          height : G,
          autoScaleY : H,
          pixelFrom : I,
          pixelTo : J,
          flags : K,
          rnd : (new Date).getTime()
        };
        return wialon.core.Session.getInstance().getBaseUrl() + a + wialon.core.Session.getInstance().getId() + c + wialon.util.Json.stringify(L);
      },
      hitTestChart : function(M, N, O, P){

        return wialon.core.Remote.getInstance().remoteCall(d, {
          attachmentIndex : M,
          datasetIndex : N,
          pixelX : O
        }, wialon.util.Helper.wrapCallback(P));
      },
      getExportUrl : function(Q, R){

        var S = qx.lang.Object.clone(R);
        S.format = Q;
        return wialon.core.Session.getInstance().getBaseUrl() + a + wialon.core.Session.getInstance().getId() + j + wialon.util.Json.stringify(S);
      },
      getMapUrl : function(T, U){

        var V = {
          width : T,
          height : U,
          rnd : (new Date).getTime()
        };
        return wialon.core.Session.getInstance().getBaseUrl() + a + wialon.core.Session.getInstance().getId() + f + wialon.util.Json.stringify(V);
      },
      getPhotoUrl : function(W, X){

        var Y = {
          attachmentIndex : W,
          border : X,
          rnd : (new Date).getTime()
        };
        return wialon.core.Session.getInstance().getBaseUrl() + a + wialon.core.Session.getInstance().getId() + i + wialon.util.Json.stringify(Y);
      },
      getLayerData : function(){

        return this._data.reportLayer;
      }
    },
    statics : {
      chartFlag : {
        headerTop : 0x01,
        headerBottom : 0x02,
        headerNone : 0x04,
        axisUpDown : 0x40,
        axisDownUp : 0x80,
        legendTop : 0x100,
        legendBottom : 0x200,
        legendLeft : 0x400,
        legendShowAlways : 0x1000
      },
      exportFormat : {
        html : 0x1,
        pdf : 0x2,
        xls : 0x4,
        xlsx : 0x8,
        xml : 0x10,
        csv : 0x20
      }
    }
  });
})();
(function(){

  var n = "Integer",m = "wialon.util.MDataFlagsHelper",l = "",k = "itemCreated",h = "qx.event.type.Event",g = "*",f = "type",e = "col",d = "undefined",c = "string",a = "object",b = "id";
  qx.Mixin.define(m, {
    members : {
      properties : {
        newItemsCheckingTimeout : {
          init : 600,
          check : n
        }
      },
      startBatch : function(){

        if(this.__F)return 0;
        this.__F = new Array;
        return 1;
      },
      finishBatch : function(o){

        o = wialon.util.Helper.wrapCallback(o);
        if(!this.__F){

          o(2);
          return;
        };
        if(!this.__F.length){

          this.__F = null;
          o(0);
          return;
        };
        this.__bv(this.__F);
        this.__F = null;
      },
      addItems : function(p, q, r){

        r = wialon.util.Helper.wrapCallback(r);
        if(typeof q != a)return r(2);
        var s = {
          owner : p,
          spec : q,
          callback : r,
          mode : 1
        };
        if(this.__F)this.__F.push(s); else this.__bv([s]);
      },
      removeItems : function(t, u, v){

        v = wialon.util.Helper.wrapCallback(v);
        if(typeof u != a)return v(2);
        var w = {
          owner : t,
          spec : u,
          callback : v,
          mode : 2
        };
        if(this.__F)this.__F.push(w); else this.__bv([w]);
      },
      getItemsByOwner : function(x, y){

        if(typeof x != c || !x.length)return [];
        var z = [];
        for(var B in this.__bs){

          var A = false;
          var C = wialon.core.Session.getInstance().getItem(B);
          if(!C)continue;
          if(y && y != C.getType())continue;
          if(this.__bs[B][x])z.push(C);
        };
        return z;
      },
      getItemDataFlags : function(D, E){

        if(typeof D != c || !D.length)return 0;
        var F = this.__bs[E];
        if(!F || !F[D])return 0;
        return F[D];
      },
      getItemByOwner : function(G, H){

        if(typeof G != c || !G.length)return null;
        var I = this.__bs[H];
        if(!I || !I[G])return null;
        return wialon.core.Session.getInstance().getItem(H);
      },
      startItemsCreationChecking : function(J){

        if(typeof this.__bt[J] != d)return;
        this.__bt[J] = {
        };
        this.findNewItems(J, true);
      },
      finishItemsCreationChecking : function(K){

        if(typeof this.__bt[K] == d)return;
        delete this.__bt[K];
      },
      findNewItems : function(L, M){

        clearTimeout(this.__br);
        this.__br = null;
        wialon.core.Remote.getInstance().startBatch();
        for(var O in this.__bt){

          if(L && L != O)continue;
          var N = qx.lang.Function.bind(function(P, Q, R){

            if(Q)return;
            var V = [];
            var U = [];
            for(var i = 0;i < R.items.length;i++){

              if(this.__bt[P.itemsType][R.items[i].getId()])continue;
              this.__bt[P.itemsType][R.items[i].getId()] = 1;
              V.push({
                type : b,
                data : R.items[i].getId(),
                flags : 0,
                mode : 0
              });
              V.push({
                type : b,
                data : R.items[i].getId(),
                flags : wialon.item.Item.dataFlag.base,
                mode : 1
              });
              U.push(R.items[i].getId());
            };
            if(!P.skipEvent && U.length > 0){

              wialon.core.Session.getInstance().updateDataFlags(V, qx.lang.Function.bind(function(X, Y){

                if(Y)return;
                var ba = [];
                for(var i = 0;i < X.length;i++){

                  var bb = wialon.core.Session.getInstance().getItem(X[i]);
                  if(!bb)continue;
                  ba.push(bb);
                };
                wialon.core.Session.getInstance().fireDataEvent(k, ba, null);
              }, this, U));
            };
            var S = 0;
            for(var W in this.__bt[P.itemsType])S++;
            if(S > R.items.length){

              for(var W in this.__bt[P.itemsType]){

                var T = 0;
                for(var i = 0;i < R.items.length;i++){

                  if(R.items[i].getId() == W){

                    T = W;
                    break;
                  };
                };
                if(T)continue;
                delete this.__bt[P.itemsType][W];
                this._onItemDeleted(this.getItem(W));
              };
            };
          }, this, {
            itemsType : O,
            skipEvent : M ? 1 : 0
          });
          wialon.core.Session.getInstance().searchItems({
            itemsType : O,
            propName : g,
            propValueMask : g,
            sortType : l
          }, 1, wialon.item.Item.dataFlag.base, 0, 0xFFFFFFFF, N);
        };
        wialon.core.Remote.getInstance().finishBatch(qx.lang.Function.bind(function(){

          if(!this.__br)this.__br = setTimeout(qx.lang.Function.bind(this.findNewItems, this), this.__bu * 1000);
        }, this));
      },
      __bs : {
      },
      __F : null,
      __br : null,
      __bt : {
      },
      __bu : 600,
      __bv : function(bc){

        if(!bc instanceof Array)return;
        wialon.core.Remote.getInstance().startBatch();
        for(var i = 0;i < bc.length;i++){

          var bg = bc[i];
          if(typeof bg != a)continue;
          bg.spec.mode = bg.mode;
          if(bg.mode == 1){

            var bj = qx.lang.Function.bind(this.__bw, this, bg);
            wialon.core.Session.getInstance().updateDataFlags([bg.spec], bj);
          } else if(bg.mode == 2){

            var bh = [];
            if(bg.spec.type == b)bh.push(bg.spec.data); else if(bg.spec.type == e)bh = bh.concat(bg.spec.data); else if(bg.spec.type == f){

              for(var bn in this.__bs){

                var be = wialon.core.Session.getInstance().getItem(bn);
                if(be && be.getType() == bg.spec.data)bh.push(bn);
              };
            };;
            if(!bh.length)continue;
            var bd = {
            };
            var bl = bg.spec.flags;
            for(var i = 0;i < bh.length;i++){

              var bf = this.__bs[bh[i]];
              if(!bf)continue;
              if(!bf[bg.owner])continue;
              for(var j = 0;j < 64;j++){

                var bk = (1 << j);
                if(!(bl & bk) || !(bf[bg.owner] & bk))continue;
                bf[bg.owner] ^= bk;
                var bi = true;
                for(var bm in bf)if(bf.hasOwnProperty(bm) && (bf[bm] & bk)){

                  bi = false;
                  break;
                };
                if(bi){

                  if(typeof bd[bh[i]] == d)bd[bh[i]] = {
                    type : b,
                    data : bh[i],
                    flags : 0,
                    mode : 2
                  };
                  bd[bh[i]].flags |= bk;
                };
              };
            };
            for(var bn in bd)if(bd.hasOwnProperty(bn))wialon.core.Session.getInstance().updateDataFlags([bd[bn]]);;
            if(bg.callback)bg.callback();
          };
        };
        wialon.core.Remote.getInstance().finishBatch();
      },
      __bw : function(bo, bp){

        var br = (new Date()).getTime();
        if(!bo)return;
        if(bp)return bo.callback ? bo.callback() : null;
        var bs = [];
        if(bo.spec.type == b)bs.push(bo.spec.data); else if(bo.spec.type == e)bs = bs.concat(bo.spec.data); else if(bo.spec.type == f){

          var bq = wialon.core.Session.getInstance().getItems(bo.spec.data);
          for(var i = 0;i < bq.length;i++)bs.push(bq[i].getId());
        };;
        for(var i = 0;i < bs.length;i++){

          var bt = bs[i];
          if(!this.__bs[bt])this.__bs[bt] = {
          };
          if(!this.__bs[bt][bo.owner])this.__bs[bt][bo.owner] = 0;
          this.__bs[bt][bo.owner] |= bo.spec.flags;
        };
        return bo.callback ? bo.callback() : null;
      }
    },
    events : {
      "itemCreated" : h
    }
  });
})();
(function(){

  var g = "apps/list",f = "apps/update",e = "apps/delete",d = "apps/check_top_service",c = "apps/create",b = "wialon.util.Apps",a = "static";
  qx.Class.define(b, {
    type : a,
    statics : {
      createApplication : function(name, h, i, j, k, l, m, n, o){

        o = wialon.util.Helper.wrapCallback(o);
        return wialon.core.Remote.getInstance().remoteCall(c, {
          name : name,
          description : h,
          url : i,
          flags : j,
          langs : k,
          sortOrder : l,
          requiredServicesList : m,
          billingPlans : n
        }, o);
      },
      updateApplication : function(p, name, q, r, s, t, u, v, w, x){

        x = wialon.util.Helper.wrapCallback(x);
        return wialon.core.Remote.getInstance().remoteCall(f, {
          id : p,
          name : name,
          description : q,
          url : r,
          flags : s,
          langs : t,
          sortOrder : u,
          requiredServicesList : v,
          billingPlans : w
        }, x);
      },
      deleteApplication : function(y, z){

        z = wialon.util.Helper.wrapCallback(z);
        return wialon.core.Remote.getInstance().remoteCall(e, {
          id : y
        }, z);
      },
      getApplications : function(A, B, C){

        C = wialon.util.Helper.wrapCallback(C);
        return wialon.core.Remote.getInstance().remoteCall(g, {
          manageMode : A,
          filterLang : B
        }, C);
      },
      remoteCheckTopService : function(D){

        D = wialon.util.Helper.wrapCallback(D);
        return wialon.core.Remote.getInstance().remoteCall(d, {
        }, D);
      },
      urlFlags : {
        sid : 0x00000001,
        user : 0x00000002,
        baseUrl : 0x00000004,
        hostUrl : 0x00000008,
        lang : 0x00000010,
        authHash : 0x00000020
      },
      appTypes : {
        reportsServer : 0x00010000
      }
    }
  });
})();
(function(){

  var c = "agro/update_agro_props",b = "wialon.agro.MAgroUnit",a = "agro/get_agro_props";
  qx.Mixin.define(b, {
    members : {
      getAgroProps : function(d){

        return wialon.core.Remote.getInstance().remoteCall(a, {
          itemId : this.getId()
        }, wialon.util.Helper.wrapCallback(d));
      },
      updateAgroProps : function(e, f){

        return wialon.core.Remote.getInstance().remoteCall(c, {
          itemId : this.getId(),
          props : e
        }, wialon.util.Helper.wrapCallback(f));
      }
    }
  });
})();
(function(){

  var c = "route/optimize",b = "static",a = "wialon.util.Routing";
  qx.Class.define(a, {
    type : b,
    statics : {
      remoteOptimizeCourierRoute : function(d, e, f, g){

        g = wialon.util.Helper.wrapCallback(g);
        return wialon.core.Remote.getInstance().remoteCall(c, {
          pathMatrix : d,
          pointSchedules : e,
          flags : f
        }, g);
      },
      remoteOptimizeFlag : {
        fitSchedule : 0x1,
        optimizeDuration : 0x2,
        optimizeTime : 0x4,
        fixFirstPoint : 0x8,
        fixLastPoint : 0x10
      }
    }
  });
})();
(function(){

  var x = "-",w = "'",u = "wialon.util.Geometry",t = "00",q = "static",n = "",m = "&deg;",j = " ",h = "object",e = "0";
  qx.Class.define(u, {
    type : q,
    statics : {
      getDistance : function(y, z, A, B){

        var k = Math.PI / 180;
        var I = 1 / 298.257;
        var c,d,f,g,E,D,l,o,r,s,M,H,K,F,L,G,J,C;
        if(y == A && z == B)return 0;
        f = (y + A) / 2;
        g = (y - A) / 2;
        l = (z - B) / 2;
        K = Math.sin(g * k);
        F = Math.cos(g * k);
        L = Math.sin(f * k);
        G = Math.cos(f * k);
        J = Math.sin(l * k);
        C = Math.cos(l * k);
        M = Math.pow(K * C, 2);
        H = Math.pow(G * J, 2);
        s = M + H;
        M = Math.pow(F * C, 2);
        H = Math.pow(L * J, 2);
        c = M + H;
        o = Math.atan(Math.sqrt(s / c));
        r = Math.sqrt(s * c) / o;
        d = 2 * o * 6378.137;
        E = (3 * r - 1) / (2 * c);
        D = (3 * r + 1) / (2 * s);
        M = L * F;
        M = M * M * E * I + 1;
        H = G * K;
        H = H * H * D * I;
        return d * (M - H) * 1000;
      },
      getCoordDegrees : function(N, O, P, Q, R, S){

        if(!S)S = m;
        return N.toFixed(6) + S;
      },
      getCoordMinutes : function(T, U, V, W, X, Y){

        if(!Y)Y = m;
        var v = Number(T);
        var ba = (v < 0) ? x : n;
        var bc = v > 0 ? W : X;
        v = Math.abs(v);
        var bd = Math.floor(v);
        var bb = (v - bd) * 60.0;
        var p = String(bb);
        if(bb < 10)p = e + bb;
        var be = n;
        if(U == 2){

          if(bd >= 0 && bd < 10)be = e + bd; else be = bd;
        } else if(U == 3){

          if(bd >= 0 && bd < 10)be = t + bd; else if(bd >= 10 && bd < 100)be = e + bd; else be = bd;;
        };
        be = ba + be;
        return bc + j + be + Y + j + p.substr(0, V + 3) + w;
      },
      getCoord : function(bf, bg, bh, bi, bj, bk){

        return this.getCoordMinutes(bf, bg, bh, bi, bj, bk);
      },
      getDistanceToLine : function(bl, bm, bn, bo, bp, bq, br){

        var bt = {
        };
        if(bl == bn && bm == bo)return this.getDistance(bl, bm, bp, bq);
        var bu = 0;
        var bs = 0;
        if(bm != bo){

          var a = (bl - bn) / (bm - bo);
          var b = bl - bm * a;
          bu = (bq + a * bp - a * b) / (a * a + 1.0);
          bs = bu * a + b;
        } else {

          var a = (bm - bo) / (bl - bn);
          var b = bm - bl * a;
          bs = (bp + a * bq - a * b) / (a * a + 1.0);
          bu = bs * a + b;
        };
        if(!br)return this.getDistance(bs, bu, bp, bq);
        if(bu < bm && bu < bo || bu > bm && bu > bo || bs < bl && bs < bn || bs > bl && bs > bn)return -1; else return this.getDistance(bs, bu, bp, bq);
      },
      pointInShape : function(bv, bw, bx, by, bz){

        if(!bv || typeof bv != h)return false;
        var bC = bv.length;
        if(bv.length > 2 && bw == 0){

          if(bz && !(by >= bz.min_y && by <= bz.max_y && bx >= bz.min_x && bx <= bz.max_x))return;
          var bI = 0;
          var bF = 0;
          var bE = 0;
          var bA = 0;
          var bK = 0;
          var bJ = 0;
          var bG = 0;
          var bB = 0;
          var bD = false;
          bE = bv[bC - 1].x;
          bA = bv[bC - 1].y;
          for(var i = 0;i < bC;i++){

            bI = bv[i].x;
            bF = bv[i].y;
            if(bI > bE){

              bK = bE;
              bG = bI;
              bJ = bA;
              bB = bF;
            } else {

              bK = bI;
              bG = bE;
              bJ = bF;
              bB = bA;
            };
            if((bI < bx) == (bx <= bE) && (by - bJ) * (bG - bK) < (bB - bJ) * (bx - bK)){

              bD = !bD;
            };
            bE = bI;
            bA = bF;
          };
          return bD;
        } else if(bv.length > 1 && bw){

          if(bz && !(by >= bz.min_y && by <= bz.max_y && bx >= bz.min_x && bx <= bz.max_x))return;
          var bM = 0;
          var bL = 0;
          for(var i = 0;i < bC;i++){

            var bH = this.getDistance(bv[i].y, bv[i].x, by, bx);
            if(bw && bH != -1 && bH <= bw)return true;
            if(bw){

              if(bH != -1 && bH <= bw / 2)return true;
              if(i > 0){

                var bH = this.getDistanceToLine(bv[i].y, bv[i].x, bM, bL, by, bx, true);
                if(bH != -1 && bH <= bw / 2)return true;
              };
            };
            bM = bv[i].y;
            bL = bv[i].x;
          };
        } else if(bv.length == 1 && bw){

          var p = bv[0];
          bH = this.getDistance(p.y, p.x, by, bx);
          if(bH != -1 && bH <= bw)return true;
        };;
        return false;
      },
      getShapeCenter : function(bN){

        if(!bN || typeof bN != h)return;
        var bS = bN.length;
        var bQ = 0xFFFFFFFF;
        var bR = 0xFFFFFFFF;
        var bO = -0xFFFFFFFF;
        var bP = -0xFFFFFFFF;
        for(var i = 0;i < bS;i++){

          if(bN[i].x < bQ)bQ = bN[i].x;
          if(bN[i].x > bO)bO = bN[i].x;
          if(bN[i].y < bR)bR = bN[i].y;
          if(bN[i].y > bP)bP = bN[i].y;
        };
        return {
          x : (bO + bQ) / 2,
          y : (bP + bR) / 2
        };
      },
      calculateBoundary : function(bT){

        var bX = 0;
        var ca = 0;
        var bW = 0;
        var cc = 0;
        var bU = 0;
        if(!bX && !ca && !bW && !cc){

          var bU = 0;
          for(var i = 0;i < bT.length;i++){

            var cb = bT[i];
            if(!bX && !ca && !bW && !cc){

              bW = cb.y;
              bX = cb.y;
              cc = cb.x;
              ca = cb.x;
              bU = cb.w;
            } else {

              if(cc > cb.x)cc = cb.x;
              if(ca < cb.x)ca = cb.x;
              if(bW > cb.y)bW = cb.y;
              if(bX < cb.y)bX = cb.y;
              if(cb.radius > bU)bU = cb.w;
            };
          };
          var bV = wialon.util.Geometry.getDistance(bW, cc, bW + 1, cc);
          var bY = wialon.util.Geometry.getDistance(bW, cc, bW, cc + 1);
          if(bV && bY){

            bW -= bU / bV;
            cc -= bU / bY;
            bX += bU / bV;
            ca += bU / bY;
          };
        };
        return {
          min_y : bW,
          min_x : cc,
          max_y : bX,
          max_x : ca
        };
      }
    }
  });
})();
(function(){

  var u = "string",t = "exchange/import_zones_save",s = "&svc=exchange/export_messages&params=",r = "core/search_item",q = ">",p = "exchange/import_json",o = "&svc=exchange/export_pois&params=",n = "&svc=exchange/export_zones&params=",m = "txt",l = "kml",e = "exchange/import_pois_save",k = "exchange/import_xml",h = "static",c = "&svc=exchange/export_json&params=",b = "wlb",g = "<",f = "wialon.exchange.Exchange",i = "plt",a = "wln",j = "",d = "/wialon/ajax.html?sid=";
  qx.Class.define(f, {
    type : h,
    statics : {
      msgExportFormat : {
        plt : i,
        nmea : m,
        kml : l,
        wln : a,
        wlb : b
      },
      getJsonExportUrl : function(v, w){

        if(typeof w != u || !w.length)w = (new Date()).getTime();
        var x = {
          json : v,
          fileName : w
        };
        return wialon.core.Session.getInstance().getBaseUrl() + d + wialon.core.Session.getInstance().getId() + c + encodeURI(qx.lang.Json.stringify(x).replace(/&lt;/g, g).replace(/&gt;/g, q));
      },
      importJson : function(y, z){

        wialon.core.Uploader.getInstance().uploadFiles(y, p, {
        }, z, true);
      },
      importXml : function(A, B){

        wialon.core.Uploader.getInstance().uploadFiles(A, k, {
        }, B, true);
      },
      getMessagesExportUrl : function(C, D, E){

        var F = {
          layerName : C,
          format : D,
          compress : E
        };
        return wialon.core.Session.getInstance().getBaseUrl() + d + wialon.core.Session.getInstance().getId() + s + qx.lang.Json.stringify(F);
      },
      getPOIsExportUrl : function(G, H, I){

        if(!H || !H.length)return j;
        var J = {
          fileName : G,
          pois : H,
          compress : I
        };
        return wialon.core.Session.getInstance().getBaseUrl() + d + wialon.core.Session.getInstance().getId() + o + qx.lang.Json.stringify(J);
      },
      getZonesExportUrl : function(K, L, M){

        if(!L || !L.length)return j;
        var N = {
          fileName : K,
          zones : L,
          compress : M
        };
        return wialon.core.Session.getInstance().getBaseUrl() + d + wialon.core.Session.getInstance().getId() + n + qx.lang.Json.stringify(N);
      },
      importPois : function(O, P, Q){

        return wialon.core.Remote.getInstance().remoteCall(e, {
          itemId : O,
          pois : P
        }, qx.lang.Function.bind(this.__bx, this, Q));
      },
      importZones : function(R, S, T){

        return wialon.core.Remote.getInstance().remoteCall(t, {
          itemId : R,
          zones : S
        }, qx.lang.Function.bind(this.__bx, this, T));
      },
      getItemJson : function(U, V){

        V = wialon.util.Helper.wrapCallback(V);
        return wialon.core.Remote.getInstance().remoteCall(r, {
          id : U,
          flags : wialon.util.Number.umax()
        }, qx.lang.Function.bind(V));
      },
      __bx : function(W, X, Y){

        if(X || !Y){

          W(X);
          return;
        };
        W(0, Y);
      }
    }
  });
})();
(function(){

  var j = "",i = "/gis_geocode",h = "number",g = "/gis_searchintelli",f = "geocode",e = "wialon.util.Gis",d = "/gis_search",c = "static",b = "search",a = "string";
  qx.Class.define(e, {
    type : c,
    statics : {
      geocodingFlags : {
      },
      searchFlags : {
      },
      geocodingParams : {
        flags : 0,
        city_radius : 0,
        dist_from_unit : 0,
        txt_dist : j
      },
      getLocations : function(k, l){

        l = wialon.util.Helper.wrapCallback(l);
        if(!k){

          l(2, null);
          return;
        };
        var n = qx.lang.Object.clone(this.geocodingParams);
        n.coords = wialon.util.Json.stringify(k);
        var m = wialon.core.Session.getInstance().getCurrUser();
        if(m)n.uid = m.getId();
        wialon.core.Remote.getInstance().ajaxRequest(wialon.core.Session.getInstance().getBaseGisUrl(f) + i, n, l, (k && k.length > 1) ? 10 : 2);
      },
      searchByString : function(o, p, q, r){

        r = wialon.util.Helper.wrapCallback(r);
        if(typeof o != a || typeof q != h){

          r(2, null);
          return;
        };
        var t = {
          phrase : o,
          flags : p,
          count : q
        };
        var s = wialon.core.Session.getInstance().getCurrUser();
        if(s)t.uid = s.getId();
        wialon.core.Remote.getInstance().ajaxRequest(wialon.core.Session.getInstance().getBaseGisUrl(b) + g, t, r, 10);
      },
      search : function(u, v, w, x, y, z, A){

        A = wialon.util.Helper.wrapCallback(A);
        if(typeof u != a || typeof v != a || typeof w != a || typeof x != a){

          A(2, null);
          return;
        };
        var C = {
          country : u,
          region : v,
          city : w,
          street : x,
          flags : y,
          count : z
        };
        var B = wialon.core.Session.getInstance().getCurrUser();
        if(B)C.uid = B.getId();
        wialon.core.Remote.getInstance().ajaxRequest(wialon.core.Session.getInstance().getBaseGisUrl(b) + d, C, A, 10);
      }
    }
  });
})();
(function(){

  var k = "plots",j = "Comic Sans MS",h = "render",g = "wialon.agro.Helper",f = "agro/update_unit_settings",e = "Courier New",d = "Arial Black",c = "static",b = "agro/get_units_in_plots",a = "DejaVuSans-BoldOblique",M = "Impact",L = "Arial",K = "Georgia",J = "DejaVuSans",I = "agro/delete_cultivation_msg",H = "Times New Roman",G = "Trebuchet MS",F = "clear",E = "register_ex",D = "&svc=agro/export_plots&params=",r = "agro/convert_plots",s = "Verdana",p = "&svc=agro/print_plots&params=",q = "agro/update_cultivation_msg",n = "DejaVuSans-Oblique",o = "DejaVuSans-Bold",l = "agro/create_plots_layer",m = "agro/get_unit_settings",t = "agro/import_plots",u = "uploadTrack",x = "",w = "register",z = "agro/upload_plot",y = "/wialon/ajax.html?sid=",B = "agro/get_cultivations",A = "upload",v = "undefined",C = "agro/upload_cultivation";
  qx.Class.define(g, {
    type : c,
    statics : {
      getCultivations : function(N, O, P, Q, R, S, T){

        var V = wialon.core.Session.getInstance().getRenderer();
        if(!V)return;
        var U = V.getLayers();
        for(var i = U.length - 1;i >= 0;i--){

          if(U[i].getName() == R){

            U[i].dispose();
            qx.lang.Array.remove(U, U[i]);
          };
        };
        return wialon.core.Remote.getInstance().remoteCall(B, {
          plotItemId : N,
          plotId : O,
          timeFrom : P,
          timeTo : Q,
          layerName : typeof R == v ? x : R,
          paintingScheme : S ? S : null
        }, qx.lang.Function.bind(this.__by, this, wialon.util.Helper.wrapCallback(T)), 300);
      },
      getCultivationsList : function(W, X, Y, ba, bb){

        return wialon.core.Remote.getInstance().remoteCall(B, {
          plotItemId : W,
          plotId : X,
          timeFrom : Y,
          timeTo : ba,
          layerName : x,
          paintingScheme : null
        }, wialon.util.Helper.wrapCallback(bb), 300);
      },
      uploadCultivation : function(bc, bd, be, bf){

        wialon.core.Uploader.getInstance().uploadFiles(bc, C, {
          tzOffset : bd,
          color : be,
          callMode : A
        }, qx.lang.Function.bind(this.__bz, this, wialon.util.Helper.wrapCallback(bf)), true);
      },
      updateCultivationLayer : function(bg, bh, bi, bj){

        return wialon.core.Remote.getInstance().remoteCall(C, {
          time : bg,
          action : bh,
          color : bi,
          callMode : h
        }, wialon.util.Helper.wrapCallback(bj), 300);
      },
      uploadUnitCultivation : function(bk, bl, bm, bn, bo, bp, bq, br, bs, bt, bu, bv, bw, bx){

        return wialon.core.Remote.getInstance().remoteCall(C, {
          unitId : bk,
          timeFrom : bl,
          timeTo : bm,
          switchSensorId : bn,
          widthSensorId : bo,
          flags : bp,
          tzOffset : bq,
          color : br,
          defaultWidth : bs,
          plotItemId : bt,
          plotId : bu,
          withinPlot : bv ? 1 : 0,
          callMode : u,
          filter : bw
        }, qx.lang.Function.bind(this.__bz, this, wialon.util.Helper.wrapCallback(bx)), 300);
      },
      uploadPlot : function(by, bz, bA){

        wialon.core.Uploader.getInstance().uploadFiles(by, z, {
          tzOffset : bz,
          callMode : A
        }, wialon.util.Helper.wrapCallback(bA), true);
      },
      uploadUnitPlot : function(bB, bC, bD, bE, bF){

        return wialon.core.Remote.getInstance().remoteCall(z, {
          unitId : bB,
          timeFrom : bC,
          timeTo : bD,
          switchSensorId : bE,
          callMode : u
        }, wialon.util.Helper.wrapCallback(bF), 300);
      },
      clearUploadedCultivation : function(bG){

        return wialon.core.Remote.getInstance().remoteCall(C, {
          callMode : F
        }, wialon.util.Helper.wrapCallback(bG), 300);
      },
      registerUploadedCultivation : function(bH, bI, bJ, bK, bL, bM, bN, bO, bP, bQ, bR, bS, bT, bU){

        return wialon.core.Remote.getInstance().remoteCall(C, {
          plotItemId : bH,
          plotId : bI,
          ctypeItemId : bJ,
          ctypeId : bK,
          machineItemId : bL,
          machineId : bM,
          equipItemId : bN,
          equipId : bO,
          description : bP,
          timeFrom : bQ,
          timeTo : bR,
          unitId : bS,
          fuelFlags : bT,
          callMode : w
        }, wialon.util.Helper.wrapCallback(bU), 300);
      },
      registerUnitCultivation : function(bV, bW, bX, bY, ca, cb, cc, cd, ce, cf, cg, ch, ci, cj, ck){

        return wialon.core.Remote.getInstance().remoteCall(C, {
          plotItemId : bV,
          plotId : bW,
          ctypeItemId : bX,
          ctypeId : bY,
          machineItemId : ca,
          machineId : cb,
          equipItemId : cc,
          equipId : cd,
          description : ce,
          timeFrom : cf,
          timeTo : cg,
          tzOffset : ch,
          unitId : ci,
          filter : cj,
          callMode : E
        }, wialon.util.Helper.wrapCallback(ck), 300);
      },
      createPlotsLayer : function(cl, cm, cn, co){

        var cq = wialon.core.Session.getInstance().getRenderer();
        if(!cq)return;
        var cp = cq.getLayers();
        for(var i = cp.length - 1;i >= 0;i--){

          if(cp[i].getName() == cl){

            cp[i].dispose();
            qx.lang.Array.remove(cp, cp[i]);
          };
        };
        return wialon.core.Remote.getInstance().remoteCall(l, {
          layerName : cl,
          plots : cm,
          flags : cn
        }, qx.lang.Function.bind(this.__bd, this, wialon.util.Helper.wrapCallback(co)), 300);
      },
      getPrintUrl : function(cr, cs, ct, cu, cv, cw, cx, cy, cz, cA){

        var cB = {
          fileType : cr,
          isPlotGroup : cs,
          plots : ct,
          imageFlags : cu,
          plotFlags : cv,
          mapScale : cw,
          font : cx,
          fontSize : cy,
          fontColor : cz,
          lang : cA,
          rnd : (new Date).getTime()
        };
        return wialon.core.Session.getInstance().getBaseUrl() + y + wialon.core.Session.getInstance().getId() + p + wialon.util.Json.stringify(cB);
      },
      getUnitSettings : function(cC, cD){

        return wialon.core.Remote.getInstance().remoteCall(m, {
          itemId : this.getId()
        }, wialon.util.Helper.wrapCallback(cD), 300);
      },
      updateUnitSettings : function(cE, cF, cG, cH, cI){

        return wialon.core.Remote.getInstance().remoteCall(f, {
          unitId : cE,
          machineItemId : cF,
          machineId : cG,
          settings : cH
        }, wialon.util.Helper.wrapCallback(cI), 300);
      },
      convertPlots : function(cJ, cK, cL){

        return wialon.core.Remote.getInstance().remoteCall(r, {
          resourceId : cJ,
          plots : cK
        }, wialon.util.Helper.wrapCallback(cL), 300);
      },
      updateCultivationMsg : function(cM, cN, cO, cP, cQ, cR, cS){

        return wialon.core.Remote.getInstance().remoteCall(q, {
          plotItemId : cM,
          plotId : cN,
          timeFrom : cO,
          timeTo : cP,
          msgIndex : cQ,
          params : cR
        }, wialon.util.Helper.wrapCallback(cS), 300);
      },
      deleteCultivationMsg : function(cT, cU, cV, cW, cX, cY){

        return wialon.core.Remote.getInstance().remoteCall(I, {
          plotItemId : cT,
          plotId : cU,
          timeFrom : cV,
          timeTo : cW,
          msgIndex : cX
        }, wialon.util.Helper.wrapCallback(cY), 300);
      },
      getPlotsUrl : function(da, db, dc){

        return wialon.core.Session.getInstance().getBaseUrl() + y + wialon.core.Session.getInstance().getId() + D + wialon.util.Json.stringify({
          fileName : da ? da : k,
          plots : db,
          tzOffset : dc
        });
      },
      importPlot : function(dd, de, df){

        wialon.core.Uploader.getInstance().uploadFiles([dd], t, {
          tzOffset : de,
          callMode : A
        }, wialon.util.Helper.wrapCallback(df), true);
      },
      registerPlots : function(dg, dh, di, dj){

        return wialon.core.Remote.getInstance().remoteCall(t, {
          resourceId : dg,
          groupId : dh,
          config : di,
          callMode : w
        }, wialon.util.Helper.wrapCallback(dj), 300);
      },
      getUnitsInPlots : function(dk){

        return wialon.core.Remote.getInstance().remoteCall(b, {
        }, wialon.util.Helper.wrapCallback(dk), 300);
      },
      print : {
        fileType : {
          svg : 0x01,
          png : 0x02
        },
        imageFlag : {
          a0 : 0x01,
          a1 : 0x02,
          a2 : 0x04,
          a3 : 0x08,
          a4 : 0x10,
          attachMap : 0x20,
          colored : 0x40
        },
        mapScale : {
          normal : 0x00,
          x2 : 0x01,
          x4 : 0x02,
          x6 : 0x03,
          x8 : 0x04,
          x10 : 0x05,
          x20 : 0x06,
          x50 : 0x07,
          x100 : 0x08,
          x200 : 0x09,
          x400 : 0x0A,
          x1000 : 0x0B
        },
        font : {
          dejaVuSans : J,
          dejaVuSansOblique : n,
          dejaVuSansBold : o,
          dejaVuSansBoldOblique : a,
          arial : L,
          arialBlack : d,
          courierNew : e,
          comicSansMS : j,
          georgia : K,
          impact : M,
          timesNewRoman : H,
          trebuchetMS : G,
          verdana : s
        },
        plotFlag : {
          placementHorizontal : 0x00,
          landscape : 0x01,
          rotate90CCW : 0x02,
          plotName : 0x04,
          plotDescription : 0x08,
          plotArea : 0x10,
          usefulPlotArea : 0x20,
          crop : 0x40,
          placementVertical : 0x80
        }
      },
      __bd : function(dl, dm, dn){

        var dq = wialon.core.Session.getInstance().getRenderer();
        if(!dq)return;
        var dp = null;
        if(dm == 0 && dn){

          if(typeof dn.name != v){

            dp = new wialon.render.Layer(dn);
            dq.getLayers().push(dp);
          };
          dq.setVersion(dq.getVersion() + 1);
        };
        dl(dm, dp);
      },
      __by : function(dr, ds, dt){

        var dv = wialon.core.Session.getInstance().getRenderer();
        if(!dv)return;
        var du = null;
        if(ds == 0 && dt && dt.layer){

          if(typeof dt.layer.name != v){

            du = new wialon.render.Layer(dt.layer);
            dv.getLayers().push(du);
          };
          dv.setVersion(dv.getVersion() + 1);
        };
        dr(ds, {
          layer : du,
          cultivation : dt.cultivation
        });
      },
      __bz : function(dw, dx, dy){

        var dB = wialon.core.Session.getInstance().getRenderer();
        if(!dB)return;
        var dA = null;
        if(dx == 0 && dy && dy.data && dy.data.layer){

          var dz = dB.getLayers();
          for(var i = dz.length - 1;i >= 0;i--){

            if(dz[i].getName() == dy.data.layer.name){

              dz[i].dispose();
              qx.lang.Array.remove(dz, dz[i]);
            };
          };
          if(typeof dy.data.layer.name != v){

            dA = new wialon.render.Layer(dy.data.layer);
            dB.getLayers().push(dA);
          };
          dB.setVersion(dB.getVersion() + 1);
        };
        dw(dx, {
          layer : dA,
          registrar : (dy && dy.data) ? dy.data.registrar : []
        });
      }
    }
  });
})();
(function(){

  var q = "Invalid input",p = "Error performing request",o = "",n = "Item with such unique property already exists",m = "wialon.core.Errors",l = "Invalid user name or e-mail",k = "Invalid service",j = "Abort batch request",i = "Invalid result",h = "Access denied",c = "Authorization server is unavailable, please try again later",g = "Invalid user name or password",f = "Only one request of given time is allowed at the moment",b = "Invalid session",a = "No message for selected interval",e = "static",d = "Unknown error";
  qx.Class.define(m, {
    type : e,
    statics : {
      getErrorText : function(r){

        switch(r){case 0:
        return o;case 1:
        return b;case 2:
        return k;case 3:
        return i;case 4:
        return q;case 5:
        return p;case 6:
        break;case 7:
        return h;case 8:
        return g;case 9:
        return c;case 10:
        return j;case 11:
        return l;case 1001:
        return a;case 1002:
        return n;case 1003:
        return f;default:
        break;};
        return d;
      }
    }
  });
})();
(function(){

  var c = "wialon.agro.MFuelRates",b = "agro/get_fuel_rates",a = "agro/update_fuel_rates";
  qx.Mixin.define(c, {
    members : {
      getFuelRates : function(d){

        return wialon.core.Remote.getInstance().remoteCall(b, {
          itemId : this.getId()
        }, wialon.util.Helper.wrapCallback(d));
      },
      updateFuelRates : function(e, f){

        return wialon.core.Remote.getInstance().remoteCall(a, {
          itemId : this.getId(),
          rates : e
        }, wialon.util.Helper.wrapCallback(f));
      }
    }
  });
})();
(function(){

  var l = "&",k = "data",j = "error",i = "wialon.core.NodeHttp",h = "http",g = "://",f = "end",e = ":",d = "utf8",c = "https",a = "?",b = "";
  qx.Class.define(i, {
    extend : qx.core.Object,
    construct : function(m, o){

      qx.core.Object.call(this);
      var p = wialon.core.Session.getInstance().getBaseUrl().split(g);
      if(p[0] == c){

        this._port = 443;
        this._http = require(c);
      } else {

        this._port = 80;
        this._http = require(h);
      };
      p = p[p.length - 1].split(e);
      if(p.length > 1)this._port = p[1];
      this._hostname = p[0];
      this._callbacks = {
      };
    },
    members : {
      send : function(q, r, s, t, u){

        if(q.indexOf(a) == -1)q += a + this.__R(r); else q += l + this.__R(r);
        var w = {
          host : this._hostname,
          port : this._port,
          path : q
        };
        var v = {
          counter : ++this._counter,
          options : w
        };
        this._callbacks[this._counter] = [s, t, v, 0, u, null, b];
        this.__bA(this._counter);
      },
      supportAsync : function(){

        return true;
      },
      _http : null,
      _hostname : b,
      _port : 80,
      _id : 0,
      _callbacks : {
      },
      _timeout : 0,
      _counter : 0,
      __R : function(x){

        var y = [];
        var z = false;
        if(typeof x == "object"){

          for(var n in x){

            if(typeof x[n] == "object")y.push(n + "=" + encodeURIComponent(wialon.util.Json.stringify(x[n]))); else y.push(n + "=" + encodeURIComponent(x[n]));
            if(n == "sid")z = true;
          };
          return y.join("&") + (!z ? "&sid=" + wialon.core.Session.getInstance().getId() : "");
        };
        return !z ? "&sid=" + wialon.core.Session.getInstance().getId() : "";
      },
      __Q : function(A){

        var B = this._callbacks[A];
        if(!B)return;
        if(B[1])B[1]();
        delete this._callbacks[A];
      },
      __bA : function(C){

        var D = this._callbacks[C];
        if(D[4])D.push(setTimeout(qx.lang.Function.bind(this.__Q, this, C), D[4] * 1000));
        var F = qx.lang.Function.bind(this.__O, this, C, 0, b);
        var E = qx.lang.Function.bind(function(G, H){

          H.setEncoding(d);
          H.on(k, qx.lang.Function.bind(this.__bB, this, G));
          H.on(f, qx.lang.Function.bind(this.__O, this, G));
        }, this, C);
        this._http.get(D[2].options, E).on(j, F);
      },
      __bB : function(I, J){

        var K = this._callbacks[I];
        if(!K || !J)return;
        K[6] += J;
      },
      __O : function(L, M){

        var N = this._callbacks[L];
        if(!N)return;
        var P = new Date();
        var O = eval("(" + N[6] + ")");
        if(!O){

          N[1]();
          return;
        };
        if(O.error && O.error == 1003 && N[3] < 3){

          N[3]++;
          N[6] = "";
          if(N[4] && N[5]){

            clearTimeout(N[5]);
            N[5] = setTimeout(qx.lang.Function.bind(this.__Q, this, L), N[4] * 1000);
          };
          setTimeout(qx.lang.Function.bind(function(Q){

            this.__bA(L);
          }, this, L), Math.random() * 1000);
          return;
        };
        if(N[0])N[0](O);
        if(N[4] && N[5])clearTimeout(N[5]);
        delete this._callbacks[L];
      }
    }
  });
})();
(function(){

  var x = "wialon.util.String",w = "null",v = 'x',u = 'c',t = 'b',s = 'X',r = 'o',q = '-',p = 'f',o = "x",e = 's',n = 'd',h = "static",c = ":",b = "0",g = '',f = '%',k = "undefined",a = "string",m = "",d = ' ';
  qx.Class.define(x, {
    type : h,
    statics : {
      wrapString : function(y){

        if(typeof y == k || !y.length)y = m;
        return y;
      },
      xor : function(z, A){

        var B = [];
        for(var i = 0;i < z.length;i++)B.push(z.charCodeAt(i) ^ A.charCodeAt(i % A.length));
        return B.join(c);
      },
      unxor : function(C, D){

        var E = m;
        if(C == m)return C;
        C = C.split(c);
        for(var i = 0;i < C.length;i++)E += String.fromCharCode(C[i] ^ D.charCodeAt(i % D.length));
        return E;
      },
      isValidText : function(F){

        if(F === w)return false;
        var H = m + F;
        var G = /([\"\{\}\\])/i;
        return (H != null && typeof H === a && (!H.length || !G.test(H)));
      },
      isValidName : function(name, I){

        var K = m + name;
        if(I == null)return (K != null && this.isValidText(K) && K.length > 0 && K[0] != d && K[K.length - 1] != d);
        var L = (I.min != null ? I.min : 1);
        var J = (I.max != null ? I.max : 4096);
        return (K != null && this.isValidText(K) && K.length >= L && K.length <= J && K[0] != d && K[K.length - 1] != d);
      },
      isValidEmail : function(M){

        return (/^([a-z0-9_\-]+\.)*[a-z0-9_\-]+@([a-z0-9][a-z0-9\-]*[a-z0-9]\.)+[a-z]{2,4}$/i).test(M);
      },
      isValidPhone : function(N){

        var O = m + N;
        return (O != null && this.isValidText(O) && (/^[+]{1,1}[\d]{7,16}$/i).test(O));
      },
      stringMatchTemplates : function(P, Q, R){

        if(typeof P != a || !P.length || !(Q instanceof Array))return true;
        if(typeof R != a || R.length != 1)R = o;
        for(var i = 0;i < Q.length;i++){

          var T = Q[i];
          if(typeof T != a || T.length != P.length)continue;
          var S = true;
          for(var j = 0;j < P.length;j++){

            if(P[j] != T[j] && T[j].toLowerCase() != R[0]){

              S = false;
              break;
            };
          };
          if(S)return true;
        };
        return false;
      },
      sprintf : function(){

        if(typeof arguments == k){

          return null;
        };
        if(arguments.length < 1){

          return null;
        };
        if(typeof arguments[0] != a){

          return null;
        };
        if(typeof RegExp == k){

          return null;
        };
        var V = arguments[0];
        var ba = new RegExp(/(%([%]|(\-)?(\+|\x20)?(0)?(\d+)?(\.(\d)?)?([bcdfosxX])))/g);
        var W = new Array();
        var be = new Array();
        var X = 0;
        var Y = 0;
        var bc = 0;
        var bg = 0;
        var bd = g;
        var bf = null;
        while(bf = ba.exec(V)){

          if(bf[9]){

            X += 1;
          };
          Y = bg;
          bc = ba.lastIndex - bf[0].length;
          be[be.length] = V.substring(Y, bc);
          bg = ba.lastIndex;
          W[W.length] = {
            match : bf[0],
            left : bf[3] ? true : false,
            sign : bf[4] || g,
            pad : bf[5] || d,
            min : bf[6] || 0,
            precision : bf[8],
            code : bf[9] || f,
            negative : parseFloat(arguments[X]) < 0 ? true : false,
            argument : String(arguments[X])
          };
        };
        be[be.length] = V.substring(bg);
        if(W.length == 0){

          return V;
        };
        if((arguments.length - 1) < X){

          return null;
        };
        var U = null;
        var bf = null;
        var i = null;
        var bb = null;
        for(i = 0;i < W.length;i++){

          if(W[i].code == f){

            bb = f;
          } else if(W[i].code == t){

            W[i].argument = String(Math.abs(parseInt(W[i].argument)).toString(2));
            bb = this.__bC(W[i], true);
          } else if(W[i].code == u){

            W[i].argument = String(String.fromCharCode(parseInt(Math.abs(parseInt(W[i].argument)))));
            bb = this.__bC(W[i], true);
          } else if(W[i].code == n){

            W[i].argument = String(Math.abs(parseInt(W[i].argument)));
            bb = this.__bC(W[i]);
          } else if(W[i].code == p){

            W[i].argument = String(Math.abs(parseFloat(W[i].argument)).toFixed(W[i].precision ? W[i].precision : 6));
            bb = this.__bC(W[i]);
          } else if(W[i].code == r){

            W[i].argument = String(Math.abs(parseInt(W[i].argument)).toString(8));
            bb = this.__bC(W[i]);
          } else if(W[i].code == e){

            W[i].argument = W[i].argument.substring(0, W[i].precision ? W[i].precision : W[i].argument.length);
            bb = this.__bC(W[i], true);
          } else if(W[i].code == v){

            W[i].argument = String(Math.abs(parseInt(W[i].argument)).toString(16));
            bb = this.__bC(W[i]);
          } else if(W[i].code == s){

            W[i].argument = String(Math.abs(parseInt(W[i].argument)).toString(16));
            bb = this.__bC(W[i]).toUpperCase();
          } else {

            bb = W[i].match;
          };;;;;;;;
          bd += be[i];
          bd += bb;
        };
        bd += be[i];
        return bd;
      },
      __bC : function(bh, bi){

        if(bi){

          bh.sign = g;
        } else {

          bh.sign = bh.negative ? q : bh.sign;
        };
        var l = bh.min - bh.argument.length + 1 - bh.sign.length;
        var bj = new Array(l < 0 ? 0 : l).join(bh.pad);
        if(!bh.left){

          if(bh.pad == b || bi){

            return bh.sign + bj + bh.argument;
          } else {

            return bj + bh.sign + bh.argument;
          };
        } else {

          if(bh.pad == b || bi){

            return bh.sign + bh.argument + bj.replace(/0/g, d);
          } else {

            return bh.sign + bh.argument + bj;
          };
        };
      }
    }
  });
})();
(function(){

  var l = "Y-MM-dd",k = "Y-MM-dd HH:mm:ss",j = "wialon.util.DateTime",h = "tz",g = "0",f = "HH:mm",e = "static",c = "",b = "undefined",a = "string";
  qx.Class.define(j, {
    type : e,
    statics : {
      formatTime : function(m, n, o){

        if(!m)return c;
        var r = o;
        m = this.userTime(m);
        var d = new Date(m * 1000);
        if(!r || typeof r != a){

          r = k;
          if(n){

            var q = new Date(this.userTime(wialon.core.Session.getInstance().getServerTime()) * 1000);
            if((d.getUTCFullYear() == q.getUTCFullYear() && d.getUTCMonth() == q.getUTCMonth() && d.getUTCDate() == q.getUTCDate()) || n == 2)r = f;
          };
        };
        var p = {
          "Y" : d.getUTCFullYear(),
          "MM" : this.__bD(d.getUTCMonth() + 1),
          "dd" : this.__bD(d.getUTCDate()),
          "HH" : this.__bD(d.getUTCHours()),
          "mm" : this.__bD(d.getUTCMinutes()),
          "ss" : this.__bD(d.getUTCSeconds())
        };
        for(var i in p)r = r.replace(i, p[i]);
        return r;
      },
      formatDate : function(s, u){

        if(!s)return c;
        var w = u;
        if(!w || typeof w != a)w = l;
        s = this.userTime(s);
        var d = new Date(s * 1000);
        var v = {
          "Y" : d.getUTCFullYear(),
          "MM" : this.__bD(d.getUTCMonth() + 1),
          "dd" : this.__bD(d.getUTCDate())
        };
        for(var i in v)w = w.replace(i, v[i]);
        return w;
      },
      getTimezone : function(){

        var x = -(new Date()).getTimezoneOffset() * 60;
        var y = wialon.core.Session.getInstance().getCurrUser();
        if(!y)return x;
        return parseInt(y.getCustomProperty(h, x)) >>> 0;
      },
      getTimezoneOffset : function(){

        var z = this.getTimezone();
        if((z & this.__bE.TZ_TYPE_MASK) != this.__bE.TZ_TYPE_WITH_DST)return z & this.__bE.TZ_OFFSET_MASK;
        return parseInt(z & 0x80000000 ? ((z & 0xFFFF) | 0xFFFF0000) : (z & 0xFFFF));
      },
      getDSTOffset : function(A){

        if(!A)return 0;
        var E = this.getTimezone();
        var I = E & this.__bE.TZ_TYPE_MASK;
        var O = this.getTimezoneOffset(E);
        if((I == this.__bE.TZ_TYPE_WITH_DST && (E & this.__bE.TZ_DST_TYPE_MASK) == this.__bE.TZ_DST_TYPE_NONE) || (I != this.__bE.TZ_TYPE_WITH_DST && (E & this.__bE.TZ_DISABLE_DST_BIT)))return 0;
        if((I == this.__bE.TZ_TYPE_WITH_DST && (E & this.__bE.TZ_DST_TYPE_MASK) == this.__bE.TZ_DST_TYPE_SERVER) || I != this.__bE.TZ_TYPE_WITH_DST){

          var B = new Date();
          B.setTime(A * 1000);
          var J = new Date();
          J.setTime((A - 90 * 86400) * 1000);
          var K = new Date();
          K.setTime((A + 150 * 86400) * 1000);
          if(B.getTimezoneOffset() < J.getTimezoneOffset() || B.getTimezoneOffset() < K.getTimezoneOffset())return 3600;
          return 0;
        };
        var G = E & this.__bE.TZ_CUSTOM_DST_MASK;
        var N = new Date((A + O) * 1000);
        var F = N.getTime() / 1000;
        var M = 0;
        var C = 0;
        var L = N.getUTCFullYear();
        if(typeof this.__bG.from[G | L] == b || typeof this.__bG.to[G | L] == b){

          switch(G){case this.__bF.DST_MAR2SUN2AM_NOV1SUN2AM:
          M = this.getWdayTime(L, 2, 2, 0, 0, 2);
          C = this.getWdayTime(L, 10, 1, 0, 0, 2);
          break;case this.__bF.DST_MAR6SUN_OCT6SUN:
          M = this.getWdayTime(L, 2, 6, 0);
          C = this.getWdayTime(L, 9, 6, 0);
          break;case this.__bF.DST_MAR6SUN1AM_OCT6SUN1AM:
          M = this.getWdayTime(L, 2, 6, 0, 0, 1);
          C = this.getWdayTime(L, 9, 6, 0, 2);
          break;case this.__bF.DST_MAR6THU_SEP6FRI:
          M = this.getWdayTime(L, 2, 6, 4);
          C = this.getWdayTime(L, 8, 6, 5);
          break;case this.__bF.DST_MAR6SUN2AM_OCT6SUN2AM:
          M = this.getWdayTime(L, 2, 6, 0, 0, 2);
          C = this.getWdayTime(L, 9, 6, 0, 0, 2);
          if(L > 2011)return 0; else if(L == 2011)if(A < M)return -3600;;;
          return (A < M || A > C) ? -3600 : 0;
          break;case this.__bF.DST_MAR30_SEP21:
          M = this.getWdayTime(L, 2, 0, -1, 30);
          C = this.getWdayTime(L, 8, 0, -1, 21);
          break;case this.__bF.DST_APR1SUN2AM_OCT6SUN2AM:
          M = this.getWdayTime(L, 3, 1, 0, 0, 2);
          C = this.getWdayTime(L, 9, 6, 0, 0, 2);
          break;case this.__bF.DST_APR1_OCT6SUN:
          M = this.getWdayTime(L, 3, 0, -1, 1);
          C = this.getWdayTime(L, 9, 6, 0);
          break;case this.__bF.DST_APR6THU_SEP6THU:
          M = this.getWdayTime(L, 3, 6, 4);
          C = this.getWdayTime(L, 8, 6, 4);
          break;case this.__bF.DST_APR1_OCT1:
          M = this.getWdayTime(L, 3, 0, -1, 1);
          C = this.getWdayTime(L, 9, 0, -1, 1);
          break;case this.__bF.DST_MAR21_22SUN_SEP20_21SUN:
          if(this.isLeapYear(L)){

            M = this.getWdayTime(L, 2, 0, -1, 21);
            C = this.getWdayTime(L, 8, 0, -1, 20, 23, 0, 0);
          } else {

            M = this.getWdayTime(L, 2, 0, -1, 22);
            C = this.getWdayTime(L, 8, 0, -1, 21, 23, 0, 0);
          };
          break;case this.__bF.DST_SEP1SUNAFTER7_APR1SUNAFTER5:
          M = this.getWdayTime(L, 8, 1, 0, 7);
          C = this.getWdayTime(L, 3, 1, 0, 5);
          break;case this.__bF.DST_SEP1SUN_APR1SUN:
          M = this.getWdayTime(L, 8, 1, 0);
          C = this.getWdayTime(L, 3, 1, 0);
          break;case this.__bF.DST_SEP6SUN_APR1SUN:
          M = this.getWdayTime(L, 8, 6, 0);
          C = this.getWdayTime(L, 3, 1, 0);
          break;case this.__bF.DST_OCT2SUN_MAR2SUN:
          M = this.getWdayTime(L, 9, 2, 0);
          C = this.getWdayTime(L, 2, 2, 0);
          break;case this.__bF.DST_OCT1SUN_FEB3SUN:
          M = this.getWdayTime(L, 9, 1, 0);
          C = this.getWdayTime(L, 1, 3, 0);
          break;case this.__bF.DST_OCT3SUN_MAR2SUN:
          M = this.getWdayTime(L, 9, 3, 0);
          C = this.getWdayTime(L, 2, 2, 0);
          break;case this.__bF.DST_OCT1SUN_MAR2SUN:
          M = this.getWdayTime(L, 9, 1, 0);
          C = this.getWdayTime(L, 2, 2, 0);
          break;case this.__bF.DST_OCT1SUN_APR1SUN:
          M = this.getWdayTime(L, 9, 1, 0);
          C = this.getWdayTime(L, 3, 1, 0);
          break;case this.__bF.DST_OCT1SUN_MAR6SUN:
          M = this.getWdayTime(L, 9, 1, 0);
          C = this.getWdayTime(L, 2, 6, 0);
          break;default:
          return 0;};
          this.__bG.from[G | L] = M;
          if(C % 2 == 0)C--;
          this.__bG.to[G | L] = C;
        } else {

          M = this.__bG.from[G | L];
          C = this.__bG.to[G | L];
        };
        var H = (E & this.__bE.TZ_DST_TYPE_MASK) == this.__bE.TZ_DST_TYPE_CUSTOM_UTC ? M : M - O;
        var D = (E & this.__bE.TZ_DST_TYPE_MASK) == this.__bE.TZ_DST_TYPE_CUSTOM_UTC ? C : C - O;
        if(G >= this.__bF.DST_SOUTHERN_SEMISPHERE)return (A <= H && A >= D) ? 0 : 3600;
        return (A >= H && A <= D) ? 3600 : 0;
      },
      isLeapYear : function(P){

        if(P % 4 == 0 && P % 100 != 0)return true; else if(P % 4 == 0 && P % 100 == 0 && P % 400 == 0)return true;;
        return false;
      },
      getWdayTime : function(Q, R, S, T, U, V, W, X){

        var Y = new Date();
        Y.setUTCFullYear(Q);
        Y.setUTCMonth(R);
        Y.setUTCDate(1);
        Y.setUTCHours(0);
        Y.setUTCMilliseconds(0);
        Y.setUTCMinutes(0);
        Y.setUTCSeconds(0);
        var ba = 0;
        if(T == -1)ba = U; else {

          if(Y.getUTCDay() <= T)ba = (T - Y.getUTCDay()) + 1; else ba = 8 - (Y.getUTCDay() - T);
          if(S < 6){

            if(U){

              while(ba <= U)ba += 7;
            } else if(S)ba += 7 * (S - 1);;
          } else {

            var bb = this.getMonthDays(R, Q);
            if(ba + 4 * 7 <= bb)ba += 4 * 7; else ba += 3 * 7;
          };
        };
        Y.setUTCDate(ba);
        if(V)Y.setUTCHours(V);
        if(W)Y.setUTCMinutes(W);
        if(X)Y.setUTCSeconds(X);
        return parseInt(Y.getTime() / 1000);
      },
      getMonthDays : function(bc, bd){

        if(bc < 0 || !bd)return 0;
        var be = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        if(bc >= be.length)return 0;
        if(bc == 1 && this.getYearDays(bd) == 365)return 29;
        return be[bc];
      },
      getYearDays : function(bf){

        if(!bf)return 0;
        if((bf % 4) == 0){

          if((bf % 100) == 0)return ((bf % 400) == 0) ? 365 : 364;
          return 365;
        };
        return 364;
      },
      userTime : function(bg){

        return bg + this.getDSTOffset(bg) + this.getTimezoneOffset();
      },
      absoluteTime : function(bh){

        var t = bh - this.getTimezoneOffset();
        var bi = this.getDSTOffset(t);
        var bj = this.getDSTOffset(t - 3600);
        if(bi == bj)return t - bi;
        return t;
      },
      calculateInterval : function(bk, bl, bm){

        var bt = wialon.item.MReport.intervalFlag;
        var bs = wialon.core.Session.getInstance().getServerTime();
        if(bm & bt.useCurrentTime)bl = bs;
        if(bm & (bt.prevHour | bt.prevDay | bt.prevWeek | bt.prevMonth | bt.prevYear))bk = bs;
        var d = new Date(this.userTime(bk) * 1000);
        var bo = bk - d.getUTCSeconds() - 60 * d.getUTCMinutes() - 3600 * d.getUTCHours();
        if(bm & bt.prevHour){

          if(bm & bt.currTimeAndPrev){

            var bv = bs - (bs % 60);
            bk = bv - 3600 * bl;
            bl = bv - 1;
          } else {

            var bv = bo + (3600 * d.getUTCHours());
            bk = bv - 3600 * bl;
            bl = bv - 1;
          };
        } else if(bm & bt.prevDay){

          if(bm & bt.currTimeAndPrev){

            bk = bo - 86400 * (bl - 1);
            bl = bs;
          } else {

            bk = bo - 86400 * bl;
            bl = bo - 1;
          };
        } else if(bm & bt.prevWeek){

          var bn = bo - 86400 * (d.getUTCDay() - 1);
          if(bm & bt.currTimeAndPrev){

            bk = bn - 86400 * 7 * (bl - 1);
            bl = bs;
          } else {

            bk = bn - 86400 * 7 * bl;
            bl = bn - 1;
          };
        } else if(bm & bt.prevMonth){

          var bu = d.getUTCMonth();
          var br = d.getUTCFullYear();
          var bp = bo - 86400 * (d.getUTCDate() - 1);
          bk = bp;
          if(bm & bt.currTimeAndPrev)bl -= 1;
          while(bl-- > 0){

            if(--bu < 0){

              bu = 11;
              if(--br == 0)return;
            };
            bk -= 86400 * this.getMonthDays(bu, br);
          };
          if(bm & bt.currTimeAndPrev){

            bl = bs;
          } else {

            bl = bp - 1;
          };
        } else if(bm & bt.prevYear){

          var br = 1970;
          var bw = Math.floor(bo / 86400);
          var bq = this.getYearDays(br) + 1;
          while(bw >= bq){

            bw -= bq;
            bq = this.getYearDays(++br) + 1;
          };
          var bx = bo - 86400 * (++bw);
          bk = bx;
          if(bm & bt.currTimeAndPrev)bl -= 1;
          while(bl-- > 0){

            if(--br == 0)return;
            bk -= 86400 * (this.getYearDays(br) + 1);
          };
          if(bm & bt.currTimeAndPrev){

            bl = bs;
          } else {

            bl = bx - 1;
          };
        };;;;
        return {
          from : bk,
          to : bl
        };
      },
      __bD : function(i){

        if(i < 10)i = g + i;
        return i;
      },
      __bE : {
        TZ_TYPE_MASK : 0x0C000000,
        TZ_TYPE_WITH_DST : 0x08000000,
        TZ_DST_TYPE_MASK : 0x03000000,
        TZ_DST_TYPE_NONE : 0x00000000,
        TZ_DST_TYPE_SERVER : 0x01000000,
        TZ_DST_TYPE_CUSTOM : 0x02000000,
        TZ_CUSTOM_DST_MASK : 0x00FF0000,
        TZ_DST_TYPE_CUSTOM_UTC : 0x03000000
      },
      __bF : {
        DST_MAR2SUN2AM_NOV1SUN2AM : 0x00010000,
        DST_MAR6SUN_OCT6SUN : 0x00020000,
        DST_MAR6SUN1AM_OCT6SUN1AM : 0x00030000,
        DST_MAR6THU_SEP6FRI : 0x00040000,
        DST_MAR6SUN2AM_OCT6SUN2AM : 0x00050000,
        DST_MAR30_SEP21 : 0x00060000,
        DST_APR1SUN2AM_OCT6SUN2AM : 0x00070000,
        DST_APR1_OCT6SUN : 0x00080000,
        DST_APR6THU_SEP6THU : 0x00090000,
        DST_APR6THU_UNKNOWN : 0x000A0000,
        DST_APR1_OCT1 : 0x000B0000,
        DST_MAR21_22SUN_SEP20_21SUN : 0x000C0000,
        DST_SOUTHERN_SEMISPHERE : 0x00200000,
        DST_SEP1SUNAFTER7_APR1SUNAFTER5 : 0x00200000,
        DST_SEP1SUN_APR1SUN : 0x00210000,
        DST_SEP6SUN_APR1SUN : 0x00220000,
        DST_OCT2SUN_MAR2SUN : 0x00230000,
        DST_OCT1SUN_FEB3SUN : 0x00240000,
        DST_OCT3SUN_MAR2SUN : 0x00250000,
        DST_OCT1SUN_MAR2SUN : 0x00260000,
        DST_OCT1SUN_APR1SUN : 0x00270000,
        DST_OCT1SUN_MAR6SUN : 0x00280000
      },
      __bG : {
        from : {
        },
        to : {
        }
      }
    }
  });
})();
(function(){

  var j = "update_agro_machine",i = "plots",h = "agro/update_machine",g = "delete_agro_crop",f = "create_agro_machine",e = "agroUnit",d = "crop",c = "agro/update_plot_group",b = "agro/get_plot_data",a = "plotGroup",ba = "create_agro_equip",Y = "aplt",X = "machine",W = "delete_agro_cul_type",V = "delete_agro_machine",U = "update_agro_plot_group",T = "delete_agro_equip",S = "cultivationType",R = "acltt",Q = "delete_agro_msg",q = "create_agro_plot_group",r = "plot",o = "agro/update_equipment",p = "wialon.agro.MAgro",m = "update_agro_crop",n = "amch",k = "update_agro_unit_cfg",l = "equipment",u = "update_agro_fuel",v = "cultivationTypes",D = "machines",B = "delete_agro_plot",I = "agro/update_crop",F = "apltg",M = "equipments",K = "plotGroups",x = "delete_agro_plot_group",P = "create_agro_cul_type",O = "import_agro_plots",N = "agro/update_plot",w = "agro/update_cultivation_type",z = "aequ",A = "create_agro_crop",C = "fuelRates",E = "create_agro_plot",G = "update_agro_plot",J = "update_agro_props",L = "crops",s = "update_agro_equip",t = "update_agro_cul_type",y = "undefined",H = "aclt";
  qx.Mixin.define(p, {
    members : {
      loadAgroLibrary : function(bb){

        if(!this._libraries)return false;
        if(typeof this._libraries[bb] != y)return true;
        if(bb == i)wialon.item.PluginsManager.bindPropItem(wialon.item.Resource, Y, r, N, b); else if(bb == K)wialon.item.PluginsManager.bindPropItem(wialon.item.Resource, F, a, c); else if(bb == D)wialon.item.PluginsManager.bindPropItem(wialon.item.Resource, n, X, h); else if(bb == M)wialon.item.PluginsManager.bindPropItem(wialon.item.Resource, z, l, o); else if(bb == v)wialon.item.PluginsManager.bindPropItem(wialon.item.Resource, R, S, w); else if(bb == L)wialon.item.PluginsManager.bindPropItem(wialon.item.Resource, H, d, I); else if(bb == C)qx.Class.include(wialon.item.Resource, wialon.agro.MFuelRates); else if(bb == e)qx.Class.include(wialon.item.Unit, wialon.agro.MAgroUnit); else return false;;;;;;;;
        this._libraries[bb] = 1;
        return true;
      },
      logMessageAction : {
        agroCreatedCrop : A,
        agroUpdatedCrop : m,
        agroDeletedCrop : g,
        agroCreatedCultivationType : P,
        agroUpdatedCultivationType : t,
        agroDeletedCultivationType : W,
        agroCreatedEquipment : ba,
        agroUpdatedEquipment : s,
        agroDeletedEquipment : T,
        agroCreatedMachine : f,
        agroUpdatedMachine : j,
        agroDeletedMachine : V,
        agroCreatedPlot : E,
        agroUpdatedPlot : G,
        agroDeletedPlot : B,
        agroCreatedPlotGroup : q,
        agroUpdatedPlotGroup : U,
        agroDeletedPlotGroup : x,
        agroDeletedMessage : Q,
        agroUpdatedProperties : J,
        agroUpdatedUnitSettings : k,
        agroUpdatedFuelRates : u,
        agroImportedAgroPlots : O
      }
    }
  });
})();